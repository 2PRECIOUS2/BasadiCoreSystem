import{j as t,u as lr,i as M,B as w,P as Le,L as ir,a as pt,b as vt,T as R,M as $,D as Ee,c as cr,d as ur,e as F,f as _,I as we,g as dr,h as hr,k as fr,l as xt,m as H,n as mr,S as gt,A as ue,o as yt,p as jt,q as _t,r as bt,s as Ie,F as pr,t as vr,v as xr,w as gr,x as yr,y as jr,H as _r,z as br,C as Cr,E as Pr,G as Sr}from"./mui-051d3b2b.js";import{c as Rr,r as i,R as Er,a as wr,b as Ir}from"./vendor-0625b040.js";import"./utils-f1b31201.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();var ke={},Ct=Rr;ke.createRoot=Ct.createRoot,ke.hydrateRoot=Ct.hydrateRoot;/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},oe.apply(this,arguments)}var J;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(J||(J={}));const Pt="popstate";function Or(e){e===void 0&&(e={});function r(l,n){let{pathname:o,search:c,hash:d}=l.location;return $e("",{pathname:o,search:c,hash:d},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(l,n){return typeof n=="string"?n:de(n)}return Tr(r,s,null,e)}function I(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function ze(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Ar(){return Math.random().toString(36).substr(2,8)}function St(e,r){return{usr:e.state,key:e.key,idx:r}}function $e(e,r,s,l){return s===void 0&&(s=null),oe({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?ae(r):r,{state:s,key:r&&r.key||l||Ar()})}function de(e){let{pathname:r="/",search:s="",hash:l=""}=e;return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),l&&l!=="#"&&(r+=l.charAt(0)==="#"?l:"#"+l),r}function ae(e){let r={};if(e){let s=e.indexOf("#");s>=0&&(r.hash=e.substr(s),e=e.substr(0,s));let l=e.indexOf("?");l>=0&&(r.search=e.substr(l),e=e.substr(0,l)),e&&(r.pathname=e)}return r}function Tr(e,r,s,l){l===void 0&&(l={});let{window:n=document.defaultView,v5Compat:o=!1}=l,c=n.history,d=J.Pop,u=null,h=m();h==null&&(h=0,c.replaceState(oe({},c.state,{idx:h}),""));function m(){return(c.state||{idx:null}).idx}function p(){d=J.Pop;let g=m(),x=g==null?null:g-h;h=g,u&&u({action:d,location:v.location,delta:x})}function b(g,x){d=J.Push;let j=$e(v.location,g,x);s&&s(j,g),h=m()+1;let O=St(j,h),T=v.createHref(j);try{c.pushState(O,"",T)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;n.location.assign(T)}o&&u&&u({action:d,location:v.location,delta:1})}function P(g,x){d=J.Replace;let j=$e(v.location,g,x);s&&s(j,g),h=m();let O=St(j,h),T=v.createHref(j);c.replaceState(O,"",T),o&&u&&u({action:d,location:v.location,delta:0})}function C(g){let x=n.location.origin!=="null"?n.location.origin:n.location.href,j=typeof g=="string"?g:de(g);return I(x,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,x)}let v={get action(){return d},get location(){return e(n,c)},listen(g){if(u)throw new Error("A history only accepts one active listener");return n.addEventListener(Pt,p),u=g,()=>{n.removeEventListener(Pt,p),u=null}},createHref(g){return r(n,g)},createURL:C,encodeLocation(g){let x=C(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:b,replace:P,go(g){return c.go(g)}};return v}var Rt;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Rt||(Rt={}));function Lr(e,r,s){s===void 0&&(s="/");let l=typeof r=="string"?ae(r):r,n=Be(l.pathname||"/",s);if(n==null)return null;let o=Lt(e);kr(o);let c=null;for(let d=0;c==null&&d<o.length;++d)c=qr(o[d],Hr(n));return c}function Lt(e,r,s,l){r===void 0&&(r=[]),s===void 0&&(s=[]),l===void 0&&(l="");let n=(o,c,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};u.relativePath.startsWith("/")&&(I(u.relativePath.startsWith(l),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(l.length));let h=G([l,u.relativePath]),m=s.concat(u);o.children&&o.children.length>0&&(I(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Lt(o.children,r,m,h)),!(o.path==null&&!o.index)&&r.push({path:h,score:Br(h,o.index),routesMeta:m})};return e.forEach((o,c)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))n(o,c);else for(let u of kt(o.path))n(o,c,u)}),r}function kt(e){let r=e.split("/");if(r.length===0)return[];let[s,...l]=r,n=s.endsWith("?"),o=s.replace(/\?$/,"");if(l.length===0)return n?[o,""]:[o];let c=kt(l.join("/")),d=[];return d.push(...c.map(u=>u===""?o:[o,u].join("/"))),n&&d.push(...c),d.map(u=>e.startsWith("/")&&u===""?"/":u)}function kr(e){e.sort((r,s)=>r.score!==s.score?s.score-r.score:Ur(r.routesMeta.map(l=>l.childrenIndex),s.routesMeta.map(l=>l.childrenIndex)))}const $r=/^:\w+$/,Mr=3,Wr=2,Dr=1,Nr=10,zr=-2,Et=e=>e==="*";function Br(e,r){let s=e.split("/"),l=s.length;return s.some(Et)&&(l+=zr),r&&(l+=Wr),s.filter(n=>!Et(n)).reduce((n,o)=>n+($r.test(o)?Mr:o===""?Dr:Nr),l)}function Ur(e,r){return e.length===r.length&&e.slice(0,-1).every((l,n)=>l===r[n])?e[e.length-1]-r[r.length-1]:0}function qr(e,r){let{routesMeta:s}=e,l={},n="/",o=[];for(let c=0;c<s.length;++c){let d=s[c],u=c===s.length-1,h=n==="/"?r:r.slice(n.length)||"/",m=Fr({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},h);if(!m)return null;Object.assign(l,m.params);let p=d.route;o.push({params:l,pathname:G([n,m.pathname]),pathnameBase:Qr(G([n,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(n=G([n,m.pathnameBase]))}return o}function Fr(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,l]=Vr(e.path,e.caseSensitive,e.end),n=r.match(s);if(!n)return null;let o=n[0],c=o.replace(/(.)\/+$/,"$1"),d=n.slice(1);return{params:l.reduce((h,m,p)=>{if(m==="*"){let b=d[p]||"";c=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}return h[m]=Jr(d[p]||"",m),h},{}),pathname:o,pathnameBase:c,pattern:e}}function Vr(e,r,s){r===void 0&&(r=!1),s===void 0&&(s=!0),ze(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let l=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(c,d)=>(l.push(d),"/([^\\/]+)"));return e.endsWith("*")?(l.push("*"),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,r?void 0:"i"),l]}function Hr(e){try{return decodeURI(e)}catch(r){return ze(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function Jr(e,r){try{return decodeURIComponent(e)}catch(s){return ze(!1,'The value for the URL param "'+r+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+s+").")),e}}function Be(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,l=e.charAt(s);return l&&l!=="/"?null:e.slice(s)||"/"}function Gr(e,r){r===void 0&&(r="/");let{pathname:s,search:l="",hash:n=""}=typeof e=="string"?ae(e):e;return{pathname:s?s.startsWith("/")?s:Kr(s,r):r,search:Yr(l),hash:Zr(n)}}function Kr(e,r){let s=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function Oe(e,r,s,l){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ue(e){return e.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function qe(e,r,s,l){l===void 0&&(l=!1);let n;typeof e=="string"?n=ae(e):(n=oe({},e),I(!n.pathname||!n.pathname.includes("?"),Oe("?","pathname","search",n)),I(!n.pathname||!n.pathname.includes("#"),Oe("#","pathname","hash",n)),I(!n.search||!n.search.includes("#"),Oe("#","search","hash",n)));let o=e===""||n.pathname==="",c=o?"/":n.pathname,d;if(l||c==null)d=s;else{let p=r.length-1;if(c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),p-=1;n.pathname=b.join("/")}d=p>=0?r[p]:"/"}let u=Gr(n,d),h=c&&c!=="/"&&c.endsWith("/"),m=(o||c===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}const G=e=>e.join("/").replace(/\/\/+/g,"/"),Qr=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Yr=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Zr=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Xr(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const $t=["post","put","patch","delete"];new Set($t);const ea=["get",...$t];new Set(ea);/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function he(){return he=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},he.apply(this,arguments)}const Fe=i.createContext(null),Mt=i.createContext(null),Z=i.createContext(null),ve=i.createContext(null),V=i.createContext({outlet:null,matches:[],isDataRoute:!1}),Wt=i.createContext(null);function ta(e,r){let{relative:s}=r===void 0?{}:r;se()||I(!1);let{basename:l,navigator:n}=i.useContext(Z),{hash:o,pathname:c,search:d}=Ve(e,{relative:s}),u=c;return l!=="/"&&(u=c==="/"?l:G([l,c])),n.createHref({pathname:u,search:d,hash:o})}function se(){return i.useContext(ve)!=null}function X(){return se()||I(!1),i.useContext(ve).location}function Dt(e){i.useContext(Z).static||i.useLayoutEffect(e)}function le(){let{isDataRoute:e}=i.useContext(V);return e?va():ra()}function ra(){se()||I(!1);let e=i.useContext(Fe),{basename:r,navigator:s}=i.useContext(Z),{matches:l}=i.useContext(V),{pathname:n}=X(),o=JSON.stringify(Ue(l).map(u=>u.pathnameBase)),c=i.useRef(!1);return Dt(()=>{c.current=!0}),i.useCallback(function(u,h){if(h===void 0&&(h={}),!c.current)return;if(typeof u=="number"){s.go(u);return}let m=qe(u,JSON.parse(o),n,h.relative==="path");e==null&&r!=="/"&&(m.pathname=m.pathname==="/"?r:G([r,m.pathname])),(h.replace?s.replace:s.push)(m,h.state,h)},[r,s,o,n,e])}const aa=i.createContext(null);function sa(e){let r=i.useContext(V).outlet;return r&&i.createElement(aa.Provider,{value:e},r)}function Ve(e,r){let{relative:s}=r===void 0?{}:r,{matches:l}=i.useContext(V),{pathname:n}=X(),o=JSON.stringify(Ue(l).map(c=>c.pathnameBase));return i.useMemo(()=>qe(e,JSON.parse(o),n,s==="path"),[e,o,n,s])}function na(e,r){return oa(e,r)}function oa(e,r,s){se()||I(!1);let{navigator:l}=i.useContext(Z),{matches:n}=i.useContext(V),o=n[n.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=X(),h;if(r){var m;let v=typeof r=="string"?ae(r):r;d==="/"||(m=v.pathname)!=null&&m.startsWith(d)||I(!1),h=v}else h=u;let p=h.pathname||"/",b=d==="/"?p:p.slice(d.length)||"/",P=Lr(e,{pathname:b}),C=da(P&&P.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:G([d,l.encodeLocation?l.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:G([d,l.encodeLocation?l.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),n,s);return r&&C?i.createElement(ve.Provider,{value:{location:he({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:J.Pop}},C):C}function la(){let e=pa(),r=Xr(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},r),s?i.createElement("pre",{style:n},s):null,o)}const ia=i.createElement(la,null);class ca extends i.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error||s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){console.error("React Router caught the following error during render",r,s)}render(){return this.state.error?i.createElement(V.Provider,{value:this.props.routeContext},i.createElement(Wt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ua(e){let{routeContext:r,match:s,children:l}=e,n=i.useContext(Fe);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),i.createElement(V.Provider,{value:r},l)}function da(e,r,s){var l;if(r===void 0&&(r=[]),s===void 0&&(s=null),e==null){var n;if((n=s)!=null&&n.errors)e=s.matches;else return null}let o=e,c=(l=s)==null?void 0:l.errors;if(c!=null){let d=o.findIndex(u=>u.route.id&&(c==null?void 0:c[u.route.id]));d>=0||I(!1),o=o.slice(0,Math.min(o.length,d+1))}return o.reduceRight((d,u,h)=>{let m=u.route.id?c==null?void 0:c[u.route.id]:null,p=null;s&&(p=u.route.errorElement||ia);let b=r.concat(o.slice(0,h+1)),P=()=>{let C;return m?C=p:u.route.Component?C=i.createElement(u.route.Component,null):u.route.element?C=u.route.element:C=d,i.createElement(ua,{match:u,routeContext:{outlet:d,matches:b,isDataRoute:s!=null},children:C})};return s&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?i.createElement(ca,{location:s.location,revalidation:s.revalidation,component:p,error:m,children:P(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):P()},null)}var Nt=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Nt||{}),fe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fe||{});function ha(e){let r=i.useContext(Fe);return r||I(!1),r}function fa(e){let r=i.useContext(Mt);return r||I(!1),r}function ma(e){let r=i.useContext(V);return r||I(!1),r}function zt(e){let r=ma(),s=r.matches[r.matches.length-1];return s.route.id||I(!1),s.route.id}function pa(){var e;let r=i.useContext(Wt),s=fa(fe.UseRouteError),l=zt(fe.UseRouteError);return r||((e=s.errors)==null?void 0:e[l])}function va(){let{router:e}=ha(Nt.UseNavigateStable),r=zt(fe.UseNavigateStable),s=i.useRef(!1);return Dt(()=>{s.current=!0}),i.useCallback(function(n,o){o===void 0&&(o={}),s.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,he({fromRouteId:r},o)))},[e,r])}function me(e){let{to:r,replace:s,state:l,relative:n}=e;se()||I(!1);let{matches:o}=i.useContext(V),{pathname:c}=X(),d=le(),u=qe(r,Ue(o).map(m=>m.pathnameBase),c,n==="path"),h=JSON.stringify(u);return i.useEffect(()=>d(JSON.parse(h),{replace:s,state:l,relative:n}),[d,h,n,s,l]),null}function tn(e){return sa(e.context)}function xa(e){let{basename:r="/",children:s=null,location:l,navigationType:n=J.Pop,navigator:o,static:c=!1}=e;se()&&I(!1);let d=r.replace(/^\/*/,"/"),u=i.useMemo(()=>({basename:d,navigator:o,static:c}),[d,o,c]);typeof l=="string"&&(l=ae(l));let{pathname:h="/",search:m="",hash:p="",state:b=null,key:P="default"}=l,C=i.useMemo(()=>{let v=Be(h,d);return v==null?null:{location:{pathname:v,search:m,hash:p,state:b,key:P},navigationType:n}},[d,h,m,p,b,P,n]);return C==null?null:i.createElement(Z.Provider,{value:u},i.createElement(ve.Provider,{children:s,value:C}))}new Promise(()=>{});/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},pe.apply(this,arguments)}function Bt(e,r){if(e==null)return{};var s={},l=Object.keys(e),n,o;for(o=0;o<l.length;o++)n=l[o],!(r.indexOf(n)>=0)&&(s[n]=e[n]);return s}function ga(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ya(e,r){return e.button===0&&(!r||r==="_self")&&!ga(e)}const ja=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],_a=["aria-current","caseSensitive","className","end","style","to","children"],ba="startTransition",wt=Er[ba];function Ca(e){let{basename:r,children:s,future:l,window:n}=e,o=i.useRef();o.current==null&&(o.current=Or({window:n,v5Compat:!0}));let c=o.current,[d,u]=i.useState({action:c.action,location:c.location}),{v7_startTransition:h}=l||{},m=i.useCallback(p=>{h&&wt?wt(()=>u(p)):u(p)},[u,h]);return i.useLayoutEffect(()=>c.listen(m),[c,m]),i.createElement(xa,{basename:r,children:s,location:d.location,navigationType:d.action,navigator:c})}const Pa=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sa=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ra=i.forwardRef(function(r,s){let{onClick:l,relative:n,reloadDocument:o,replace:c,state:d,target:u,to:h,preventScrollReset:m}=r,p=Bt(r,ja),{basename:b}=i.useContext(Z),P,C=!1;if(typeof h=="string"&&Sa.test(h)&&(P=h,Pa))try{let j=new URL(window.location.href),O=h.startsWith("//")?new URL(j.protocol+h):new URL(h),T=Be(O.pathname,b);O.origin===j.origin&&T!=null?h=T+O.search+O.hash:C=!0}catch{}let v=ta(h,{relative:n}),g=Ea(h,{replace:c,state:d,target:u,preventScrollReset:m,relative:n});function x(j){l&&l(j),j.defaultPrevented||g(j)}return i.createElement("a",pe({},p,{href:P||v,onClick:C||o?l:x,ref:s,target:u}))}),rn=i.forwardRef(function(r,s){let{"aria-current":l="page",caseSensitive:n=!1,className:o="",end:c=!1,style:d,to:u,children:h}=r,m=Bt(r,_a),p=Ve(u,{relative:m.relative}),b=X(),P=i.useContext(Mt),{navigator:C}=i.useContext(Z),v=C.encodeLocation?C.encodeLocation(p).pathname:p.pathname,g=b.pathname,x=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(g=g.toLowerCase(),x=x?x.toLowerCase():null,v=v.toLowerCase());let j=g===v||!c&&g.startsWith(v)&&g.charAt(v.length)==="/",O=x!=null&&(x===v||!c&&x.startsWith(v)&&x.charAt(v.length)==="/"),T=j?l:void 0,B;typeof o=="function"?B=o({isActive:j,isPending:O}):B=[o,j?"active":null,O?"pending":null].filter(Boolean).join(" ");let K=typeof d=="function"?d({isActive:j,isPending:O}):d;return i.createElement(Ra,pe({},m,{"aria-current":T,className:B,ref:s,style:K,to:u}),typeof h=="function"?h({isActive:j,isPending:O}):h)});var It;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(It||(It={}));var Ot;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ot||(Ot={}));function Ea(e,r){let{target:s,replace:l,state:n,preventScrollReset:o,relative:c}=r===void 0?{}:r,d=le(),u=X(),h=Ve(e,{relative:c});return i.useCallback(m=>{if(ya(m,s)){m.preventDefault();let p=l!==void 0?l:de(u)===de(h);d(e,{replace:p,state:n,preventScrollReset:o,relative:c})}},[u,d,h,l,n,s,e,o,c])}const wa="modulepreload",Ia=function(e){return"/"+e},At={},L=function(r,s,l){if(!s||s.length===0)return r();const n=document.getElementsByTagName("link");return Promise.all(s.map(o=>{if(o=Ia(o),o in At)return;At[o]=!0;const c=o.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(!!l)for(let m=n.length-1;m>=0;m--){const p=n[m];if(p.href===o&&(!c||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":wa,c||(h.as="script",h.crossOrigin=""),h.href=o,document.head.appendChild(h),c)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>r()).catch(o=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o})},k=e=>r=>t.jsx(i.Suspense,{children:t.jsx(e,{...r})});var He={},Ae={};const Oa=wr(lr);var Tt;function W(){return Tt||(Tt=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=Oa}(Ae)),Ae}var Aa=M;Object.defineProperty(He,"__esModule",{value:!0});var Ut=He.default=void 0,Ta=Aa(W()),La=t;Ut=He.default=(0,Ta.default)((0,La.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");var Je={},ka=M;Object.defineProperty(Je,"__esModule",{value:!0});var qt=Je.default=void 0,$a=ka(W()),Ma=t;qt=Je.default=(0,$a.default)((0,Ma.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCart");var Ge={},Wa=M;Object.defineProperty(Ge,"__esModule",{value:!0});var Ft=Ge.default=void 0,Da=Wa(W()),Na=t;Ft=Ge.default=(0,Da.default)((0,Na.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var Ke={},za=M;Object.defineProperty(Ke,"__esModule",{value:!0});var Vt=Ke.default=void 0,Ba=za(W()),Ua=t;Vt=Ke.default=(0,Ba.default)((0,Ua.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove");var Qe={},qa=M;Object.defineProperty(Qe,"__esModule",{value:!0});var Me=Qe.default=void 0,Fa=qa(W()),Va=t;Me=Qe.default=(0,Fa.default)((0,Va.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney");var Ye={},Ha=M;Object.defineProperty(Ye,"__esModule",{value:!0});var We=Ye.default=void 0,Ja=Ha(W()),Ga=t;We=Ye.default=(0,Ja.default)((0,Ga.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"CreditCard");var Ze={},Ka=M;Object.defineProperty(Ze,"__esModule",{value:!0});var De=Ze.default=void 0,Qa=Ka(W()),Ya=t;De=Ze.default=(0,Qa.default)((0,Ya.jsx)("path",{d:"M4 10h3v7H4zm6.5 0h3v7h-3zM2 19h20v3H2zm15-9h3v7h-3zm-5-9L2 6v2h20V6z"}),"AccountBalance");var Xe={},Za=M;Object.defineProperty(Xe,"__esModule",{value:!0});var Ne=Xe.default=void 0,Xa=Za(W()),es=t;Ne=Xe.default=(0,Xa.default)((0,es.jsx)("path",{d:"M16 1H8C6.34 1 5 2.34 5 4v16c0 1.66 1.34 3 3 3h8c1.66 0 3-1.34 3-3V4c0-1.66-1.34-3-3-3m-2 20h-4v-1h4zm3.25-3H6.75V4h10.5z"}),"PhoneAndroid");var et={},ts=M;Object.defineProperty(et,"__esModule",{value:!0});var Ht=et.default=void 0,rs=ts(W()),Te=t;Ht=et.default=(0,rs.default)([(0,Te.jsx)("path",{d:"m12 2-5.5 9h11z"},"0"),(0,Te.jsx)("circle",{cx:"17.5",cy:"17.5",r:"4.5"},"1"),(0,Te.jsx)("path",{d:"M3 13.5h8v8H3z"},"2")],"Category");var tt={},as=M;Object.defineProperty(tt,"__esModule",{value:!0});var Jt=tt.default=void 0,ss=as(W()),ns=t;Jt=tt.default=(0,ss.default)((0,ns.jsx)("path",{d:"m2.53 19.65 1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61m19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6M7.88 8.75c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-2 11c0 1.1.9 2 2 2h1.45l-3.45-8.34z"}),"Style");var rt={},os=M;Object.defineProperty(rt,"__esModule",{value:!0});var Gt=rt.default=void 0,ls=os(W()),is=t;Gt=rt.default=(0,ls.default)((0,is.jsx)("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8M6 18l6-4.5 6 4.5z"}),"Checkroom");var at={},cs=M;Object.defineProperty(at,"__esModule",{value:!0});var Kt=at.default=void 0,us=cs(W()),ds=t;Kt=at.default=(0,us.default)((0,ds.jsx)("path",{d:"M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1M9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m11 15H4v-2h16zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20z"}),"CardGiftcard");const ne={}.VITE_API_BASE_URL||"http://localhost:5000",hs=["All Products","Fashion Accessories","African print-inspired custom clothing","Corporate Gifts"],fs=[{label:"Best Selling",value:"best"},{label:"Alphabetically, A-Z",value:"az"},{label:"Alphabetically, Z-A",value:"za"}],ms=[{label:"Standard Order",value:"standard"},{label:"Project Order",value:"project"}],ps=()=>{const[e,r]=i.useState(!1),[s,l]=i.useState([]),n=le(),[o,c]=i.useState(""),[d,u]=i.useState(""),[h,m]=i.useState(!1),[p,b]=i.useState(!1),[P,C]=i.useState(""),[v,g]=i.useState({category:"",sort:"",search:""}),[x,j]=i.useState({}),[O,T]=i.useState(!1),[B,K]=i.useState(!1),[Q,ie]=i.useState([]),[ge,ce]=i.useState(!0),[nt,Zt]=i.useState(null),[te,ot]=i.useState(""),[A,Xt]=i.useState("standard"),[lt,ye]=i.useState([]),[je,it]=i.useState("");i.useState("");const[_e,ct]=i.useState(""),[be,ut]=i.useState(""),[Ce,dt]=i.useState(""),[D,Y]=i.useState({streetAddress:"",city:"",stateProvince:"",postalCode:"",country:""}),[N,re]=i.useState({streetAddress:"",city:"",stateProvince:"",postalCode:"",country:""}),[q,ht]=i.useState(!0);i.useEffect(()=>{ce(!0),fetch(`${ne}/api/customers`,{credentials:"include"}).then(a=>a.json()).then(a=>{console.log("API data:",a),Array.isArray(a)?l(a):Array.isArray(a.data)?l(a.data):l([])}).catch(()=>l([])).finally(()=>ce(!1)),fetch(`${ne}/api/products`,{credentials:"include"}).then(a=>a.json()).then(a=>{Array.isArray(a)?ie(a):Array.isArray(a.data)?ie(a.data):ie([]),ce(!1)}).catch(()=>{ie([]),ce(!1),Zt("Failed to fetch products")}),fetch(`${ne}/api/projects`,{credentials:"include"}).then(a=>a.json()).then(a=>{console.log("Projects data:",a),Array.isArray(a)?ye(a):ye([])}).catch(a=>{console.error("Failed to fetch projects:",a),ye([])})},[]);const er=Q.filter(a=>{const f=!v.category||v.category==="All Products"||a.category===v.category,S=!v.search||a.product_name.toLowerCase().includes(v.search.toLowerCase());return f&&S}),Pe=(a,f)=>{g(S=>({...S,[a]:f}))},[Se,tr]=i.useState({}),ft=(a,f)=>{tr(S=>{const E=(S[a]||0)+f;return{...S,[a]:E>0?E:0}})},rr=a=>{j(f=>({...f,[a]:Se[a]||1})),K(!0)},ar=()=>{K(!1),T(!0)},sr=()=>{T(!0)},mt=()=>{T(!1)},[y,nr]=i.useState({}),or=()=>{let a={};return A==="standard"?(te||(a.selectedCustomer="Please select a customer."),q||(D.streetAddress||(a.streetAddress="Street address is required."),D.city||(a.city="City is required."),D.stateProvince||(a.stateProvince="State/Province is required."),D.postalCode||(a.postalCode="Postal code is required."),D.country||(a.country="Country is required.")),o||(a.deliveryDate="Please pick a delivery date.")):(je||(a.selectedProject="Please select a project."),_e||(a.projectCustomerFirstName="First name is required."),be||(a.projectCustomerLastName="Last name is required."),N.streetAddress||(a.projectStreetAddress="Street address is required."),N.city||(a.projectCity="City is required."),N.stateProvince||(a.projectStateProvince="State/Province is required."),N.postalCode||(a.projectPostalCode="Postal code is required."),N.country||(a.projectCountry="Country is required."),Ce||(a.orderDate="Please pick an order date.")),v.paymentMethod||(a.paymentMethod="Please select a payment method."),nr(a),Object.keys(a).length===0};return i.useEffect(()=>{if(te&&q&&A==="standard"){const a=s.find(f=>f.customerNumber.toString()===te);a&&Y({streetAddress:a.streetAddress||"",city:a.city||"",stateProvince:a.stateProvince||"",postalCode:a.postalCode||"",country:a.country||""})}},[te,q,s,A]),t.jsxs(w,{sx:{display:"flex",height:"100vh",bgcolor:"#fafafa"},children:[t.jsx(Le,{elevation:2,sx:{width:240,p:2,borderRadius:0,bgcolor:"#fff",minHeight:"100vh"},children:t.jsxs(ir,{subheader:t.jsx(pt,{children:"Filters"}),children:[t.jsx(vt,{children:t.jsx(R,{select:!0,label:"Sort By",value:v.sort,onChange:a=>Pe("sort",a.target.value),fullWidth:!0,size:"small",children:fs.map(a=>t.jsx($,{value:a.value,children:a.label},a.value))})}),t.jsx(Ee,{sx:{my:1}}),t.jsx(pt,{sx:{pl:0},children:"Categories"}),hs.map(a=>t.jsxs(vt,{button:!0,selected:v.category===a,onClick:()=>Pe("category",a),children:[t.jsxs(cr,{children:[a==="All Products"&&t.jsx(Ht,{sx:{color:"#1976d2"}}),a==="Fashion Accessories"&&t.jsx(Jt,{sx:{color:"#d81b60"}}),a==="African print-inspired custom clothing"&&t.jsx(Gt,{sx:{color:"#43a047"}}),a==="Corporate Gifts"&&t.jsx(Kt,{sx:{color:"#fbc02d"}})]}),t.jsx(ur,{primary:a})]},a))]})}),t.jsxs(w,{sx:{flex:1,p:4},children:[t.jsxs(w,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(F,{startIcon:t.jsx(Ut,{}),onClick:()=>n("/Orders"),sx:{textTransform:"none",fontWeight:700,fontSize:16,color:"primary.main",pl:0,mr:2},children:"Back"}),t.jsx(_,{variant:"h5",sx:{fontWeight:700,flex:1,textAlign:"center"},children:"Order Page"}),t.jsx(we,{color:"primary",sx:{ml:2,bgcolor:"#e3f2fd",borderRadius:2,p:1,boxShadow:1},onClick:sr,children:t.jsx(qt,{sx:{fontSize:32}})})]}),t.jsx(w,{sx:{display:"flex",alignItems:"center",mb:2},children:t.jsx(R,{label:"Search products...",value:v.search,onChange:a=>Pe("search",a.target.value),size:"small",sx:{width:350}})}),ge?t.jsx(_,{children:"Loading products..."}):nt?t.jsx(_,{color:"error",children:nt}):t.jsx(dr,{component:Le,elevation:1,sx:{borderRadius:2},children:t.jsxs(hr,{children:[t.jsx(fr,{children:t.jsxs(xt,{children:[t.jsx(H,{children:"Product"}),t.jsx(H,{children:"Qty"}),t.jsx(H,{children:"Subtotal"}),t.jsx(H,{children:"Cart"})]})}),t.jsx(mr,{children:er.map(a=>t.jsxs(xt,{children:[t.jsx(H,{children:t.jsxs(w,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(w,{component:"img",src:(()=>a.image_path&&a.image_path.startsWith("/images/products/")?`http://localhost:5000${a.image_path}`:"http://localhost:5000/images/products/placeholder.png")(),alt:a.product_name,sx:{width:48,height:48,objectFit:"cover",borderRadius:2,boxShadow:1,mr:2,bgcolor:"#f5f5f5",border:"1px solid #eee",display:"inline-block"},onError:f=>{f.target.onerror=null,f.target.src="http://localhost:5000/images/products/placeholder.png"}}),t.jsx(_,{sx:{fontWeight:500},children:a.product_name})]})}),t.jsx(H,{children:t.jsxs(w,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(we,{size:"small",onClick:()=>ft(a.product_id,-1),children:t.jsx(Vt,{})}),t.jsx(_,{sx:{mx:1},children:Se[a.product_id]||0}),t.jsx(we,{size:"small",onClick:()=>ft(a.product_id,1),children:t.jsx(Ft,{})})]})}),t.jsxs(H,{children:["R",((Se[a.product_id]||0)*a.selling_price).toFixed(2)]}),t.jsx(H,{children:t.jsx(F,{variant:"contained",color:"primary",onClick:()=>rr(a.product_id),children:"Add to cart"})})]},a.product_id))})]})}),t.jsx(gt,{open:B,autoHideDuration:2e3,onClose:()=>K(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:t.jsx(ue,{severity:"success",sx:{width:"100%"},action:t.jsx(F,{color:"inherit",size:"small",onClick:ar,children:"Go to Cart"}),children:"Product added to cart"})}),t.jsxs(yt,{open:O,onClose:mt,fullScreen:!0,TransitionComponent:jt,TransitionProps:{direction:"up"},children:[t.jsxs(_t,{sx:{display:"flex",alignItems:"center",minHeight:56},children:[t.jsx(F,{startIcon:t.jsx("span",{style:{fontSize:20,fontWeight:700},children:"<"}),onClick:mt,sx:{textTransform:"none",fontWeight:700,fontSize:16,color:"primary.main",pl:0},children:"Back"}),t.jsx(_,{variant:"h6",sx:{flex:1,textAlign:"center",fontWeight:700},children:"Cart"})]}),t.jsx(bt,{dividers:!0,sx:{bgcolor:"#fafafa"},children:t.jsxs(w,{sx:{maxWidth:600,mx:"auto",mt:2},children:[t.jsx(_,{variant:"h6",sx:{mb:2,fontWeight:700},children:"Your Cart"}),Object.keys(x).length===0||Object.values(x).every(a=>a===0)?t.jsx(_,{children:"No items in cart."}):t.jsxs(Ie,{spacing:3,children:[Q.filter(a=>x[a.product_id]>0).map(a=>{const f=a.quantity,S=x[a.product_id];return t.jsxs(w,{sx:{display:"flex",alignItems:"center",bgcolor:"#fff",borderRadius:3,boxShadow:1,p:2},children:[t.jsx(w,{component:"img",src:a.image_path&&a.image_path.startsWith("/images/products/")?`http://localhost:5000${a.image_path}`:"http://localhost:5000/images/products/placeholder.png",alt:a.product_name,sx:{width:80,height:80,objectFit:"cover",borderRadius:2,mr:3,border:"1px solid #eee",bgcolor:"#f5f5f5"},onError:E=>{E.target.onerror=null,E.target.src="http://localhost:5000/images/products/placeholder.png"}}),t.jsxs(w,{sx:{flex:1},children:[t.jsx(_,{variant:"subtitle1",sx:{fontWeight:600},children:a.product_name}),t.jsx(_,{variant:"body2",sx:{color:"text.secondary",mb:1},children:a.category}),t.jsx(pr,{size:"small",sx:{minWidth:80},children:t.jsx(vr,{value:S,onChange:E=>{const z=E.target.value;z<=f&&j(Re=>({...Re,[a.product_id]:z}))},children:Array.from({length:f},(E,z)=>z+1).map(E=>t.jsx($,{value:E,children:E},E))})}),t.jsx(_,{variant:"body2",sx:{mt:1,color:f>0?"green":"red"},children:f>0?`${f} in stock`:"Out of Stock"})]}),t.jsxs(_,{variant:"h6",sx:{fontWeight:700,minWidth:80,textAlign:"right",mr:2},children:["R",(S*a.selling_price).toFixed(2)]}),t.jsx(F,{color:"error",variant:"outlined",size:"small",onClick:()=>j(E=>{const z={...E};return delete z[a.product_id],z}),children:"Remove"})]},a.product_id)}),t.jsxs(w,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:[t.jsxs(_,{variant:"h6",sx:{fontWeight:700},children:["Total: (",Object.values(x).reduce((a,f)=>a+f,0)," Items)"]}),t.jsxs(_,{variant:"h5",sx:{fontWeight:700,color:"primary.main"},children:["R",Q.reduce((a,f)=>a+(x[f.product_id]||0)*f.selling_price,0).toFixed(2)]})]}),(()=>{const a=Q.some(f=>x[f.product_id]>0&&x[f.product_id]>f.quantity);return t.jsxs(t.Fragment,{children:[t.jsx(F,{variant:"contained",color:"primary",size:"large",sx:{mt:2,borderRadius:2,fontWeight:700},onClick:()=>r(!0),disabled:a,children:"Proceed to Checkout"}),a&&t.jsx(_,{color:"error",sx:{mt:1,fontWeight:600},children:"Please adjust your cart â€” some items are out of stock."})]})})(),t.jsxs(yt,{open:e,onClose:()=>r(!1),fullScreen:!0,TransitionComponent:jt,TransitionProps:{direction:"up"},children:[t.jsxs(_t,{sx:{display:"flex",alignItems:"center",minHeight:56},children:[t.jsx(F,{startIcon:t.jsx("span",{style:{fontSize:20,fontWeight:700},children:"<"}),onClick:()=>r(!1),sx:{textTransform:"none",fontWeight:700,fontSize:16,color:"primary.main",pl:0},children:"Back"}),t.jsx(_,{variant:"h6",sx:{flex:1,textAlign:"center",fontWeight:700},children:"Order Details"})]}),t.jsx(bt,{dividers:!0,sx:{bgcolor:"#fafafa"},children:t.jsxs(w,{sx:{maxWidth:600,mx:"auto",mt:2},children:[t.jsx(_,{variant:"h6",sx:{mb:2,fontWeight:700},children:"Order Details"}),t.jsxs(Ie,{spacing:3,children:[t.jsx(R,{select:!0,label:"Order Type",value:A,onChange:a=>Xt(a.target.value),fullWidth:!0,sx:{mb:2},children:ms.map(a=>t.jsx($,{value:a.value,children:a.label},a.value))}),A==="project"&&t.jsx(R,{select:!0,label:"Select Project",value:je,onChange:a=>it(a.target.value),fullWidth:!0,required:!0,error:!!y.selectedProject,helperText:y.selectedProject,sx:{mb:2},children:lt.length>0?lt.map(a=>t.jsxs($,{value:a.id,children:[a.title," - ",a.category]},a.id)):t.jsx($,{disabled:!0,children:"No projects found"})}),A==="standard"?t.jsxs(t.Fragment,{children:[t.jsx(xr,{value:s.find(a=>a.customerNumber.toString()===te)||null,onChange:(a,f)=>{ot(f?f.customerNumber.toString():"")},options:s,getOptionLabel:a=>`${a.firstName} ${a.lastName}, ${a.email}`,isOptionEqualToValue:(a,f)=>a.customerNumber===f.customerNumber,loading:ge,loadingText:"Loading customers...",noOptionsText:"No customers found",renderInput:a=>t.jsx(R,{...a,label:"Select Customer",placeholder:"Search customers by name or email...",required:!0,InputProps:{...a.InputProps,endAdornment:t.jsxs(t.Fragment,{children:[ge?t.jsx(CircularProgress,{color:"inherit",size:20}):null,a.InputProps.endAdornment]})}}),renderOption:(a,f)=>i.createElement("li",{...a,key:f.customerNumber},t.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[t.jsxs("span",{style:{fontWeight:600},children:[f.firstName," ",f.lastName]}),t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:f.email})]})),filterOptions:(a,{inputValue:f})=>{const S=f.toLowerCase();return a.filter(E=>{const z=`${E.firstName} ${E.lastName}`.toLowerCase(),Re=E.email.toLowerCase();return z.includes(S)||Re.includes(S)})}}),t.jsxs(R,{select:!0,label:"Payment Method",value:v.paymentMethod||"",onChange:a=>g(f=>({...f,paymentMethod:a.target.value})),fullWidth:!0,required:!0,error:!!y.paymentMethod,helperText:y.paymentMethod,children:[t.jsxs($,{value:"Cash",children:[t.jsx(Me,{sx:{mr:1}})," Cash On Delivery"]}),t.jsxs($,{value:"Card",children:[t.jsx(We,{sx:{mr:1}})," Credit and Debit Card"]}),t.jsxs($,{value:"EFT",children:[t.jsx(De,{sx:{mr:1}})," EFT"]}),t.jsxs($,{value:"Mobile Money",children:[t.jsx(Ne,{sx:{mr:1}})," Mobile Money"]})]}),t.jsx(gr,{control:t.jsx(yr,{checked:q,onChange:a=>ht(a.target.checked)}),label:"Use customer's saved address",sx:{mb:2}}),t.jsx(R,{label:"Street Address",value:D.streetAddress,onChange:a=>Y(f=>({...f,streetAddress:a.target.value})),fullWidth:!0,required:!0,disabled:q,error:!!y.streetAddress,helperText:y.streetAddress}),t.jsx(R,{label:"City",value:D.city,onChange:a=>Y(f=>({...f,city:a.target.value})),fullWidth:!0,required:!0,disabled:q,error:!!y.city,helperText:y.city}),t.jsx(R,{label:"State / Province",value:D.stateProvince,onChange:a=>Y(f=>({...f,stateProvince:a.target.value})),fullWidth:!0,required:!0,disabled:q,error:!!y.stateProvince,helperText:y.stateProvince}),t.jsx(R,{label:"Postal Code",value:D.postalCode,onChange:a=>Y(f=>({...f,postalCode:a.target.value})),fullWidth:!0,required:!0,disabled:q,error:!!y.postalCode,helperText:y.postalCode}),t.jsx(R,{label:"Country",value:D.country,onChange:a=>Y(f=>({...f,country:a.target.value})),fullWidth:!0,required:!0,disabled:q,error:!!y.country,helperText:y.country}),t.jsx(R,{label:"Delivery Date",type:"date",value:o,onChange:a=>c(a.target.value),InputLabelProps:{shrink:!0},fullWidth:!0,required:!0,error:!!y.deliveryDate,helperText:y.deliveryDate})]}):t.jsxs(t.Fragment,{children:[t.jsx(R,{label:"First Name",value:_e,onChange:a=>ct(a.target.value),fullWidth:!0,required:!0,error:!!y.projectCustomerFirstName,helperText:y.projectCustomerFirstName,sx:{mb:2}}),t.jsx(R,{label:"Last Name",value:be,onChange:a=>ut(a.target.value),fullWidth:!0,required:!0,error:!!y.projectCustomerLastName,helperText:y.projectCustomerLastName,sx:{mb:2}}),t.jsxs(R,{select:!0,label:"Payment Method",value:v.paymentMethod||"",onChange:a=>g(f=>({...f,paymentMethod:a.target.value})),fullWidth:!0,required:!0,error:!!y.paymentMethod,helperText:y.paymentMethod,children:[t.jsxs($,{value:"Cash",children:[t.jsx(Me,{sx:{mr:1}})," Cash On Delivery"]}),t.jsxs($,{value:"Card",children:[t.jsx(We,{sx:{mr:1}})," Credit and Debit Card"]}),t.jsxs($,{value:"EFT",children:[t.jsx(De,{sx:{mr:1}})," EFT"]}),t.jsxs($,{value:"Mobile Money",children:[t.jsx(Ne,{sx:{mr:1}})," Mobile Money"]})]}),t.jsx(R,{label:"Street Address",value:N.streetAddress,onChange:a=>re(f=>({...f,streetAddress:a.target.value})),fullWidth:!0,required:!0,error:!!y.projectStreetAddress,helperText:y.projectStreetAddress}),t.jsx(R,{label:"City",value:N.city,onChange:a=>re(f=>({...f,city:a.target.value})),fullWidth:!0,required:!0,error:!!y.projectCity,helperText:y.projectCity}),t.jsx(R,{label:"State / Province",value:N.stateProvince,onChange:a=>re(f=>({...f,stateProvince:a.target.value})),fullWidth:!0,required:!0,error:!!y.projectStateProvince,helperText:y.projectStateProvince}),t.jsx(R,{label:"Postal Code",value:N.postalCode,onChange:a=>re(f=>({...f,postalCode:a.target.value})),fullWidth:!0,required:!0,error:!!y.projectPostalCode,helperText:y.projectPostalCode}),t.jsx(R,{label:"Country",value:N.country,onChange:a=>re(f=>({...f,country:a.target.value})),fullWidth:!0,required:!0,error:!!y.projectCountry,helperText:y.projectCountry}),t.jsx(R,{label:"Order Date",type:"date",value:Ce,onChange:a=>dt(a.target.value),InputLabelProps:{shrink:!0},fullWidth:!0,required:!0,error:!!y.orderDate,helperText:y.orderDate})]}),t.jsx(R,{label:"Comment (optional)",value:d,onChange:a=>u(a.target.value),fullWidth:!0,multiline:!0,minRows:2}),t.jsx(Ee,{}),t.jsx(_,{variant:"h6",sx:{fontWeight:700},children:"Order Summary"}),t.jsx(Ie,{spacing:2,children:Q.filter(a=>x[a.product_id]>0).map(a=>t.jsxs(w,{sx:{display:"flex",alignItems:"center",bgcolor:"#fff",borderRadius:3,boxShadow:1,p:2},children:[t.jsx(w,{component:"img",src:(()=>a.image_path&&a.image_path.startsWith("/images/products/")?`http://localhost:5000${a.image_path}`:"http://localhost:5000/images/products/placeholder.png")(),alt:a.product_name,sx:{width:64,height:64,objectFit:"cover",borderRadius:2,mr:3,border:"1px solid #eee",bgcolor:"#f5f5f5"},onError:f=>{f.target.onerror=null,f.target.src="http://localhost:5000/images/products/placeholder.png"}}),t.jsxs(w,{sx:{flex:1},children:[t.jsx(_,{variant:"subtitle1",sx:{fontWeight:600},children:a.product_name}),t.jsx(_,{variant:"body2",sx:{color:"text.secondary",mb:1},children:a.category}),t.jsxs(_,{variant:"body2",sx:{color:"text.secondary"},children:["Qty: ",x[a.product_id]]})]}),t.jsxs(_,{variant:"h6",sx:{fontWeight:700,minWidth:80,textAlign:"right"},children:["R",(x[a.product_id]*a.selling_price).toFixed(2)]})]},a.product_id))}),t.jsx(Ee,{}),t.jsxs(w,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:[t.jsxs(_,{variant:"h6",sx:{fontWeight:700},children:["Total: (",Object.values(x).reduce((a,f)=>a+f,0)," Items)"]}),t.jsxs(_,{variant:"h5",sx:{fontWeight:700,color:"primary.main"},children:["R",Q.reduce((a,f)=>a+(x[f.product_id]||0)*f.selling_price,0).toFixed(2)]})]}),t.jsx(F,{variant:"contained",color:"primary",size:"large",sx:{mt:2,borderRadius:2,fontWeight:700},disabled:h,onClick:async()=>{if(!or())return;m(!0),C(""),b(!1);const a=Q.filter(S=>x[S.product_id]>0).map(S=>({product_id:S.product_id,quantity:x[S.product_id],unit_price:S.selling_price})),f={cust_id:A==="standard"?te:null,payment_method:v.paymentMethod,delivery_address:A==="standard"?D:null,delivery_date:A==="standard"?o:"",comment:d,items:a,order_type:A,project_address:A==="project"?N:null,cust_fname:A==="project"?_e:null,cust_lname:A==="project"?be:null,order_date:A==="project"?Ce:null,project_id:A==="project"?je:null};try{const S=await fetch(`${ne}/api/orders`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(f)}),E=await S.json();S.ok&&E.success?(b(!0),K(!0),ot(""),it(""),ct(""),ut(""),g(z=>({...z,paymentMethod:""})),ht(!0),Y({streetAddress:"",city:"",stateProvince:"",postalCode:"",country:""}),re({streetAddress:"",city:"",stateProvince:"",postalCode:"",country:""}),c(""),dt(""),u(""),j({}),r(!1),T(!1),setTimeout(()=>{n("/Orders",{replace:!0})},2e3)):C(E.message||"Failed to submit order")}catch{C("Network error")}m(!1)},children:"Submit Order"}),p&&t.jsx(ue,{severity:"success",sx:{mt:2},children:"Order created successfully!"}),P&&t.jsx(ue,{severity:"error",sx:{mt:2},children:P})]})]})})]})]})]})})]}),t.jsx(gt,{open:B&&p,autoHideDuration:3e3,onClose:()=>K(!1),anchorOrigin:{vertical:"top",horizontal:"center"},children:t.jsx(ue,{severity:"success",sx:{width:"100%"},children:"Order created successfully! Redirecting to orders list..."})})]})]})},Qt={super_admin:{dashboard:!0,timesheets:!0,projects:!0,customers:!0,orders:!0,products:!0,materials:!0,employees:!0,approval:!0,reports:!0,advertisement:!0,everything:!0,timesheets_create:!0,timesheets_view_own:!0,timesheets_view_all:!0,timesheets_approve:!0,timesheets_reject:!0,timesheets_edit_all:!0},administrator:{dashboard:!0,timesheets:!0,projects:!0,customers:!0,orders:!0,products:!0,materials:!0,employees:!1,approval:!1,reports:!0,advertisement:!0,everything:!1,timesheets_create:!0,timesheets_view_own:!0,timesheets_view_all:!0,timesheets_approve:!1,timesheets_reject:!1,timesheets_edit_all:!1},admin:{dashboard:!1,timesheets:!0,projects:!0,customers:!0,orders:!1,products:!1,materials:!1,employees:!1,approval:!1,reports:!0,advertisement:!1,everything:!1,timesheets_create:!0,timesheets_view_own:!0,timesheets_view_all:!0,timesheets_approve:!1,timesheets_reject:!1,timesheets_edit_all:!1},accountant:{dashboard:!0,timesheets:!0,projects:!1,customers:!0,orders:!0,products:!1,materials:!1,employees:!1,approval:!1,reports:!0,advertisement:!1,everything:!1,timesheets_create:!0,timesheets_view_own:!0,timesheets_view_all:!1,timesheets_approve:!1,timesheets_reject:!1,timesheets_edit_all:!1},trainer:{dashboard:!1,timesheets:!0,projects:!0,customers:!1,orders:!1,products:!1,materials:!1,employees:!1,approval:!1,reports:!1,advertisement:!1,everything:!1,timesheets_create:!0,timesheets_view_own:!0,timesheets_view_all:!1,timesheets_approve:!1,timesheets_reject:!1,timesheets_edit_all:!1},support:{dashboard:!1,timesheets:!0,projects:!0,customers:!1,orders:!1,products:!1,materials:!1,employees:!1,approval:!1,reports:!1,advertisement:!1,everything:!1,timesheets_create:!0,timesheets_view_own:!0,timesheets_view_all:!1,timesheets_approve:!1,timesheets_reject:!1,timesheets_edit_all:!1}},st=()=>{try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return console.error("Error getting current user:",e),null}},xe=()=>{const e=st();if(!e||!e.role)return null;const r=e.role.toLowerCase();return r==="administrator"?"administrator":r==="admin"?"admin":r==="accountant"?"accountant":r==="trainer"?"trainer":r==="support"?"support":e.loginType==="super_admin"?"super_admin":r},ee=e=>{const r=xe();if(!r)return!1;const s=Qt[r];return s?s[e]===!0:!1},vs=e=>ee(e),an=()=>ee("timesheets_create"),xs=()=>ee("timesheets_view_own"),gs=()=>ee("timesheets_view_all"),sn=()=>ee("timesheets_approve"),nn=()=>ee("timesheets_reject"),ys=()=>ee("timesheets_edit_all"),on=(e,r)=>!!(gs()||xs()&&e.employeeId===r),ln=(e,r)=>!!(ys()||e.employeeId===r&&e.status!=="approved"&&e.status!=="submitted"),js=()=>{const e=xe();return e?Qt[e]||{}:{}},cn=()=>xe()==="super_admin",un=()=>{const e=st();return e?{name:`${e.firstName} ${e.lastName}`,email:e.email,role:e.role,permissions:js()}:null},Yt=()=>{switch(xe()){case"super_admin":case"administrator":case"accountant":return"/dashboard";case"admin":case"trainer":case"support":return"/timesheet";default:return"/timesheet"}},U=(e,r)=>function(l){const n=st();return n?vs(r)?t.jsx(e,{...l}):t.jsx(w,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",p:4},children:t.jsxs(Le,{sx:{p:6,textAlign:"center",maxWidth:500,borderRadius:3,background:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},children:[t.jsx(jr,{sx:{fontSize:80,color:"#e53e3e",mb:3}}),t.jsx(_,{variant:"h4",sx:{fontWeight:"bold",color:"#2d3748",mb:2},children:"Access Denied"}),t.jsx(_,{variant:"body1",sx:{color:"#64748b",mb:2},children:"You don't have permission to access this page."}),t.jsxs(_,{variant:"body2",sx:{color:"#64748b",mb:4},children:["Required permission: ",t.jsx("strong",{children:r}),t.jsx("br",{}),"Your role: ",t.jsx("strong",{children:n.role})]}),t.jsx(F,{variant:"contained",startIcon:t.jsx(_r,{}),onClick:()=>window.location.href=Yt(),sx:{py:1.5,px:4,fontWeight:"bold",background:"linear-gradient(45deg, #667eea, #764ba2)","&:hover":{background:"linear-gradient(45deg, #5a67d8, #667eea)"}},children:"Go to Accessible Page"})]})}):t.jsx(me,{to:"/auth/login",replace:!0})},_s=()=>{const e=Yt();return i.useEffect(()=>{console.log("ðŸ”„ Redirecting user to default route:",e)},[e]),t.jsx(me,{to:e,replace:!0})},bs=k(i.lazy(()=>L(()=>import("./FullLayout-12821738.js"),["assets/FullLayout-12821738.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/utils-f1b31201.js","assets/Logo-06780286.js"]))),Cs=k(i.lazy(()=>L(()=>import("./BlankLayout-b0ad1a9d.js"),["assets/BlankLayout-b0ad1a9d.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/utils-f1b31201.js"]))),Ps=k(i.lazy(()=>L(()=>import("./Dashboard-89f405d9.js"),["assets/Dashboard-89f405d9.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/PageContainer-a391e3ef.js","assets/index-2a8f5de9.js"]))),Ss=k(i.lazy(()=>L(()=>import("./material-02d315b2.js"),["assets/material-02d315b2.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/MoreVert-c92e98dc.js","assets/Search-e983f050.js","assets/Archive-53f9a75f.js","assets/Close-cde7281f.js","assets/Inventory-c15aaf46.js","assets/utils-f1b31201.js"]))),Rs=k(i.lazy(()=>L(()=>import("./ProductPage-88daffc9.js"),["assets/ProductPage-88daffc9.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/Close-cde7281f.js","assets/Inventory-c15aaf46.js","assets/MoreVert-c92e98dc.js","assets/Archive-53f9a75f.js","assets/Search-e983f050.js","assets/utils-f1b31201.js"]))),Es=k(i.lazy(()=>L(()=>import("./CustomersPage-8cac1d1b.js"),["assets/CustomersPage-8cac1d1b.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/PageContainer-a391e3ef.js","assets/index-2a8f5de9.js","assets/LocationOn-32966cbb.js","assets/Archive-53f9a75f.js","assets/MoreVert-c92e98dc.js","assets/Search-e983f050.js","assets/Close-cde7281f.js","assets/utils-f1b31201.js","assets/PermissionGate-ac1d4597.js"]))),ws=k(i.lazy(()=>L(()=>import("./orders-8083a736.js"),["assets/orders-8083a736.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/MoreVert-c92e98dc.js","assets/Search-e983f050.js","assets/utils-f1b31201.js","assets/Close-cde7281f.js","assets/LocationOn-32966cbb.js","assets/index-2a8f5de9.js"]))),Is=k(i.lazy(()=>L(()=>import("./EmployeesPage-a3a28bc3.js"),["assets/EmployeesPage-a3a28bc3.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/MoreVert-c92e98dc.js","assets/Archive-53f9a75f.js","assets/utils-f1b31201.js","assets/PermissionGate-ac1d4597.js"]))),Os=k(i.lazy(()=>L(()=>import("./projects-ab893ddc.js"),["assets/projects-ab893ddc.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/utils-f1b31201.js","assets/Close-cde7281f.js","assets/Delete-35b59c04.js"]))),As=k(i.lazy(()=>L(()=>import("./Error-cc188f94.js"),["assets/Error-cc188f94.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/utils-f1b31201.js"]))),Ts=k(i.lazy(()=>L(()=>import("./Register-1719bafd.js"),["assets/Register-1719bafd.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/PageContainer-a391e3ef.js","assets/index-2a8f5de9.js","assets/Logo-06780286.js","assets/utils-f1b31201.js"]))),Ls=k(i.lazy(()=>L(()=>import("./Login-e9ac39e8.js"),["assets/Login-e9ac39e8.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/PageContainer-a391e3ef.js","assets/index-2a8f5de9.js","assets/Logo-06780286.js","assets/utils-f1b31201.js"]))),ks=k(i.lazy(()=>L(()=>import("./Advertisement-995b149d.js"),["assets/Advertisement-995b149d.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/MoreVert-c92e98dc.js","assets/Delete-35b59c04.js","assets/utils-f1b31201.js"]))),$s=k(i.lazy(()=>L(()=>import("./TimeSheetPage-f44ca93f.js"),["assets/TimeSheetPage-f44ca93f.js","assets/mui-051d3b2b.js","assets/vendor-0625b040.js","assets/PageContainer-a391e3ef.js","assets/index-2a8f5de9.js","assets/utils-f1b31201.js"]))),Ms=U(Ps,"dashboard"),Ws=U(Ss,"materials"),Ds=U(Rs,"products"),Ns=U(Es,"customers"),zs=U(ws,"orders"),Bs=U(Is,"employees"),Us=U(Os,"projects"),qs=U(ks,"advertisement"),Fs=U($s,"timesheets"),Vs=U(ps,"orders"),Hs=[{path:"/",element:t.jsx(bs,{}),children:[{index:!0,element:t.jsx(_s,{})},{path:"dashboard",exact:!0,element:t.jsx(Ms,{})},{path:"Material",exact:!0,element:t.jsx(Ws,{})},{path:"Products",exact:!0,element:t.jsx(Ds,{})},{path:"Customers",exact:!0,element:t.jsx(Ns,{})},{path:"Orders",exact:!0,element:t.jsx(zs,{})},{path:"Orders/AddOrderForm",exact:!0,element:t.jsx(Vs,{})},{path:"Employees",exact:!0,element:t.jsx(Bs,{})},{path:"Projects",exact:!0,element:t.jsx(Us,{})},{path:"Advertisement",exact:!0,element:t.jsx(qs,{})},{path:"Timesheet",exact:!0,element:t.jsx(Fs,{})},{path:"*",element:t.jsx(me,{to:"/auth/404"})}]},{path:"/auth",element:t.jsx(Cs,{}),children:[{path:"404",element:t.jsx(As,{})},{path:"register",element:t.jsx(Ts,{})},{path:"login",element:t.jsx(Ls,{})},{path:"*",element:t.jsx(me,{to:"/auth/404"})}]}],Js=({show:e})=>t.jsx(br,{in:e,timeout:800,children:t.jsx(w,{sx:{position:"fixed",zIndex:3e3,top:0,left:0,width:"100vw",height:"100vh",bgcolor:"white",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 0.8s"},children:t.jsxs(_,{variant:"h2",sx:{fontWeight:900,letterSpacing:4,display:"flex",alignItems:"center"},children:[t.jsx(w,{component:"span",sx:{color:"#1976d2",textShadow:"0 4px 24px #90caf9, 0 1px 0 #fff",animation:"basadiPulse 1.2s infinite alternate","@keyframes basadiPulse":{from:{color:"#1976d2",textShadow:"0 4px 24px #90caf9, 0 1px 0 #fff"},to:{color:"#1565c0",textShadow:"0 4px 24px #1976d2, 0 1px 0 #1976d2"}}},children:"Basadi"}),t.jsx(w,{component:"span",sx:{color:"#fff",ml:1,textShadow:"0 4px 24px #1976d2, 0 1px 0 #1976d2",bgcolor:"#1976d2",borderRadius:2,px:2,py:.5,fontWeight:900,animation:"corePulse 1.2s infinite alternate","@keyframes corePulse":{from:{bgcolor:"#1976d2"},to:{bgcolor:"#1565c0"}}},children:"Core"})]})})}),Gs=20*60*1e3,Ks=2*60*1e3,Qs=({setIsAuthenticated:e})=>{const r=le(),s=i.useRef(null),l=i.useRef(null),n=i.useRef(Date.now()),o=i.useCallback(()=>{console.log("ðŸšª Auto-logout triggered after 20 minutes of inactivity"),s.current&&clearTimeout(s.current),l.current&&clearInterval(l.current),localStorage.removeItem("user"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("sessionId"),e(!1),r("/auth/login",{state:{message:"Session expired due to 20 minutes of inactivity"}})},[r,e]),c=i.useCallback(()=>{const u=Date.now();n.current=u,s.current&&clearTimeout(s.current),s.current=setTimeout(o,Gs)},[o]),d=i.useCallback(async()=>{try{const u=await fetch(`${ne}/api/check-session`,{method:"GET",credentials:"include"});if(!u.ok){console.log("ðŸ”’ Backend session check failed:",u.status),o();return}(await u.json()).active||(console.log("ðŸ”’ Backend session inactive"),o())}catch(u){console.error("âŒ Error checking backend session:",u)}},[o]);return i.useEffect(()=>{console.log("ðŸ”„ SessionWatcher initialized with 20-minute timeout");const u=["mousedown","mousemove","keypress","scroll","touchstart","click","focus"];let h=null;const m=()=>{h||(h=setTimeout(()=>{c(),h=null},1e3))};return u.forEach(p=>{document.addEventListener(p,m,{passive:!0,capture:!0})}),c(),l.current=setInterval(d,Ks),()=>{console.log("ðŸ§¹ SessionWatcher cleanup"),s.current&&clearTimeout(s.current),l.current&&clearInterval(l.current),h&&clearTimeout(h),u.forEach(p=>{document.removeEventListener(p,m)})}},[c,d]),null};function Ys(){const[e,r]=i.useState("light"),[s,l]=i.useState(!0);i.useState(!1);const[n,o]=i.useState(!1),c=le(),d=X(),u=d.pathname==="/login"||d.pathname==="/auth/login"||d.pathname==="/auth/register",h=i.useMemo(()=>Cr({palette:{mode:e,...e==="dark"&&{background:{default:"#181C32",paper:"#23263A"}}},typography:{fontSize:14}}),[e]);i.useEffect(()=>{(async()=>{try{const b=await fetch("/api/check-session",{credentials:"include"});if(b.ok){const P=await b.json();o(P.active)}else o(!1)}catch(b){console.error("Auth check failed:",b),o(!1)}finally{setAuthChecked(!0)}})()},[]),i.useEffect(()=>{const p=setTimeout(()=>l(!1),1200);return()=>clearTimeout(p)},[]),i.useEffect(()=>{if(!s){const p=d.pathname==="/login"||d.pathname==="/auth/login"||d.pathname==="/auth/register";!n&&!p&&c("/auth/login")}},[s,c,d,n]);const m=na(Hs);return t.jsxs(Pr,{theme:h,children:[t.jsx(Js,{show:s}),t.jsx(Sr,{}),n&&!s&&!u&&t.jsx(Qs,{setIsAuthenticated:o}),!s&&Ir.cloneElement(m,{setIsAuthenticated:o,mode:e,setMode:r})]})}ke.createRoot(document.getElementById("root")).render(t.jsx(i.Suspense,{fallback:t.jsx("div",{children:"Loading..."}),children:t.jsx(Ca,{children:t.jsx(Ys,{})})}));export{ne as A,Ra as L,rn as N,tn as O,un as a,qt as b,ps as c,Ft as d,le as e,ln as f,st as g,ee as h,on as i,ys as j,nn as k,sn as l,gs as m,xs as n,an as o,cn as p,W as r,X as u,U as w};
