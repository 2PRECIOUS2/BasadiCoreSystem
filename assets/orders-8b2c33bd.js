import{ap as $,aq as P,k as e,r as c,af as F,C as ke,D as Ie,I as Q,an as ie,T as o,z as M,B as d,a2 as G,a9 as N,at as K,au as _e,a8 as h,a1 as j,a6 as ce,av as U,a4 as H,aw as ue,ax as Re,ay as We,ag as xe,ah as he,az as ze,aA as ne,aB as oe,as as de,w as z,a7 as Me,aC as $e,ai as Pe,aj as Le,ak as B,al as m,am as Te,A as Ne,aa as Fe,ab as Ue,v as He,ac as Ve,S as qe,aD as Ee}from"./index-ed8ecba8.js";var X={},Be=P;Object.defineProperty(X,"__esModule",{value:!0});var pe=X.default=void 0,Ye=Be($()),le=e;pe=X.default=(0,Ye.default)([(0,le.jsx)("path",{d:"M19.5 3.5 18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2v14H3v3c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V2zM19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11z"},"0"),(0,le.jsx)("path",{d:"M9 7h6v2H9zm7 0h2v2h-2zm-7 3h6v2H9zm7 0h2v2h-2z"},"1")],"ReceiptLong");var Z={},Ge=P;Object.defineProperty(Z,"__esModule",{value:!0});var me=Z.default=void 0,Ke=Ge($()),Je=e;me=Z.default=(0,Ke.default)((0,Je.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel");var ee={},Qe=P;Object.defineProperty(ee,"__esModule",{value:!0});var ge=ee.default=void 0,Xe=Qe($()),Ze=e;ge=ee.default=(0,Xe.default)((0,Ze.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var re={},er=P;Object.defineProperty(re,"__esModule",{value:!0});var J=re.default=void 0,rr=er($()),tr=e;J=re.default=(0,rr.default)((0,tr.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday");var te={},sr=P;Object.defineProperty(te,"__esModule",{value:!0});var ve=te.default=void 0,ar=sr($()),nr=e;ve=te.default=(0,ar.default)((0,nr.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment");const or=({open:w,onClose:g,order:t,onUpdate:a})=>{const[l,n]=c.useState({deliveryAddress:{streetAddress:"",city:"",stateProvince:"",postalCode:"",country:""},deliveryDate:"",comment:""});c.useEffect(()=>{if(console.log("--- UpdateOrderModal Mounted / order changed ---"),console.log("Received order prop:",t),!t)return;console.log("Order number:",t.orderno),console.log("Customer:",t.customer),console.log("Delivery string for table (deliveryAddress):",t.deliveryAddress),console.log("Full delivery object (deliveryaddress):",t.deliveryaddress),console.log("Delivery date:",t.deliverydate),console.log("Comment:",t.comment),console.log("Total amount:",t.totalamount),console.log("Status:",t.status);const s=t.deliverydate?new Date(t.deliverydate).toISOString().split("T")[0]:"",i=t.deliveryaddress||{streetAddress:"",city:"",stateProvince:"",postalCode:"",country:""};n({deliveryAddress:i,deliveryDate:s,comment:t.comment||""}),console.log("Updated data state set in modal:",{deliveryAddress:i,deliveryDate:s,comment:t.comment})},[t]);const v=(s,i)=>{n(u=>({...u,[s]:i}))},p=(s,i)=>{n(u=>({...u,deliveryAddress:{...u.deliveryAddress,[s]:i}}))},y=async()=>{var s;if(!(!t||!t.orderno))try{const i=await U.put(`${H}/api/orders/${t.orderno}`,l,{withCredentials:!0});if(i.data.success){const u={...t,deliveryaddress:{...l.deliveryAddress},deliverydate:l.deliveryDate,comment:l.comment};a(u),g()}else console.error("Update failed:",i.data.error||i.data.message)}catch(i){console.error("Failed to update order",((s=i.response)==null?void 0:s.data)||i.message)}};return e.jsxs(F,{fullScreen:!0,open:w,onClose:g,children:[e.jsx(ke,{sx:{position:"relative",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:e.jsxs(Ie,{children:[e.jsx(Q,{edge:"start",color:"inherit",onClick:g,sx:{"&:hover":{bgcolor:"rgba(255,255,255,0.1)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e.jsx(ie,{})}),e.jsxs(o,{sx:{ml:2,flex:1},variant:"h6",fontWeight:600,children:["Update Order #",t==null?void 0:t.orderno]}),e.jsx(M,{autoFocus:!0,color:"inherit",onClick:y,startIcon:e.jsx(ge,{}),sx:{backgroundColor:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.3)",borderRadius:2,px:3,"&:hover":{backgroundColor:"rgba(255,255,255,0.3)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)"},transition:"all 0.3s ease"},children:"Save Changes"})]})}),e.jsx(d,{sx:{p:4,background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh"},children:e.jsxs(d,{sx:{maxWidth:800,mx:"auto"},children:[e.jsx(G,{in:!0,timeout:600,children:e.jsx(N,{elevation:0,sx:{mb:3,borderRadius:3,border:"1px solid rgba(0,0,0,0.08)"},children:e.jsxs(K,{sx:{p:4},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e.jsx(_e,{color:"primary",sx:{fontSize:32}}),e.jsx(o,{variant:"h6",sx:{fontWeight:600,color:"primary.main"},children:"Delivery Address"})]}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(j,{label:"Street Address",value:l.deliveryAddress.streetAddress,onChange:s=>p("streetAddress",s.target.value),fullWidth:!0,multiline:!0,rows:2,sx:{"& .MuiOutlinedInput-root":{borderRadius:2,transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},"&.Mui-focused":{boxShadow:"0 4px 20px rgba(25,118,210,0.15)"}}}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(j,{label:"City",value:l.deliveryAddress.city,onChange:s=>p("city",s.target.value),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2,transition:"all 0.3s ease"}}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(j,{label:"State/Province",value:l.deliveryAddress.stateProvince,onChange:s=>p("stateProvince",s.target.value),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2,transition:"all 0.3s ease"}}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(j,{label:"Postal Code",value:l.deliveryAddress.postalCode,onChange:s=>p("postalCode",s.target.value),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2,transition:"all 0.3s ease"}}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(j,{label:"Country",value:l.deliveryAddress.country,onChange:s=>p("country",s.target.value),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2,transition:"all 0.3s ease"}}})})]})]})})}),e.jsx(G,{in:!0,timeout:800,children:e.jsx(N,{elevation:0,sx:{borderRadius:3,border:"1px solid rgba(0,0,0,0.08)"},children:e.jsx(K,{sx:{p:4},children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(J,{color:"primary"}),e.jsx(o,{variant:"h6",sx:{fontWeight:600,color:"primary.main"},children:"Delivery Date"})]}),e.jsx(j,{label:"Delivery Date",type:"date",value:l.deliveryDate,onChange:s=>v("deliveryDate",s.target.value),fullWidth:!0,InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,transition:"all 0.3s ease"}},InputProps:{startAdornment:e.jsx(ce,{position:"start",children:e.jsx(J,{color:"action",fontSize:"small"})})}})]}),e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(ve,{color:"primary"}),e.jsx(o,{variant:"h6",sx:{fontWeight:600,color:"primary.main"},children:"Order Comment"})]}),e.jsx(j,{label:"Comment",value:l.comment,onChange:s=>v("comment",s.target.value),multiline:!0,rows:4,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2,transition:"all 0.3s ease"}},placeholder:"Add any special instructions or notes for this order..."})]})]})})})})]})})]})},dr=({open:w,onClose:g,orderno:t})=>{var p,y,s,i,u,b,k;const[a,l]=c.useState(null),[n,v]=c.useState(!0);return c.useEffect(()=>{if(!t)return;(async()=>{var S;v(!0);try{const C=(await U.get(`${H}/api/order-invoice/${t}`,{withCredentials:!0})).data,L=Array.isArray(C.items)?C.items.map(R=>({...R,unitprice:Number(R.unitprice),quantity:Number(R.quantity)})):[];let _={};try{_=typeof C.order.deliveryaddress=="string"?JSON.parse(C.order.deliveryaddress):C.order.deliveryaddress||{}}catch{_={}}l({...C,items:L,order:{...C.order,deliveryaddress:_}})}catch(A){console.error("Failed to fetch invoice:",((S=A.response)==null?void 0:S.data)||A.message)}finally{v(!1)}})()},[t]),!a&&!n?e.jsx("p",{children:"No invoice data found."}):e.jsx(F,{open:w,onClose:g,fullWidth:!0,maxWidth:"md",children:e.jsx(d,{sx:{p:4},children:n?e.jsx(ue,{}):e.jsxs(e.Fragment,{children:[e.jsxs(d,{sx:{mb:2},children:[e.jsxs(o,{variant:"h5",sx:{fontWeight:700},children:["Invoice #",((p=a.invoice)==null?void 0:p.invoiceno)||"-"]}),e.jsxs(o,{children:["Order Number: ",a.order.orderno]}),e.jsxs(o,{children:[" Order Type: ",a.order.ordertype||"N/A"]}),e.jsxs(o,{children:["Delivery Date: ",new Date(a.order.deliverydate).toLocaleDateString()]}),e.jsxs(o,{children:["Status: ",a.order.orderstatus]}),e.jsxs(o,{children:["Payment Method: ",((y=a.invoice)==null?void 0:y.paymentmethod)||"-"]})]}),e.jsxs(d,{sx:{mb:2},children:[e.jsx(o,{variant:"h6",children:"Customer"}),e.jsxs(o,{children:[a.order.cust_fname," ",a.order.cust_lname]}),e.jsxs(o,{children:[(s=a.order.deliveryaddress)==null?void 0:s.streetAddress,", ",(i=a.order.deliveryaddress)==null?void 0:i.city,", ",(u=a.order.deliveryaddress)==null?void 0:u.stateProvince,", ",(b=a.order.deliveryaddress)==null?void 0:b.postalCode,", ",(k=a.order.deliveryaddress)==null?void 0:k.country]})]}),e.jsxs(d,{sx:{mb:2},children:[e.jsx(o,{variant:"h6",children:"Items"}),e.jsxs("table",{width:"100%",style:{borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:"Product"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:"Quantity"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:"Unit Price"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:8},children:"Total"})]})}),e.jsx("tbody",{children:a.items.map(f=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #ccc",padding:8},children:f.product_name||f.productid}),e.jsx("td",{style:{border:"1px solid #ccc",padding:8},children:f.quantity}),e.jsxs("td",{style:{border:"1px solid #ccc",padding:8},children:["R",f.unitprice.toFixed(2)]}),e.jsxs("td",{style:{border:"1px solid #ccc",padding:8},children:["R",(f.unitprice*f.quantity).toFixed(2)]})]},f.orderitemid))})]})]}),e.jsxs(d,{sx:{mt:2},children:[e.jsxs(o,{children:["Total Items: ",a.order.totalitems]}),e.jsxs(o,{children:["Total Amount: R",Number(a.order.totalamount).toFixed(2)]}),e.jsxs(o,{children:["Comment: ",a.order.comment||"-"]})]}),e.jsx(d,{sx:{mt:3},children:e.jsx(Re,{document:e.jsx(We,{orderData:a}),fileName:`Invoice_Order_${a.order.orderno}.pdf`,style:{textDecoration:"none",padding:"8px 16px",backgroundColor:"#1976d2",color:"#fff",borderRadius:4},children:({loading:f})=>f?"Generating PDF...":"Download PDF"})})]})})})},lr=({open:w,onClose:g,orderno:t,onCancelled:a})=>{const[l,n]=c.useState(!1),v=async()=>{var p,y,s,i,u;if(t){n(!0);try{const b=await U.put(`${H}/api/orders/${t}/cancel`,{},{withCredentials:!0});ne.success(b.data.message||"Order cancelled successfully"),a(t),g()}catch(b){console.error("Cancel error:",((p=b.response)==null?void 0:p.data)||b.message);const k=((s=(y=b.response)==null?void 0:y.data)==null?void 0:s.details)||((u=(i=b.response)==null?void 0:i.data)==null?void 0:u.error)||"Something went wrong while cancelling the order.";ne.error(k)}finally{n(!1)}}};return e.jsxs(F,{open:w,onClose:g,children:[e.jsx(xe,{children:"Cancel Order"}),e.jsx(he,{children:e.jsxs(o,{children:["Are you sure you want to cancel order #",t,"?"]})}),e.jsxs(ze,{children:[e.jsx(M,{onClick:g,color:"inherit",disabled:l,children:"No"}),e.jsx(M,{onClick:v,color:"error",variant:"contained",disabled:l,children:l?e.jsx(ue,{size:20}):"Yes, Cancel Order"})]})]})},Y={Pending:{bg:"#fef3c7",color:"#92400e"},Delivered:{bg:"#d1fae5",color:"#065f46"},Cancelled:{bg:"#fee2e2",color:"#991b1b"},Processing:{bg:"#dbeafe",color:"#1e40af"}},ir=["Pending","Delivered","Cancelled"],cr=({filterSize:w=6,searchSize:g=12,onAddOrder:t})=>{const[a,l]=c.useState([]),[n,v]=c.useState({orderNo:"",customer:"",status:"",delivery:"",date:""}),[p,y]=c.useState(""),[s,i]=c.useState(null),[u,b]=c.useState(null),[k,f]=c.useState(!1),[S,A]=c.useState(null),[C,L]=c.useState(!1),[_,R]=c.useState(null),[fe,V]=c.useState(!1),je=!!s,se=["#6366f1","#8b5cf6","#ec4899","#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6"],q=async()=>{var r;try{const x=await U.get(`${H}/api/orders`,{withCredentials:!0}),I=(x.data.data||x.data||[]).map(D=>({...D,customer:D.customer||"Unknown",totalamount:Number(D.totalamount)||0,status:(D.status||"Pending").charAt(0).toUpperCase()+(D.status||"Pending").slice(1)}));l(I)}catch(x){console.error("Failed to fetch orders:",((r=x.response)==null?void 0:r.data)||x.message),l([])}};c.useEffect(()=>{q()},[]),c.useEffect(()=>{const r=()=>{q()};return window.addEventListener("focus",r),()=>{window.removeEventListener("focus",r)}},[]);const W=r=>{const{name:x,value:O}=r.target;v(I=>({...I,[x]:O}))},be=r=>{y(r.target.value)},ye=(r,x)=>{i(r.currentTarget),b(x)},T=()=>{i(null),b(null)},Ce=r=>{A(r),f(!0),T()},we=()=>{f(!1),A(null)},Se=r=>{l(x=>x.map(O=>O.orderno===r.orderno?r:O))},Oe=r=>{R(r.orderno),L(!0),T()},De=r=>{if(r){if(r.status.toLowerCase()!=="pending"){alert("Only pending orders can be cancelled");return}console.log("Cancel clicked:",r),A(r),V(!0)}},Ae=()=>{V(!1),q()},ae=a.filter(r=>{var x;return(!n.orderNo||r.orderno.toString().includes(n.orderNo))&&(!n.customer||r.customer.toLowerCase().includes(n.customer.toLowerCase()))&&(!n.status||r.status===n.status)&&(!n.delivery||r.deliveryAddress&&Object.values(r.deliveryAddress).join(" ").toLowerCase().includes(n.delivery.toLowerCase()))&&(!n.date||((x=r.deliverydate)==null?void 0:x.startsWith(n.date)))&&(!p||r.customer.toLowerCase().includes(p.toLowerCase()))});return e.jsxs(d,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",p:4},children:[e.jsx(d,{sx:{background:"white",borderRadius:3,p:4,mb:4,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)"},children:e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:80,height:80,borderRadius:"50%",background:"#667eea",display:"flex",alignItems:"center",justifyContent:"center",mr:3},children:e.jsx(oe,{sx:{fontSize:40,color:"white"}})}),e.jsxs(d,{children:[e.jsx(o,{variant:"h3",sx:{fontWeight:700,color:"#1e293b",mb:1},children:"Order Management"}),e.jsx(o,{variant:"h6",sx:{color:"#64748b",mb:1},children:"Track and manage customer orders efficiently"}),e.jsx(o,{variant:"body2",sx:{color:"#94a3b8"},children:"Access Level: super_admin â€¢ Orders Module"})]})]}),e.jsx(M,{variant:"contained",startIcon:e.jsx(de,{}),onClick:t,sx:{background:"#667eea",color:"white",fontWeight:600,px:4,py:1.5,borderRadius:2,fontSize:"1rem","&:hover":{background:"#5a67d8"}},children:"Add New Order"})]})}),e.jsx(N,{sx:{borderRadius:3,mb:4,background:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:e.jsx(K,{sx:{p:3},children:e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,md:2,children:e.jsx(j,{label:"Order No",name:"orderNo",value:n.orderNo,onChange:W,fullWidth:!0,size:"small"})}),e.jsx(h,{item:!0,xs:12,md:2,children:e.jsx(j,{label:"Customer",name:"customer",value:n.customer,onChange:W,fullWidth:!0,size:"small"})}),e.jsx(h,{item:!0,xs:12,md:2,children:e.jsxs(j,{select:!0,label:"Status",name:"status",value:n.status,onChange:W,fullWidth:!0,size:"small",children:[e.jsx(z,{value:"",children:"All"}),ir.map(r=>e.jsx(z,{value:r,children:r},r))]})}),e.jsx(h,{item:!0,xs:12,md:2,children:e.jsx(j,{label:"Delivery",name:"delivery",value:n.delivery,onChange:W,fullWidth:!0,size:"small"})}),e.jsx(h,{item:!0,xs:12,md:2,children:e.jsx(j,{label:"Date",name:"date",type:"date",value:n.date,onChange:W,fullWidth:!0,size:"small",InputLabelProps:{shrink:!0}})}),e.jsx(h,{item:!0,xs:12,md:2,children:e.jsx(j,{placeholder:"Search...",value:p,onChange:be,fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(ce,{position:"start",children:e.jsx(Me,{})})}})})]})})}),e.jsx(N,{sx:{borderRadius:3,background:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:e.jsx($e,{children:e.jsxs(Pe,{children:[e.jsx(Le,{children:e.jsxs(B,{children:[e.jsx(m,{sx:{background:"#667eea",color:"white",fontWeight:600,py:2},children:"Order No"}),e.jsx(m,{sx:{background:"#667eea",color:"white",fontWeight:600,py:2},children:"Customer"}),e.jsx(m,{sx:{background:"#667eea",color:"white",fontWeight:600,py:2},children:"Delivery Date"}),e.jsx(m,{sx:{background:"#667eea",color:"white",fontWeight:600,py:2},children:"Delivery Address"}),e.jsx(m,{sx:{background:"#667eea",color:"white",fontWeight:600,py:2},children:"Total Amount"}),e.jsx(m,{sx:{background:"#667eea",color:"white",fontWeight:600,py:2},children:"Status"}),e.jsx(m,{sx:{background:"#667eea",color:"white",fontWeight:600,py:2},children:"Actions"})]})}),e.jsx(Te,{children:ae.length>0?ae.map((r,x)=>{var O,I,D;return e.jsx(G,{in:!0,timeout:300+x*50,children:e.jsxs(B,{sx:{"&:nth-of-type(odd)":{backgroundColor:"#f8fafc"},"&:nth-of-type(even)":{backgroundColor:"white"},"&:hover":{backgroundColor:"#f1f5f9",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},transition:"all 0.2s ease",opacity:r.status.toLowerCase()==="cancelled"?.6:1,borderLeft:`3px solid ${((O=Y[r.status])==null?void 0:O.color)||"#6b7280"}`,"& td":{borderBottom:"1px solid #e2e8f0",py:2}},children:[e.jsx(m,{children:e.jsxs(d,{sx:{background:"#667eea",color:"white",borderRadius:2,px:2,py:.5,fontWeight:600,fontSize:"0.85rem",display:"inline-block"},children:["#",r.orderno]})}),e.jsx(m,{children:e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Ne,{sx:{bgcolor:se[a.indexOf(r)%se.length],width:36,height:36,fontWeight:600,fontSize:"0.8rem"},children:r.customer?r.customer.split(" ").map(E=>E[0]).join(""):"?"}),e.jsxs(d,{children:[e.jsx(o,{sx:{fontWeight:500,mb:.5,fontSize:"0.9rem"},children:r.customer}),e.jsx(o,{variant:"caption",color:"text.secondary",children:"Customer"})]})]})}),e.jsx(m,{children:e.jsx(d,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(o,{sx:{fontWeight:500},children:r.deliverydate?new Date(r.deliverydate).toLocaleDateString("en-CA"):"Not set"})})}),e.jsx(m,{children:e.jsx(o,{sx:{fontWeight:500,maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:r.deliveryAddress||"No address provided",children:r.deliveryAddress||"No address provided"})}),e.jsx(m,{children:e.jsxs(d,{sx:{background:"#10b981",color:"white",borderRadius:2,px:2,py:.5,fontWeight:600,fontSize:"0.9rem",display:"inline-block"},children:["R",r.totalamount.toFixed(2)]})}),e.jsx(m,{children:e.jsx(Fe,{label:r.status,sx:{backgroundColor:((I=Y[r.status])==null?void 0:I.bg)||"#f3f4f6",color:((D=Y[r.status])==null?void 0:D.color)||"#6b7280",fontWeight:600,fontSize:"0.85rem",py:1,px:2,"&:hover":{transform:"scale(1.05)",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},transition:"all 0.2s ease"}})}),e.jsx(m,{children:e.jsx(Q,{onClick:E=>ye(E,r),disabled:r.status.toLowerCase()==="cancelled",sx:{color:"#667eea",border:"2px solid transparent","&:hover":{bgcolor:"#667eea",color:"white",transform:"scale(1.1)",border:"2px solid #667eea"},"&:disabled":{opacity:.3,transform:"none"},transition:"all 0.3s ease"},children:e.jsx(Ue,{})})})]})},r.orderno)}):e.jsx(B,{children:e.jsx(m,{colSpan:7,children:e.jsxs(d,{sx:{textAlign:"center",py:8,color:"#64748b"},children:[e.jsx(oe,{sx:{fontSize:80,mb:3,opacity:.3}}),e.jsx(o,{variant:"h4",sx:{fontWeight:700,mb:2},children:"No Orders Found"}),e.jsx(o,{variant:"h6",sx:{opacity:.7,mb:3},children:"Try adjusting your search filters"}),e.jsx(M,{variant:"contained",startIcon:e.jsx(de,{}),onClick:t,sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:600,px:4,py:1.5,borderRadius:3,"&:hover":{background:"linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(102, 126, 234, 0.3)"},transition:"all 0.3s ease"},children:"Create New Order"})]})})})})]})})}),e.jsxs(He,{anchorEl:s,open:je,onClose:T,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(z,{onClick:()=>Oe(u),children:[e.jsx(pe,{sx:{mr:1,color:"#1976d2"}}),"View Invoice"]}),e.jsxs(z,{onClick:()=>Ce(u),children:[e.jsx(Ve,{sx:{mr:1,color:"#1976d2"}}),"Update"]}),e.jsxs(z,{onClick:()=>{De(u),T()},children:[e.jsx(me,{sx:{mr:1,color:"#d32f2f"}}),"Cancel Order"]})]}),S&&e.jsx(or,{open:k,order:S,onClose:we,onUpdate:Se}),e.jsx(dr,{open:C,onClose:()=>L(!1),orderno:_}),e.jsx(lr,{open:fe,onClose:()=>V(!1),orderno:S==null?void 0:S.orderno,onCancelled:Ae})]})},xr=()=>{const[w,g]=c.useState(!1),[t,a]=c.useState(0),l=()=>{g(!0)},n=()=>{g(!1),a(v=>v+1)};return e.jsxs(d,{sx:{maxWidth:1200,mx:"auto",mt:4},children:[e.jsx(cr,{filterSize:6,searchSize:12,onAddOrder:l},t),e.jsxs(F,{open:w,onClose:n,fullScreen:!0,TransitionComponent:qe,TransitionProps:{direction:"up"},children:[e.jsxs(xe,{children:["Add New Order",e.jsx(Q,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:v=>v.palette.grey[500]},children:e.jsx(ie,{})})]}),e.jsx(he,{dividers:!0,children:e.jsx(Ee,{})})]})]})};export{xr as default};
