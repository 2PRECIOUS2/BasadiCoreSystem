import{a0 as _e,k as e,r as s,E as H,a1 as g,w as a,a2 as Ie,a3 as X,z as j,a4 as R,B as f,a5 as le,a6 as We,I as $,a7 as Re,T as x,a8 as W,a9 as ze,A as Me,aa as Pe,ab as Ae,v as Te,ac as qe,ad as Fe,ae as De,af as L,ag as N,ah as E,ai as Ue,aj as $e,ak as ce,al as A,am as Le,an as J,ao as Ne,ap as Ee,aq as Oe,Y as Be,ar as Ve,as as de}from"./index-ed8ecba8.js";import{M as He}from"./LinearProgress-d63a09e5.js";import{A as T}from"./Add-edef7d7c.js";const Qe=_e(e.jsx("path",{d:"M19 13H5v-2h14z"}),"Remove"),Ge=({onSuccess:y})=>{const[h,u]=s.useState({material_name:"",unit:"",category:"",quantity:0}),[S,I]=s.useState(null),[d,n]=s.useState(null),b=p=>{u({...h,[p.target.name]:p.target.value})},k=async p=>{p.preventDefault();const v=new FormData;v.append("material_name",h.material_name),v.append("unit",h.unit),v.append("category",h.category),v.append("quantity",h.quantity),S&&v.append("image",S);try{const i=await fetch(`${R}/api/material/add`,{method:"POST",credentials:"include",body:v});if(i.ok)n({type:"success",text:"Material added successfully"}),u({material_name:"",unit:"",category:"",quantity:0}),I(null),setTimeout(()=>{y&&y()},1500);else{const _=await i.json();n({type:"error",text:_.message})}}catch{n({type:"error",text:"Server error"})}};return e.jsx("form",{onSubmit:k,children:e.jsxs(H,{spacing:2,children:[e.jsx(g,{label:"Material Name",name:"material_name",fullWidth:!0,required:!0,value:h.material_name,onChange:b}),e.jsxs(g,{select:!0,label:"Unit",name:"unit",fullWidth:!0,required:!0,value:h.unit,onChange:b,children:[e.jsx(a,{value:"meters",children:"Meters"}),e.jsx(a,{value:"cm",children:"Centimeters"}),e.jsx(a,{value:"items",children:"Items"}),e.jsx(a,{value:"ml",children:"Milliliters"}),e.jsx(a,{value:"grams",children:"Grams"}),e.jsx(a,{value:"rolls",children:"Rolls"}),e.jsx(a,{value:"packs",children:"Packs"}),e.jsx(a,{value:"sheets",children:"Sheets"})]}),e.jsxs(g,{select:!0,label:"Category",name:"category",fullWidth:!0,required:!0,value:h.category,onChange:b,children:[e.jsx(a,{value:"Fabric & Textile",children:"Fabric & Textile"}),e.jsx(a,{value:"Fasteners & Accessories",children:"Fasteners & Accessories"}),e.jsx(a,{value:"Adhesives",children:"Adhesives"}),e.jsx(a,{value:"Decorative Items",children:"Decorative Items"}),e.jsx(a,{value:"Stationery Supplies",children:"Stationery Supplies"}),e.jsx(a,{value:"Packaging",children:"Packaging"})]}),e.jsx(g,{label:"Quantity",name:"quantity",type:"number",value:h.quantity,fullWidth:!0,disabled:!0,InputProps:{sx:{fontSize:18,borderRadius:2,color:"text.secondary"}}}),e.jsx(g,{type:"file",onChange:p=>I(p.target.files[0])}),e.jsx(Ie,{in:!!d,children:e.jsx("div",{children:d&&e.jsx(X,{severity:d.type,children:d.text})})}),e.jsx(j,{variant:"contained",type:"submit",sx:{py:1.5,fontWeight:600,letterSpacing:1,fontSize:18,borderRadius:2,background:"linear-gradient(90deg, #1976d2 60%, #64b5f6 100%)",boxShadow:"0 2px 8px #90caf9",transition:"transform 0.18s, box-shadow 0.18s","&:hover":{transform:"scale(1.05)",boxShadow:"0 4px 16px #90caf9",background:"linear-gradient(90deg, #1565c0 60%, #42a5f5 100%)"}},children:"Add Material"})]})})},Ke=({refreshTrigger:y})=>{const[h,u]=s.useState([]);s.useState(!1);const S=t=>t?["pcs","pieces","piece","units","unit","items","item","rolls","packs","sheets"].includes(t==null?void 0:t.toLowerCase()):!1,I=t=>S(t)?"primary":"info",d=t=>t<10,[n,b]=s.useState("name"),k=[...h].sort((t,c)=>n==="name"?t.material_name.localeCompare(c.material_name):n==="quantity"?c.quantity-t.quantity:n==="price"?c.unit_price-t.unit_price:0),[p,v]=s.useState(null),[i,_]=s.useState(null),[q,F]=s.useState(!1),[m,z]=s.useState({}),[Q,r]=s.useState(!1),[l,o]=s.useState(!1),[C,G]=s.useState("material_name"),[O,Z]=s.useState(""),[M,he]=s.useState("active"),[ae,w]=s.useState(""),[re,D]=s.useState(""),se=100,B=(t=C,c=O,P=M)=>{let Y=`${R}/api/material/all`;const V=[];P&&V.push(`status=${encodeURIComponent(P)}`),c&&(t==="material_name"&&V.push(`search=${encodeURIComponent(c)}`),t==="category"&&V.push(`category=${encodeURIComponent(c)}`),t==="unit"&&V.push(`unit=${encodeURIComponent(c)}`)),V.length&&(Y+="?"+V.join("&")),fetch(Y,{credentials:"include"}).then(U=>U.json()).then(U=>{const Ce=(Array.isArray(U)?U:U.data||[]).sort((we,ke)=>new Date(ke.created_at)-new Date(we.created_at));u(Ce)}).catch(U=>{console.error("Error fetching materials:",U),w("Failed to fetch materials"),u([])})};s.useEffect(()=>{B()},[M]),s.useEffect(()=>{y&&B()},[y]);const xe=t=>{t.preventDefault(),B(C,O,M)},ne=t=>{he(t),Z("")},pe=t=>{const c=t/se*100;return c>80?"success":c>60?"warning":c>20?"info":"error"},me=t=>t/se*100,ge=(t,c)=>{v(t.currentTarget),_(c)},K=(t=!0)=>{v(null),t&&_(null)},fe=()=>{i&&(z(i),F(!0)),K()},ee=t=>{z({...m,[t.target.name]:t.target.value})},je=async()=>{const t=new FormData;t.append("material_name",m.material_name),t.append("unit",m.unit),t.append("category",m.category),m.image&&t.append("image",m.image);try{(await fetch(`${R}/api/material/${m.material_id}`,{method:"PUT",credentials:"include",body:t})).ok?(F(!1),D("Material updated successfully"),B(),setTimeout(()=>D(""),3e3)):w("Failed to update material")}catch{w("Failed to update material")}},be=()=>{console.log("üéØ Archive button clicked!",i),r(!0),K(!1)},ve=async()=>{if(console.log("üî• CONFIRM ARCHIVE BUTTON CLICKED!"),console.log("üì¶ Selected material:",i),!i){console.error("‚ùå No material selected"),w("No material selected"),setTimeout(()=>w(""),3e3);return}console.log("üöÄ Starting archive process...");try{const t=`${R}/api/material/${i.material_id}/archive`;console.log("üåê Making request to:",t);const c=await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include"});console.log("üì° Response status:",c.status),console.log("üì° Response ok:",c.ok);const P=await c.text();if(console.log("üì° Raw response:",P),c.ok){const Y=JSON.parse(P);console.log("‚úÖ Success response:",Y),r(!1),D("Material archived successfully"),B(),setTimeout(()=>D(""),3e3)}else console.error("‚ùå Error response:",P),w(`Failed to archive material (${c.status})`),setTimeout(()=>w(""),3e3)}catch(t){console.error("üö® Network error:",t),w("Network error - check if server is running"),setTimeout(()=>w(""),3e3)}};console.log("üé≠ Dialog states:",{openArchive:Q,openRestore:l,selectedMaterial:i==null?void 0:i.material_name});const ye=()=>{o(!0),K(!1)},Se=async()=>{if(i)try{const t=await fetch(`${R}/api/material/${i.material_id}/restore`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include"});if(t.ok)o(!1),D("Material restored successfully"),B(),setTimeout(()=>D(""),3e3);else{const c=await t.json();w(c.message||"Failed to restore material")}}catch{w("Failed to restore material")}},ie=()=>r(!1),oe=()=>o(!1);return e.jsxs(e.Fragment,{children:[ae&&e.jsx(X,{severity:"error",sx:{mb:2},onClose:()=>w(""),children:ae}),re&&e.jsx(X,{severity:"success",sx:{mb:2},onClose:()=>D(""),children:re}),e.jsxs(f,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(j,{variant:M==="active"?"contained":"outlined",onClick:()=>ne("active"),size:"small",children:"Active Materials"}),e.jsx(j,{variant:M==="inactive"?"contained":"outlined",onClick:()=>ne("inactive"),color:"warning",size:"small",children:"Archived Materials"})]}),e.jsxs(f,{sx:{display:"flex",alignItems:"center",mb:2,gap:2},children:[e.jsxs(le,{value:C,onChange:t=>G(t.target.value),size:"small",sx:{minWidth:140},children:[e.jsx(a,{value:"material_name",children:"Material Name"}),e.jsx(a,{value:"category",children:"Category"}),e.jsx(a,{value:"unit",children:"Unit"})]}),e.jsx("form",{onSubmit:xe,style:{flex:1},children:e.jsx(g,{size:"small",placeholder:`Search by ${C.replace("_"," ")}`,value:O,onChange:t=>Z(t.target.value),InputProps:{endAdornment:e.jsx(We,{position:"end",children:e.jsx($,{type:"submit",size:"small",children:e.jsx(Re,{})})})},fullWidth:!0})})]}),e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{mt:0,textAlign:"center",fontWeight:700,letterSpacing:1,color:"black"},children:M==="active"?"Active Materials":M==="inactive"?"Archived Materials":"All Materials"}),e.jsxs(f,{sx:{display:"flex",alignItems:"center",mb:2,gap:2},children:[e.jsx(x,{variant:"body2",sx:{fontWeight:600},children:"Sort by:"}),e.jsxs(le,{value:n,onChange:t=>b(t.target.value),size:"small",sx:{minWidth:120},children:[e.jsx(a,{value:"name",children:"Name"}),e.jsx(a,{value:"quantity",children:"Quantity"}),e.jsx(a,{value:"price",children:"Price"})]})]}),e.jsx(W,{container:!0,spacing:3,sx:{mt:1},children:k.length===0?e.jsx(W,{item:!0,xs:12,children:e.jsx(x,{variant:"body1",children:M==="inactive"?"No archived materials found.":"No materials found."})}):k.map((t,c)=>e.jsx(W,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(ze,{elevation:3,sx:{borderRadius:3,p:2,transition:"box-shadow 0.2s","&:hover":{boxShadow:8},height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",opacity:t.status==="inactive"?.7:1,border:t.status==="inactive"?"2px dashed #ff9800":"2px solid #ef12faff",bgcolor:c%2===0?"#f8fafc":"#fff"},children:[e.jsxs(f,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:2},children:[e.jsx(Me,{variant:"rounded",src:t.image_path?`/images/materials/${t.image_path}`:"/images/materials/placeholder.jpg",sx:{width:72,height:72,bgcolor:"#f5f5f5",border:"1px solid #e0e0e0",mb:1,objectFit:"cover",fontSize:32,color:"#bdbdbd"},children:!t.image_path&&e.jsx(f,{component:"span",sx:{fontSize:32},children:"üñºÔ∏è"})}),e.jsx(x,{variant:"h6",sx:{fontWeight:600,textAlign:"center"},children:t.material_name}),e.jsxs(f,{sx:{mt:1,mb:.5,textAlign:"center"},children:[e.jsx(x,{variant:"body2",sx:{fontWeight:500,color:"text.secondary",mb:.2},children:t.category}),e.jsx(x,{variant:"body2",sx:{fontWeight:500,color:I(t.unit)+".main"},children:t.unit})]}),e.jsxs(x,{variant:"body2",sx:{color:"text.secondary",fontSize:13,textAlign:"center",mt:.5,letterSpacing:1},children:["SKU: ",t.sku_code]}),e.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mt:.5},children:[e.jsxs(x,{variant:"body2",sx:{color:"text.secondary",fontSize:15,textAlign:"center",letterSpacing:1,fontWeight:500},title:`Unit Price: R${t.unit_price?Number(t.unit_price).toFixed(2):"0.00"}`,children:["R",t.unit_price?Number(t.unit_price).toFixed(2):"0.00"]}),e.jsx(x,{variant:"caption",sx:{ml:.5,color:"text.secondary",fontWeight:400},children:"per unit"})]})]}),e.jsxs(f,{sx:{width:"100%",mb:1},children:[e.jsx(He,{variant:"determinate",value:me(t.quantity),color:pe(t.quantity),sx:{height:8,borderRadius:5}}),e.jsx(f,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:.5},children:e.jsxs(x,{variant:"caption",sx:{color:d(t.quantity)?"error.main":"text.secondary",fontWeight:d(t.quantity)?700:400},title:d(t.quantity)?"Low stock!":"Stock quantity",children:["Qty: ",t.quantity,d(t.quantity)&&e.jsx(Pe,{label:"Low",color:"error",size:"small",sx:{ml:1}})]})})]}),e.jsxs(f,{sx:{display:"flex",justifyContent:"flex-end",mt:"auto"},children:[e.jsx($,{"aria-label":"settings",onClick:P=>ge(P,t),size:"small",children:e.jsx(Ae,{})}),e.jsx(Te,{anchorEl:p,open:!!p&&(i==null?void 0:i.material_id)===t.material_id,onClose:K,children:t.status==="active"?[e.jsxs(a,{onClick:fe,sx:{color:"primary.main"},children:[e.jsx(qe,{sx:{mr:1,color:"#1976d2"},fontSize:"small"}),"Update"]},"update"),e.jsxs(a,{onClick:be,sx:{color:"error.main"},children:[e.jsx(Fe,{sx:{mr:1,color:"#d32f2f"},fontSize:"small"}),"Archive"]},"archive")]:[e.jsxs(a,{onClick:ye,sx:{color:"success.main"},children:[e.jsx(De,{sx:{mr:1,color:"#388e3c"},fontSize:"small"}),"Restore"]},"restore")]})]})]})},t.material_id))}),e.jsxs(L,{open:Q,onClose:ie,children:[e.jsx(N,{children:"Archive Material"}),e.jsxs(E,{children:[e.jsxs(x,{sx:{mb:2},children:["Are you sure you want to archive ",e.jsx("b",{children:i==null?void 0:i.material_name}),"?"]}),e.jsx(x,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"This will:"}),e.jsxs(x,{variant:"body2",component:"ul",sx:{pl:2},children:[e.jsx("li",{children:"Hide the material from searches and product creation"}),e.jsx("li",{children:"Prevent new stock from being added"}),e.jsx("li",{children:"Change the status to inactive"}),e.jsx("li",{children:"Material can be restored later if needed"})]}),e.jsxs(H,{direction:"row",spacing:2,sx:{mt:3,justifyContent:"flex-end"},children:[e.jsx(j,{onClick:ie,children:"Cancel"}),e.jsx(j,{onClick:ve,color:"error",variant:"contained",children:"Archive Material"})]})]})]}),e.jsxs(L,{open:l,onClose:oe,children:[e.jsx(N,{children:"Restore Material"}),e.jsxs(E,{children:[e.jsxs(x,{sx:{mb:2},children:["Are you sure you want to restore ",e.jsx("b",{children:i==null?void 0:i.material_name}),"?"]}),e.jsx(x,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"This will:"}),e.jsxs(x,{variant:"body2",component:"ul",sx:{pl:2},children:[e.jsx("li",{children:"Make the material available for searches and product creation"}),e.jsx("li",{children:"Allow new stock to be added"}),e.jsx("li",{children:"Change the status to active"})]}),e.jsxs(H,{direction:"row",spacing:2,sx:{mt:3,justifyContent:"flex-end"},children:[e.jsx(j,{onClick:oe,children:"Cancel"}),e.jsx(j,{onClick:Se,color:"success",variant:"contained",children:"Restore Material"})]})]})]}),e.jsxs(L,{open:q,onClose:()=>F(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsx(N,{children:"Update Material"}),e.jsx(E,{children:e.jsxs(H,{spacing:2,sx:{mt:1},children:[e.jsx(g,{name:"material_name",label:"Material Name",fullWidth:!0,value:m.material_name||"",onChange:ee}),e.jsx(g,{label:"SKU Code",value:m.sku_code,fullWidth:!0,disabled:!0}),e.jsx(g,{label:"Unit Price",value:m.unit_price,fullWidth:!0,disabled:!0}),e.jsx(g,{label:"Quantity",value:m.quantity,fullWidth:!0,disabled:!0}),e.jsxs(g,{select:!0,name:"category",label:"Category",value:m.category||"",onChange:ee,fullWidth:!0,children:[e.jsx(a,{value:"Fabric & Textile",children:"Fabric & Textile"}),e.jsx(a,{value:"Fasteners & Accessories",children:"Fasteners & Accessories"}),e.jsx(a,{value:"Adhesives",children:"Adhesives"}),e.jsx(a,{value:"Decorative Items",children:"Decorative Items"}),e.jsx(a,{value:"Stationery Supplies",children:"Stationery Supplies"}),e.jsx(a,{value:"Packaging",children:"Packaging"})]}),e.jsxs(g,{select:!0,name:"unit",label:"Unit",value:m.unit||"",onChange:ee,fullWidth:!0,children:[e.jsx(a,{value:"meters",children:"Meters"}),e.jsx(a,{value:"cm",children:"Centimeters"}),e.jsx(a,{value:"items",children:"Items"}),e.jsx(a,{value:"ml",children:"Milliliters"}),e.jsx(a,{value:"grams",children:"Grams"}),e.jsx(a,{value:"rolls",children:"Rolls"}),e.jsx(a,{value:"packs",children:"Packs"}),e.jsx(a,{value:"sheets",children:"Sheets"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>z({...m,image:t.target.files[0]})}),e.jsx(j,{onClick:je,variant:"contained",children:"Save Changes"})]})})]})]})},Ye=()=>{const[y,h]=s.useState([]),[u,S]=s.useState(null);s.useState(null),s.useState([]),s.useEffect(()=>{fetch(`${R}/api/stock/invoices`,{credentials:"include"}).then(n=>n.json()).then(n=>h(n))},[]);const I=async n=>{const k=await(await fetch(`${R}/api/stock/invoice/${n.invoice_number}/download`,{credentials:"include"})).blob(),p=window.URL.createObjectURL(k);S(p)},d=()=>{u&&window.URL.revokeObjectURL(u),S(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(Ue,{children:[e.jsx($e,{children:e.jsxs(ce,{children:[e.jsx(A,{children:"Invoice Number"}),e.jsx(A,{children:"Date"}),e.jsx(A,{children:"Total Cost"}),e.jsx(A,{children:"Actions"})]})}),e.jsx(Le,{children:y.map(n=>e.jsxs(ce,{children:[e.jsx(A,{children:n.invoice_number}),e.jsx(A,{children:new Date(n.purchase_date).toLocaleDateString()}),e.jsxs(A,{children:["R",n.total_cost]}),e.jsxs(A,{children:[e.jsx(j,{onClick:()=>I(n),children:"View"}),e.jsx(j,{href:`${R}/api/stock/invoice/${n.invoice_number}/download`,target:"_blank",rel:"noopener",children:"Download PDF"})]})]},n.invoice_number))})]}),e.jsxs(L,{open:!!u,onClose:d,maxWidth:"md",fullWidth:!0,children:[e.jsxs(N,{children:["Invoice PDF Preview",e.jsx($,{"aria-label":"close",onClick:d,sx:{position:"absolute",right:8,top:8,color:n=>n.palette.grey[500]},children:e.jsx(J,{})})]}),e.jsx(E,{dividers:!0,sx:{height:"80vh",p:0},children:u&&e.jsx("iframe",{src:u,title:"Invoice PDF",width:"100%",height:"100%",style:{border:"none",minHeight:"75vh"}})})]})]})},Je=({onStockAdded:y})=>{const[h,u]=s.useState({open:!1,message:"",severity:"success"}),[S,I]=s.useState([]),[d,n]=s.useState([{material_id:"",supplier_name:"",quantity:"",price_bought:"",unit_price:0}]),[b,k]=s.useState(""),[p,v]=s.useState(0);s.useEffect(()=>{i()},[]);const i=()=>{fetch(`${R}/api/material/all`,{credentials:"include"}).then(r=>r.json()).then(r=>I(r)).catch(r=>{console.error("Error fetching materials:",r),u({open:!0,message:"Error loading materials",severity:"error"})})},_=(r,l,o)=>{const C=[...d];if(l==="quantity"&&parseInt(o)>2e3){u({open:!0,message:"Maximum 2000 units allowed",severity:"warning"});return}C[r][l]=o;const{quantity:G,price_bought:O}=C[r];G&&O&&(C[r].unit_price=(parseFloat(O)/parseInt(G)).toFixed(2)),n(C),q(C)},q=r=>{const l=r.reduce((o,C)=>o+parseFloat(C.price_bought||0),0);v(l.toFixed(2))},F=()=>{n([...d,{material_id:"",supplier_name:"",quantity:"",price_bought:"",unit_price:0}])},m=r=>{const l=[...d];l.splice(r,1),n(l),q(l)},z=()=>{if(!b)return u({open:!0,message:"Please select a purchase date",severity:"error"}),!1;for(let r=0;r<d.length;r++){const l=d[r];if(!l.material_id||!l.supplier_name||!l.quantity||!l.price_bought)return u({open:!0,message:`Please fill all fields for row ${r+1}`,severity:"error"}),!1;const o=parseInt(l.quantity);if(o<=0||o>2e3)return u({open:!0,message:`Quantity for row ${r+1} must be between 1 and 2000`,severity:"error"}),!1}return!0},Q=async()=>{if(!z())return;const r={stockItems:d,purchaseDate:b,totalCost:p};try{const l=await fetch(`${R}/api/stock/add`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)}),o=await l.json();l.ok?(u({open:!0,message:"Stock added and invoice generated successfully!",severity:"success"}),n([{material_id:"",supplier_name:"",quantity:"",price_bought:"",unit_price:0}]),k(""),v(0),y&&y()):u({open:!0,message:o.message||"Error submitting stock",severity:"error"})}catch(l){console.error(l),u({open:!0,message:"Server error occurred",severity:"error"})}};return e.jsxs(H,{spacing:4,sx:{width:"100%",maxWidth:1200,minWidth:400,bgcolor:"#f5faff",p:4,borderRadius:4,boxShadow:4,mx:"auto",my:"auto",position:"relative"},children:[e.jsxs(x,{variant:"h4",sx:{fontWeight:900,color:"#1976d2",letterSpacing:1,mb:2,display:"flex",alignItems:"center"},children:[e.jsx(T,{sx:{fontSize:36,mr:1}})," Add New Stock"]}),d.map((r,l)=>e.jsxs(W,{container:!0,spacing:3,alignItems:"center",sx:{mb:2},children:[e.jsx(W,{item:!0,xs:3,children:e.jsx(g,{select:!0,label:e.jsxs("span",{style:{fontWeight:700},children:[e.jsx(T,{sx:{fontSize:20,color:"#1976d2",mr:.5}}),"Select Material"]}),fullWidth:!0,value:r.material_id,onChange:o=>_(l,"material_id",o.target.value),InputProps:{sx:{fontSize:20,height:56,fontWeight:700}},InputLabelProps:{sx:{fontSize:20,fontWeight:700}},required:!0,children:S.map(o=>e.jsxs(a,{value:o.material_id,sx:{fontSize:20,fontWeight:700},children:[o.material_name," ",o.unit?`(${o.unit})`:""]},o.material_id))})}),e.jsx(W,{item:!0,xs:3,children:e.jsx(g,{label:e.jsxs("span",{style:{fontWeight:700},children:[e.jsx(T,{sx:{fontSize:20,color:"#43a047",mr:.5}}),"Supplier Name"]}),fullWidth:!0,value:r.supplier_name,onChange:o=>_(l,"supplier_name",o.target.value),InputProps:{sx:{fontSize:18,height:56,fontWeight:700}},InputLabelProps:{sx:{fontSize:18,fontWeight:700}},required:!0})}),e.jsx(W,{item:!0,xs:2,children:e.jsx(g,{label:e.jsxs("span",{style:{fontWeight:700},children:[e.jsx(T,{sx:{fontSize:20,color:"#fbc02d",mr:.5}}),"Quantity"]}),type:"number",fullWidth:!0,value:r.quantity,onChange:o=>_(l,"quantity",o.target.value),inputProps:{step:"1",min:1,max:2e3,onInput:o=>{parseInt(o.target.value)>2e3&&(o.target.value=2e3)}},InputProps:{sx:{fontSize:18,height:56,fontWeight:700}},InputLabelProps:{sx:{fontSize:18,fontWeight:700}},required:!0,error:r.quantity&&(parseInt(r.quantity)>2e3||parseInt(r.quantity)<=0)})}),e.jsx(W,{item:!0,xs:2,children:e.jsx(g,{label:e.jsxs("span",{style:{fontWeight:700},children:[e.jsx(T,{sx:{fontSize:20,color:"#d81b60",mr:.5}}),"Total Price Bought"]}),type:"number",fullWidth:!0,value:r.price_bought,onChange:o=>_(l,"price_bought",o.target.value),InputProps:{sx:{fontSize:16,height:56,fontWeight:700}},InputLabelProps:{sx:{fontSize:16,fontWeight:700}},inputProps:{step:"0.01",min:0},required:!0})}),e.jsx(W,{item:!0,xs:2,children:e.jsx(g,{label:e.jsxs("span",{style:{fontWeight:700},children:[e.jsx(T,{sx:{fontSize:20,color:"#1976d2",mr:.5}}),"Unit Price"]}),disabled:!0,value:r.unit_price,fullWidth:!0,InputProps:{sx:{fontSize:18,height:56,fontWeight:700,bgcolor:"#f5f5f5"}},InputLabelProps:{sx:{fontSize:18,fontWeight:700}}})}),e.jsx(W,{item:!0,xs:12,sm:1,children:e.jsx($,{color:"error",onClick:()=>m(l),disabled:d.length===1,sx:{bgcolor:"#fff",border:"2px solid #d81b60",p:1},title:"Remove this row",children:e.jsx(Qe,{sx:{fontSize:28,color:"#d81b60"}})})})]},l)),e.jsx(j,{startIcon:e.jsx(T,{sx:{fontSize:24}}),onClick:F,sx:{fontWeight:900,fontSize:18,bgcolor:"#1976d2",color:"#fff",borderRadius:2,boxShadow:2,py:1,px:3,"&:hover":{bgcolor:"#1565c0"}},children:"Add Stock Row"}),e.jsx(g,{label:e.jsxs("span",{style:{fontWeight:700},children:[e.jsx(T,{sx:{fontSize:20,color:"#43a047",mr:.5}}),"Purchase Date"]}),type:"date",fullWidth:!0,InputLabelProps:{shrink:!0,sx:{fontSize:18,fontWeight:700}},value:b,onChange:r=>k(r.target.value),sx:{fontSize:18,fontWeight:700,height:56},required:!0,inputProps:{max:new Date().toISOString().split("T")[0]}}),e.jsxs(x,{variant:"h5",sx:{fontWeight:900,color:"#1976d2",letterSpacing:1,mt:2},children:["Total: R",p]}),e.jsx(j,{variant:"contained",color:"primary",onClick:Q,sx:{fontWeight:900,fontSize:18,py:1.5,borderRadius:2,boxShadow:2,bgcolor:"#1976d2","&:hover":{bgcolor:"#1565c0"}},disabled:!b||d.length===0,children:"SUBMIT STOCK & GENERATE INVOICE"}),e.jsx(Ne,{open:h.open,autoHideDuration:4e3,onClose:()=>u({...h,open:!1}),anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(X,{onClose:()=>u({...h,open:!1}),severity:h.severity,sx:{width:"100%",fontSize:18,fontWeight:700},children:h.message})})]})};var te={},Xe=Oe;Object.defineProperty(te,"__esModule",{value:!0});var ue=te.default=void 0,Ze=Xe(Ee()),et=e;ue=te.default=(0,Ze.default)((0,et.jsx)("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"}),"Receipt");const nt=()=>{const[y,h]=s.useState(!1),[u,S]=s.useState(!1),[I,d]=s.useState(!1),[n,b]=s.useState(0),k=()=>h(!0),p=()=>h(!1),v=()=>d(!0),i=()=>d(!1),_=()=>S(!0),q=()=>S(!1),F=()=>{i(),b(z=>z+1)},m=()=>{p(),b(z=>z+1)};return e.jsxs(f,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",py:4,px:2},children:[e.jsxs(Be,{maxWidth:"lg",children:[e.jsxs(f,{sx:{background:"white",borderRadius:4,p:4,mb:4,boxShadow:"0 20px 60px rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:3},children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(f,{sx:{width:80,height:80,borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(102, 126, 234, 0.4)"},children:e.jsx(Ve,{sx:{fontSize:40,color:"white"}})}),e.jsxs(f,{children:[e.jsx(x,{variant:"h3",sx:{fontWeight:800,letterSpacing:1,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textTransform:"uppercase"},children:"Material Management"}),e.jsx(x,{sx:{color:"text.secondary",fontSize:16,mt:.5,fontWeight:500},children:"üì¶ Track and manage your inventory efficiently"})]})]}),e.jsxs(H,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(j,{variant:"contained",startIcon:e.jsx(de,{}),onClick:v,sx:{py:1.5,px:3,fontWeight:700,letterSpacing:1,fontSize:15,borderRadius:2,background:"linear-gradient(90deg, #4caf50 0%, #81c784 100%)",boxShadow:"0 4px 15px rgba(76, 175, 80, 0.4)",transition:"all 0.3s ease",textTransform:"none","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(76, 175, 80, 0.6)",background:"linear-gradient(90deg, #388e3c 0%, #66bb6a 100%)"}},children:"New Material"}),e.jsx(j,{variant:"contained",startIcon:e.jsx(de,{}),onClick:k,sx:{py:1.5,px:3,fontWeight:700,letterSpacing:1,fontSize:15,borderRadius:2,background:"linear-gradient(90deg, #1976d2 0%, #64b5f6 100%)",boxShadow:"0 4px 15px rgba(25, 118, 210, 0.4)",transition:"all 0.3s ease",textTransform:"none","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(25, 118, 210, 0.6)",background:"linear-gradient(90deg, #1565c0 0%, #42a5f5 100%)"}},children:"New Stock"}),e.jsx(j,{variant:"outlined",startIcon:e.jsx(ue,{}),onClick:_,sx:{py:1.5,px:3,fontWeight:700,letterSpacing:1,fontSize:15,borderRadius:2,borderWidth:2,borderColor:"#667eea",color:"#667eea",textTransform:"none",transition:"all 0.3s ease","&:hover":{borderWidth:2,borderColor:"#764ba2",backgroundColor:"rgba(102, 126, 234, 0.1)",transform:"translateY(-2px)"}},children:"Invoices"})]})]}),e.jsx(f,{sx:{background:"white",borderRadius:4,p:4,boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:e.jsx(Ke,{refreshTrigger:n,maxItemsPerPage:16})})]}),e.jsxs(L,{open:I,onClose:i,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:"0 20px 60px rgba(0,0,0,0.3)"}},children:[e.jsxs(N,{sx:{m:0,p:3,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:700,fontSize:20,letterSpacing:1},children:["Add New Material",e.jsx($,{"aria-label":"close",onClick:i,sx:{position:"absolute",right:8,top:8,color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:e.jsx(J,{})})]}),e.jsx(E,{dividers:!0,sx:{p:3},children:e.jsx(Ge,{onSuccess:F})})]}),e.jsxs(L,{open:y,onClose:p,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:"0 20px 60px rgba(0,0,0,0.3)"}},children:[e.jsxs(N,{sx:{m:0,p:3,background:"linear-gradient(135deg, #1976d2 0%, #64b5f6 100%)",color:"white",fontWeight:700,fontSize:20,letterSpacing:1},children:["Add New Stock",e.jsx($,{"aria-label":"close",onClick:p,sx:{position:"absolute",right:8,top:8,color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:e.jsx(J,{})})]}),e.jsx(E,{dividers:!0,sx:{p:3},children:e.jsx(Je,{onStockAdded:m})})]}),e.jsxs(L,{open:u,onClose:q,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:"0 20px 60px rgba(0,0,0,0.3)"}},children:[e.jsxs(N,{sx:{m:0,p:3,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:700,fontSize:20,letterSpacing:1},children:["Invoices",e.jsx($,{"aria-label":"close",onClick:q,sx:{position:"absolute",right:8,top:8,color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:e.jsx(J,{})})]}),e.jsx(E,{dividers:!0,sx:{p:3},children:e.jsx(Ye,{})})]})]})};export{nt as default};
