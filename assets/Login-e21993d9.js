import{a0 as Q,k as e,aY as X,r as s,B as P,T as o,E as q,aS as u,aT as m,a5 as ee,w as z,aZ as h,aU as C,a6 as se,I as te,a3 as F,z as re,aw as ae,a4 as oe,$ as ne,a8 as N,a9 as ie,L as le}from"./index-ed8ecba8.js";import{L as de}from"./Logo-ee9db689.js";import{V as ce}from"./Visibility-8c2955d9.js";const ue=Q(e.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),me=({title:n,subtitle:p,subtext:g,setIsAuthenticated:T,setUser:k})=>{const O=X(),[r,_]=s.useState(""),[i,V]=s.useState(""),[x,R]=s.useState(""),[l,$]=s.useState(""),[y,J]=s.useState(!1),[W,f]=s.useState(!1),[D,j]=s.useState(""),[U,A]=s.useState(!1),[G,H]=s.useState(""),[S,B]=s.useState(""),[b,w]=s.useState(""),[E,v]=s.useState(""),[I,M]=s.useState(""),Y=async t=>{t.preventDefault(),f(!0),j(""),A(!1),B(""),w(""),v(""),M("");let a=!1;if(r||(B("Please select a login type"),a=!0),i?/\S+@\S+\.\S+/.test(i)||(w("Email is invalid"),a=!0):(w("Email is required"),a=!0),r==="super_admin"&&!x&&(M("Password is required"),a=!0),r==="employee"&&!l?(v("Employee ID is required"),a=!0):r==="employee"&&isNaN(l)&&(v("Employee ID must be a number"),a=!0),a){f(!1);return}try{const d={loginType:r,email:i.toLowerCase().trim(),...r==="super_admin"&&{password:x},...r==="employee"&&{employeeId:Number(l)}};console.log("ðŸ§¾ Sending login request:",d);const L=await fetch(`${oe}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(d)}),c=await L.json();L.ok?(A(!0),H("Login successful!"),localStorage.setItem("user",JSON.stringify(c.user)),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("sessionId",c.sessionId),T&&T(!0),k&&k(c.user),setTimeout(()=>O("/dashboard"),1200)):j(c.message||`Login failed (Status: ${L.status})`)}catch(d){console.error("Login error:",d),j("Failed to connect to server. Please check your connection and try again.")}finally{f(!1)}},Z=()=>{J(!y)},K=t=>{t.preventDefault()};return e.jsxs(e.Fragment,{children:[n&&e.jsxs(P,{mb:2,children:[e.jsx(o,{fontWeight:"700",variant:"h2",mb:1,children:n}),g&&e.jsx(o,{variant:"subtitle1",color:"textSecondary",children:g})]}),g,e.jsxs(q,{spacing:3,sx:{mt:2},children:[e.jsxs(u,{fullWidth:!0,error:!!S,children:[e.jsx(m,{children:"Login Type"}),e.jsxs(ee,{value:r,label:"Login Type",onChange:t=>_(t.target.value),children:[e.jsx(z,{value:"employee",children:"Employee Login"}),e.jsx(z,{value:"super_admin",children:"Super Admin Login"})]}),S&&e.jsx(h,{children:S})]}),e.jsxs(u,{fullWidth:!0,error:!!b,children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(C,{id:"email",type:"email",value:i,onChange:t=>V(t.target.value),label:"Email",placeholder:"Enter your email"}),b&&e.jsx(h,{children:b})]}),r==="employee"&&e.jsxs(u,{fullWidth:!0,error:!!E,children:[e.jsx(m,{htmlFor:"employeeId",children:"Employee ID"}),e.jsx(C,{id:"employeeId",type:"number",value:l,onChange:t=>$(t.target.value),label:"Employee ID",placeholder:"Enter your Employee ID"}),E&&e.jsx(h,{children:E})]}),r==="super_admin"&&e.jsxs(u,{fullWidth:!0,error:!!I,children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(C,{id:"password",type:y?"text":"password",value:x,onChange:t=>R(t.target.value),label:"Password",placeholder:"Enter your password",endAdornment:e.jsx(se,{position:"end",children:e.jsx(te,{"aria-label":"toggle password visibility",onClick:Z,onMouseDown:K,edge:"end",children:y?e.jsx(ue,{}):e.jsx(ce,{})})})}),I&&e.jsx(h,{children:I})]}),D&&e.jsx(F,{severity:"error",sx:{mt:2},children:D}),U&&e.jsx(F,{severity:"success",sx:{mt:2},children:G}),e.jsx(re,{color:"primary",variant:"contained",size:"large",fullWidth:!0,type:"submit",onClick:Y,disabled:W,sx:{py:1.5,fontWeight:"bold",background:"linear-gradient(45deg, #667eea, #764ba2)","&:hover":{background:"linear-gradient(45deg, #5a67d8, #667eea)"}},children:W?e.jsx(ae,{size:24,color:"inherit"}):"Sign In"})]}),p]})},xe=({setIsAuthenticated:n,setUser:p})=>e.jsx(ne,{title:"Login",description:"this is Login page",children:e.jsx(P,{sx:{position:"relative","&:before":{content:'""',background:"radial-gradient(#d2f1df, #d3d7fa, #bad8f4)",backgroundSize:"400% 400%",animation:"gradient 15s ease infinite",position:"absolute",height:"100%",width:"100%",opacity:"0.3"}},children:e.jsx(N,{container:!0,spacing:0,justifyContent:"center",sx:{height:"100vh"},children:e.jsx(N,{item:!0,xs:12,sm:12,lg:4,xl:3,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(ie,{elevation:9,sx:{p:4,zIndex:1,width:"100%",maxWidth:"500px"},children:[e.jsx(P,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(de,{})}),e.jsx(me,{setIsAuthenticated:n,setUser:p,subtext:e.jsx(o,{variant:"subtitle1",textAlign:"center",color:"textSecondary",mb:1,children:"Empower Women. Buy Local."}),subtitle:e.jsxs(q,{direction:"row",spacing:1,justifyContent:"center",mt:3,children:[e.jsx(o,{color:"textSecondary",variant:"body1",fontWeight:"500",children:"New to BasadiCore?"}),e.jsx(o,{component:le,to:"/auth/register",variant:"body1",fontWeight:"500",sx:{textDecoration:"none",color:"primary.main",ml:1,cursor:"pointer"},children:"Request Access"})]})})]})})})})});export{xe as default};
