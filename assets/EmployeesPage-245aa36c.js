import{r as o,h as le,j as ce,q as de,aE as xe,k as e,_ as Y,aF as he,aG as ge,aH as X,a0 as $,ap as pe,aq as be,P as _,B as s,aI as F,T as n,z as P,a8 as g,a9 as Z,aa as M,I as fe,ab as ue,A as K,at as J,v as me,w as H,ac as je,ae as ye,ad as ve,af as we,ag as Se,ah as Ce,a3 as G,az as Ee,ao as _e,av as T,a1 as E,a4 as ke,aJ as We,aK as Re,aL as Ae,aM as Ie,aN as Pe,aO as ze}from"./index-ed8ecba8.js";import{M as Te}from"./LinearProgress-d63a09e5.js";import{B as Me,T as $e}from"./Business-8dda1395.js";const De=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],He={entering:{transform:"none"},entered:{transform:"none"}},Le=o.forwardRef(function(h,c){const i=le(),m={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:f,appear:j=!0,children:d,easing:p,in:l,onEnter:v,onEntered:y,onEntering:k,onExit:W,onExited:R,onExiting:u,style:x,timeout:w=m,TransitionComponent:D=he}=h,O=ce(h,De),A=o.useRef(null),z=de(A,xe(d),c),S=a=>b=>{if(a){const C=A.current;b===void 0?a(C):a(C,b)}},V=S(k),I=S((a,b)=>{ge(a);const C=X({style:x,timeout:w,easing:p},{mode:"enter"});a.style.webkitTransition=i.transitions.create("transform",C),a.style.transition=i.transitions.create("transform",C),v&&v(a,b)}),B=S(y),U=S(u),N=S(a=>{const b=X({style:x,timeout:w,easing:p},{mode:"exit"});a.style.webkitTransition=i.transitions.create("transform",b),a.style.transition=i.transitions.create("transform",b),W&&W(a)}),q=S(R),r=a=>{f&&f(A.current,a)};return e.jsx(D,Y({appear:j,in:l,nodeRef:A,onEnter:I,onEntered:B,onEntering:V,onExit:N,onExited:q,onExiting:U,addEndListener:r,timeout:w},O,{children:(a,b)=>o.cloneElement(d,Y({style:Y({transform:"scale(0)",visibility:a==="exited"&&!l?"hidden":void 0},He[a],x,d.props.style),ref:z},b))}))}),Fe=Le,se=$(e.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),ae=$(e.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email"),Oe=$(e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),Ve=$(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People"),Be=$(e.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone");var Q={},Ue=be;Object.defineProperty(Q,"__esModule",{value:!0});var oe=Q.default=void 0,Ne=Ue(pe()),qe=e;oe=Q.default=(0,Ne.default)((0,qe.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");const ee=["#8e99f3","#f48fb1","#80cbc4","#ffd54f","#a1887f","#90caf9","#ce93d8","#ffab91"],Ye=({onView:t,onEdit:h,refreshTrigger:c})=>{const[i,m]=o.useState([]),[f,j]=o.useState({}),[d,p]=o.useState(!1),[l,v]=o.useState(""),[y,k]=o.useState(null),[W,R]=o.useState(""),[u,x]=o.useState(!1),[w,D]=o.useState(!1),[O,A]=o.useState(""),z=async()=>{try{const r=await T.get("/api/employees",{withCredentials:!0});m(r.data)}catch{m([])}};o.useEffect(()=>{z()},[]),o.useEffect(()=>{c&&z()},[c]);const S=()=>{x(r=>!r),z()},V=(r,a)=>{j(b=>({...b,[a]:r.currentTarget}))},I=r=>{j(a=>({...a,[r]:null}))},B=r=>{k(r),v("archive"),R(""),p(!0)},U=r=>{k(r),v("restore"),R(""),p(!0)},N=async()=>{var r,a;if(y)try{l==="archive"?(await T.put(`/api/employees/${y.employee_id}/archive`,{},{withCredentials:!0}),A("Employee archived successfully")):l==="restore"&&(await T.put(`/api/employees/${y.employee_id}/restore`,{},{withCredentials:!0}),A("Employee restored successfully")),D(!0),p(!1),z()}catch(b){R(((a=(r=b.response)==null?void 0:r.data)==null?void 0:a.error)||"Failed to perform action.")}},q=i.filter(r=>u?r.employment_status==="archived":r.employment_status!=="archived");return e.jsxs(e.Fragment,{children:[e.jsx(_,{sx:{p:3,mb:3,borderRadius:3,background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0,0,0,0.1)",border:"1px solid rgba(255,255,255,0.2)"},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(F,{sx:{color:"#667eea",fontSize:32}}),e.jsxs(s,{children:[e.jsx(n,{variant:"h6",sx:{fontWeight:"bold",color:"#2d3748"},children:u?"Archived Employees":"Active Team Members"}),e.jsx(n,{variant:"body2",sx:{color:"#64748b"},children:u?"Previously archived employees":"Current active workforce"})]})]}),e.jsx(P,{variant:"contained",onClick:S,sx:{py:1.5,px:4,fontWeight:"bold",borderRadius:2,textTransform:"none",background:u?"linear-gradient(45deg, #48bb78, #68d391)":"linear-gradient(45deg, #667eea, #764ba2)",color:"white",boxShadow:u?"0 4px 16px rgba(72, 187, 120, 0.3)":"0 4px 16px rgba(102, 126, 234, 0.3)","&:hover":{background:u?"linear-gradient(45deg, #38a169, #48bb78)":"linear-gradient(45deg, #5a67d8, #667eea)",transform:"translateY(-2px)",boxShadow:u?"0 8px 25px rgba(72, 187, 120, 0.4)":"0 8px 25px rgba(102, 126, 234, 0.4)"}},children:u?"Show Active Employees":"Show Archived Employees"})]})}),e.jsx(g,{container:!0,spacing:3,sx:{mt:1,mb:2},children:q.map((r,a)=>{var b,C;return e.jsx(g,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(Fe,{in:!0,timeout:300+a*100,children:e.jsxs(Z,{sx:{borderRadius:3,minHeight:380,width:"100%",display:"flex",flexDirection:"column",position:"relative",p:0,overflow:"hidden",background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)",boxShadow:"0 10px 30px rgba(0,0,0,0.1)",border:"1px solid rgba(255,255,255,0.3)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-8px)",boxShadow:"0 20px 40px rgba(0,0,0,0.15)","& .card-header":{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}},children:[e.jsxs(s,{className:"card-header",sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",p:2,position:"relative",transition:"all 0.3s ease"},children:[e.jsx(M,{label:r.employment_status==="archived"?"Archived":"Active",size:"small",sx:{position:"absolute",top:8,left:8,bgcolor:r.employment_status==="archived"?"#ff6b6b":"#51cf66",color:"white",fontWeight:"bold",fontSize:"10px"}}),e.jsx(fe,{"aria-label":"more",onClick:ie=>V(ie,a),size:"small",sx:{position:"absolute",top:8,right:8,bgcolor:"rgba(255,255,255,0.2)",color:"white","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},children:e.jsx(ue,{})}),e.jsx(s,{sx:{display:"flex",justifyContent:"center",mt:1},children:e.jsxs(K,{sx:{bgcolor:ee[a%ee.length],width:70,height:70,fontSize:28,fontWeight:700,border:"4px solid rgba(255,255,255,0.3)",boxShadow:"0 8px 16px rgba(0,0,0,0.2)"},children:[(b=r.first_name)==null?void 0:b[0],(C=r.last_name)==null?void 0:C[0]]})}),e.jsxs(s,{sx:{textAlign:"center",mt:2},children:[e.jsxs(n,{variant:"h6",sx:{fontWeight:"bold",color:"white",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:[r.first_name," ",r.last_name]}),e.jsx(n,{variant:"subtitle2",sx:{color:"rgba(255,255,255,0.9)",fontWeight:"500"},children:r.role})]})]}),e.jsx(J,{sx:{flexGrow:1,width:"100%",p:3,background:"rgba(255,255,255,0.95)"},children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(se,{sx:{color:"#667eea",fontSize:20}}),e.jsxs(s,{children:[e.jsx(n,{variant:"caption",sx:{color:"#64748b",fontWeight:"bold"},children:"Hired Date"}),e.jsx(n,{variant:"body2",sx:{fontWeight:"500"},children:r.hired_date?new Date(r.hired_date).toLocaleDateString():"Not specified"})]})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(ae,{sx:{color:"#48bb78",fontSize:20}}),e.jsxs(s,{sx:{flex:1,minWidth:0},children:[e.jsx(n,{variant:"caption",sx:{color:"#64748b",fontWeight:"bold"},children:"Email"}),e.jsx(n,{variant:"body2",sx:{fontWeight:"500",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.email})]})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Be,{sx:{color:"#ed8936",fontSize:20}}),e.jsxs(s,{children:[e.jsx(n,{variant:"caption",sx:{color:"#64748b",fontWeight:"bold"},children:"Phone"}),e.jsx(n,{variant:"body2",sx:{fontWeight:"500"},children:r.cell_no})]})]}),e.jsx(s,{sx:{display:"flex",justifyContent:"center",mt:1},children:e.jsx(M,{label:r.employment_type||"Not specified",size:"small",sx:{bgcolor:r.employment_type==="Permanent"?"#e3f2fd":"#fff3e0",color:r.employment_type==="Permanent"?"#1976d2":"#f57c00",fontWeight:"bold",border:r.employment_type==="Permanent"?"1px solid #1976d2":"1px solid #f57c00"}})})]})}),e.jsxs(me,{anchorEl:f[a],open:!!f[a],onClose:()=>I(a),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)"}},children:[e.jsxs(H,{onClick:()=>{I(a),t&&t(r)},sx:{gap:1.5,py:1.5,px:2,"&:hover":{bgcolor:"rgba(102, 126, 234, 0.1)",color:"#667eea"}},children:[e.jsx(oe,{sx:{color:"#667eea",fontSize:20}}),e.jsx(n,{sx:{fontWeight:"500"},children:"View Details"})]}),e.jsxs(H,{onClick:()=>{I(a),h&&h(r)},sx:{gap:1.5,py:1.5,px:2,"&:hover":{bgcolor:"rgba(72, 187, 120, 0.1)",color:"#48bb78"}},children:[e.jsx(je,{sx:{color:"#48bb78",fontSize:20}}),e.jsx(n,{sx:{fontWeight:"500"},children:"Update"})]}),r.employment_status==="archived"?e.jsxs(H,{onClick:()=>{I(a),U(r)},sx:{gap:1.5,py:1.5,px:2,bgcolor:"#48bb78",color:"white",fontWeight:"bold","&:hover":{bgcolor:"#38a169"}},children:[e.jsx(ye,{sx:{color:"white",fontSize:20}}),e.jsx(n,{sx:{fontWeight:"bold"},children:"Restore"})]}):e.jsxs(H,{onClick:()=>{I(a),B(r)},sx:{gap:1.5,py:1.5,px:2,"&:hover":{bgcolor:"rgba(229, 57, 53, 0.1)",color:"#e53935"}},children:[e.jsx(ve,{sx:{color:"#e53935",fontSize:20}}),e.jsx(n,{sx:{fontWeight:"500"},children:"Archive"})]})]})]})})},r.employee_id||r.id)})}),e.jsxs(we,{open:d,onClose:()=>p(!1),children:[e.jsx(Se,{children:l==="archive"?"Archive Employee":"Restore Employee"}),e.jsxs(Ce,{children:[l==="archive"?e.jsxs(e.Fragment,{children:[e.jsx(G,{severity:"warning",sx:{mb:2},children:"Are you sure you want to archive this employee?"}),e.jsxs("ul",{children:[e.jsx("li",{children:"You cannot archive an employee with active tasks."}),e.jsx("li",{children:"Archived employees can still be assigned new tasks."})]})]}):e.jsx(G,{severity:"info",sx:{mb:2},children:"Are you sure you want to restore this employee?"}),W&&e.jsx(G,{severity:"error",sx:{mt:2},children:W})]}),e.jsxs(Ee,{children:[e.jsx(P,{onClick:()=>p(!1),children:"Cancel"}),e.jsx(P,{onClick:N,color:l==="archive"?"error":"success",variant:"contained",sx:l==="restore"?{backgroundColor:"#43a047",color:"#fff","&:hover":{backgroundColor:"#388e3c"}}:{},children:l==="archive"?"Archive":"Restore"})]})]}),e.jsx(_e,{open:w,autoHideDuration:3e3,onClose:()=>D(!1),message:O,anchorOrigin:{vertical:"top",horizontal:"center"}})]})},Ge=({employee:t,onUpdate:h,onCancel:c})=>{const[i,m]=o.useState({email:t.email||"",cellNo:t.cell_no||"",emergencyContact:t.emergency_contact||"",street:t.street||"",province:t.province||"",city:t.city||"",postalCode:t.postal_code||"",hourlyRate:t.hourly_rate||""}),[f,j]=o.useState(!1),[d,p]=o.useState(""),l=y=>{m({...i,[y.target.name]:y.target.value})},v=async y=>{y.preventDefault(),j(!0),p("");try{await h(i)}catch{p("Failed to update employee.")}j(!1)};return e.jsxs(_,{sx:{p:3,maxWidth:500,mx:"auto"},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Update Employee Details"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs(g,{container:!0,spacing:2,children:[e.jsx(g,{item:!0,xs:12,children:e.jsx(E,{label:"Email",name:"email",value:i.email,onChange:l,fullWidth:!0,required:!0,type:"email"})}),e.jsx(g,{item:!0,xs:12,children:e.jsx(E,{label:"Cell No",name:"cellNo",value:i.cellNo,onChange:l,fullWidth:!0,required:!0})}),e.jsx(g,{item:!0,xs:12,children:e.jsx(E,{label:"Emergency Contact",name:"emergencyContact",value:i.emergencyContact,onChange:l,fullWidth:!0})}),e.jsx(g,{item:!0,xs:12,children:e.jsx(E,{label:"Street",name:"street",value:i.street,onChange:l,fullWidth:!0})}),e.jsx(g,{item:!0,xs:6,children:e.jsx(E,{label:"Province",name:"province",value:i.province,onChange:l,fullWidth:!0})}),e.jsx(g,{item:!0,xs:6,children:e.jsx(E,{label:"City",name:"city",value:i.city,onChange:l,fullWidth:!0})}),e.jsx(g,{item:!0,xs:6,children:e.jsx(E,{label:"Postal Code",name:"postalCode",value:i.postalCode,onChange:l,fullWidth:!0})}),e.jsx(g,{item:!0,xs:6,children:e.jsx(E,{label:"Hourly Rate",name:"hourlyRate",value:i.hourlyRate,onChange:l,fullWidth:!0,type:"number",inputProps:{min:0,step:"0.01"}})})]}),d&&e.jsx(n,{color:"error",sx:{mt:2},children:d}),e.jsxs(s,{sx:{mt:3,display:"flex",gap:2},children:[e.jsx(P,{type:"submit",variant:"contained",color:"primary",disabled:f,children:"Update"}),e.jsx(P,{variant:"outlined",color:"secondary",onClick:c,disabled:f,children:"Cancel"})]})]})]})},te=["#8e99f3","#f48fb1","#80cbc4","#ffd54f","#a1887f","#90caf9","#ce93d8","#ffab91"];function Ze(t){let h=0;if(t)for(let c=0;c<t.length;c++)h+=t.charCodeAt(c);return te[h%te.length]}function re(t){return t<30?"#e53935":t<51?"#ffb300":t<76?"#81c784":"#388e3c"}function ne(t){return t?new Date(t).toISOString().slice(0,10):""}const L=["#8e99f3","#81c784","#ffd54f","#f48fb1","#ffab91","#90caf9","#ce93d8","#a1887f"],Je=({employee:t,onClose:h})=>{const[c,i]=o.useState({projects:[],project_score:0});if(o.useEffect(()=>{t!=null&&t.employee_id&&T.get(`${ke}/api/employees/${t.employee_id}/project-stats`,{withCredentials:!0}).then(d=>i(d.data)).catch(()=>i({projects:[],project_score:0}))},[t]),!t)return null;const m=`${t.street}, ${t.city}, ${t.province}, ${t.postal_code}`,f=`https://www.google.com/maps?q=${encodeURIComponent(m)}&output=embed`,j=Ze(t.first_name+t.last_name);return e.jsx(s,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",minHeight:"100vh",p:4},children:e.jsxs(_,{sx:{p:0,maxWidth:1200,mx:"auto",mt:2,borderRadius:3,overflow:"hidden",background:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",border:"1px solid rgba(255,255,255,0.2)"},children:[e.jsx(s,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",p:4,color:"white",position:"relative"},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:3},children:[e.jsxs(K,{sx:{bgcolor:j,width:100,height:100,fontSize:42,fontWeight:700,border:"4px solid rgba(255,255,255,0.3)",boxShadow:"0 8px 25px rgba(0,0,0,0.2)"},children:[t.first_name[0],t.last_name[0]]}),e.jsxs(s,{sx:{flex:1},children:[e.jsxs(n,{variant:"h4",sx:{fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",mb:1},children:[t.first_name," ",t.last_name]}),e.jsx(n,{variant:"h6",sx:{color:"rgba(255,255,255,0.9)",fontWeight:"500",mb:2},children:t.role}),e.jsxs(s,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(M,{icon:e.jsx(We,{sx:{color:"white !important"}}),label:`ID: ${t.employee_id}`,sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontWeight:"bold"}}),e.jsx(M,{icon:e.jsx(se,{sx:{color:"white !important"}}),label:`Born: ${ne(t.date_of_birth)}`,sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontWeight:"bold"}})]})]}),e.jsxs(s,{sx:{textAlign:"center"},children:[e.jsx(n,{variant:"body2",sx:{fontWeight:600,color:"rgba(255,255,255,0.9)",mb:1},children:"Project Score"}),e.jsxs(s,{sx:{width:90,height:90,borderRadius:"50%",border:`6px solid ${re(c.project_score)}`,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:28,color:re(c.project_score),bgcolor:"rgba(255,255,255,0.95)",boxShadow:"0 4px 16px rgba(0,0,0,0.2)"},children:[c.project_score||0,"%"]})]})]})}),e.jsxs(s,{sx:{p:4},children:[e.jsxs(g,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(Z,{sx:{background:"linear-gradient(145deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:2,boxShadow:"0 8px 25px rgba(102, 126, 234, 0.3)"},children:e.jsxs(J,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(ae,{sx:{fontSize:28}}),e.jsx(n,{variant:"h6",sx:{fontWeight:"bold"},children:"Contact Details"})]}),e.jsxs(n,{variant:"body1",sx:{mb:1,opacity:.9},children:["📧 ",t.email]}),e.jsxs(n,{variant:"body1",sx:{opacity:.9},children:["📱 ",t.cell_no]})]})})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(Z,{sx:{background:"linear-gradient(145deg, #48bb78 0%, #38a169 100%)",color:"white",borderRadius:2,boxShadow:"0 8px 25px rgba(72, 187, 120, 0.3)"},children:e.jsxs(J,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(F,{sx:{fontSize:28}}),e.jsx(n,{variant:"h6",sx:{fontWeight:"bold"},children:"Employment"})]}),e.jsxs(n,{variant:"body1",sx:{mb:1,opacity:.9},children:["💼 ",t.employment_type," • ",t.employment_status]}),e.jsxs(n,{variant:"body1",sx:{opacity:.9},children:["R",t.hourly_rate,"/hour"]})]})})})]}),e.jsxs(_,{sx:{p:3,mb:4,borderRadius:2,background:"rgba(255,255,255,0.7)",border:"1px solid rgba(102, 126, 234, 0.2)"},children:[e.jsxs(n,{variant:"h6",sx:{color:"#667eea",fontWeight:"bold",mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(F,{})," Projects Work"]}),c.projects.length===0&&e.jsx(n,{variant:"body2",sx:{mb:2,color:"#64748b"},children:"No project data available."}),c.projects.map((d,p)=>e.jsx(s,{sx:{mb:2},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(s,{sx:{width:20,height:20,bgcolor:L[p%L.length],borderRadius:"6px",mr:2,boxShadow:"0 2px 8px rgba(0,0,0,0.15)"}}),e.jsx(n,{variant:"body1",sx:{minWidth:160,fontWeight:"600",color:"#2d3748"},children:d.project_name}),e.jsx(Te,{variant:"determinate",value:d.work_percentage,sx:{flex:1,mx:3,height:12,borderRadius:6,bgcolor:"rgba(0,0,0,0.1)","& .MuiLinearProgress-bar":{bgcolor:L[p%L.length],borderRadius:6}}}),e.jsxs(n,{variant:"body1",sx:{minWidth:50,fontWeight:"bold",color:"#2d3748"},children:[Math.round(d.work_percentage),"%"]})]})},d.project_id))]}),e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,md:6,children:e.jsxs(_,{sx:{p:3,borderRadius:2,background:"linear-gradient(145deg, #ed8936 0%, #dd7324 100%)",color:"white",boxShadow:"0 8px 25px rgba(237, 137, 54, 0.3)"},children:[e.jsxs(n,{variant:"h6",sx:{fontWeight:"bold",mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(F,{})," Work Information"]}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(n,{variant:"body1",children:[e.jsx("strong",{children:"Hourly Rate:"})," R",t.hourly_rate]}),e.jsxs(n,{variant:"body1",children:["📋 ",e.jsx("strong",{children:"Employment Type:"})," ",t.employment_type]}),e.jsxs(n,{variant:"body1",children:["✅ ",e.jsx("strong",{children:"Status:"})," ",t.employment_status]}),e.jsxs(n,{variant:"body1",children:["📅 ",e.jsx("strong",{children:"Hired:"})," ",ne(t.hired_date)]})]})]})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsxs(_,{sx:{p:3,borderRadius:2,background:"linear-gradient(145deg, #9f7aea 0%, #805ad5 100%)",color:"white",boxShadow:"0 8px 25px rgba(159, 122, 234, 0.3)"},children:[e.jsxs(n,{variant:"h6",sx:{fontWeight:"bold",mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Oe,{})," Location"]}),e.jsx(s,{sx:{bgcolor:"rgba(255,255,255,0.1)",borderRadius:2,p:1,minHeight:140,border:"1px solid rgba(255,255,255,0.2)"},children:e.jsx("iframe",{title:"map",width:"100%",height:"140",frameBorder:"0",src:f,style:{border:0,borderRadius:8},allowFullScreen:!0})})]})})]})]}),e.jsx(s,{sx:{p:4,pt:0,textAlign:"center"},children:e.jsx(P,{variant:"contained",onClick:h,size:"large",sx:{py:1.5,px:4,fontWeight:"bold",borderRadius:2,background:"linear-gradient(45deg, #667eea, #764ba2)",color:"white",textTransform:"none",minWidth:150,boxShadow:"0 4px 16px rgba(102, 126, 234, 0.3)","&:hover":{background:"linear-gradient(45deg, #5a67d8, #667eea)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(102, 126, 234, 0.4)"}},children:"Close"})})]})})};function Ke(){var u;const[t,h]=o.useState(!1),[c,i]=o.useState([]),[m,f]=o.useState(null),[j,d]=o.useState(null),[p,l]=o.useState(0);o.useEffect(()=>{T.get("/api/employees",{withCredentials:!0}).then(x=>{i(x.data)}).catch(x=>{console.error("Failed to fetch employees:",x)})},[]);const v=x=>{f(x)},y=async x=>{await T.put(`/api/employees/${m.employee_id}`,x,{withCredentials:!0}),l(w=>w+1),f(null)},k=()=>{f(null)},W=x=>{l(w=>w+1),h(!1)},R=x=>{d(x)};return e.jsxs(s,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",p:0},children:[e.jsxs(s,{sx:{bgcolor:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",borderBottom:"3px solid #667eea",p:4,mb:0,boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:3,mb:3},children:[e.jsx(K,{sx:{bgcolor:"#667eea",width:64,height:64,boxShadow:"0 6px 16px rgba(102, 126, 234, 0.3)"},children:e.jsx(Ve,{sx:{fontSize:36,color:"white"}})}),e.jsxs(s,{sx:{textAlign:"center"},children:[e.jsx(n,{variant:"h3",sx:{fontWeight:"bold",background:"linear-gradient(45deg, #667eea, #764ba2)",backgroundClip:"text",color:"transparent",mb:1},children:"Employee Management"}),e.jsx(n,{variant:"h6",sx:{color:"#64748b",fontWeight:"500"},children:"Manage your team members and workforce"}),e.jsxs(n,{variant:"body2",sx:{color:"#94a3b8",fontWeight:"400",mt:1},children:["Access Level: ",((u=Ae())==null?void 0:u.role)||"Unknown"," • Employees Module"]})]})]}),e.jsxs(_,{sx:{p:3,borderRadius:3,background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0,0,0,0.1)",border:"1px solid rgba(255,255,255,0.2)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Me,{sx:{color:"#667eea",fontSize:28}}),e.jsxs(s,{children:[e.jsx(n,{variant:"h6",sx:{fontWeight:"bold",color:"#2d3748"},children:"Team Overview"}),e.jsxs(s,{sx:{display:"flex",gap:2,mt:1},children:[e.jsx(M,{label:`Total Employees: ${c.length}`,sx:{bgcolor:"#667eea",color:"white",fontWeight:"bold"}}),e.jsx(M,{label:`Active: ${c.filter(x=>x.employment_status==="active").length}`,sx:{bgcolor:"#48bb78",color:"white",fontWeight:"bold"}})]})]})]}),e.jsx(Ie,{permission:"employees",children:e.jsx($e,{title:"Add New Employee",children:e.jsx(P,{variant:"contained",startIcon:e.jsx(Pe,{}),size:"large",onClick:()=>h(!0),sx:{py:1.8,px:4,fontWeight:"bold",fontSize:16,borderRadius:2,minWidth:200,background:"linear-gradient(45deg, #ed8936, #f6ad55)",color:"white",textTransform:"none",boxShadow:"0 4px 16px rgba(237, 137, 54, 0.3)","&:hover":{background:"linear-gradient(45deg, #dd7324, #ed8936)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(237, 137, 54, 0.4)"}},children:"Add Employee"})})})]})]}),e.jsx(s,{sx:{p:4,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",minHeight:"calc(100vh - 280px)"},children:e.jsx(_,{sx:{p:4,borderRadius:3,background:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",border:"1px solid rgba(255,255,255,0.2)",minHeight:"500px"},children:e.jsx("div",{children:j?e.jsx(Je,{employee:j,onClose:()=>d(null)}):m?e.jsx(Ge,{employee:m,onUpdate:y,onCancel:k}):e.jsx(Ye,{onEdit:v,onView:R,refreshTrigger:p})})})}),e.jsx(ze,{open:t,onClose:()=>h(!1),onSave:W})]})}const tt=Re(Ke,"employees");export{tt as default};
