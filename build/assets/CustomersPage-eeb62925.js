import{i as B,j as e,B as l,f as o,A as te,P as oe,a0 as u,T as P,$ as Y,M as W,v as be,a8 as Ce,e as V,o as Se,q as we,K as Ne,I as Pe,r as Ae,a3 as ie,a1 as Q,a6 as ee,D as ke,F as We,a9 as Oe,t as _e,g as Te,h as Ee,k as Le,l as ne,m as N,n as ze,N as De,s as Re,S as Fe,aa as Be}from"./mui-051d3b2b.js";import{r as c}from"./vendor-0625b040.js";import{r as q,A as L,w as qe,a as He,d as Ve}from"./index-06d060e6.js";import{P as ye}from"./PageContainer-a391e3ef.js";import{d as Ie}from"./LocationOn-57abfc5f.js";import{a as Ue,d as Ge}from"./Archive-52c9146e.js";import{d as Ye,a as Ke}from"./MoreVert-f8e689fd.js";import{d as Xe}from"./Search-4e890fc8.js";import{d as Je}from"./Close-5fff7674.js";import{a as ve}from"./utils-f1b31201.js";import{P as Ze}from"./PermissionGate-e327a3ed.js";import"./index-2a8f5de9.js";var de={},Qe=B;Object.defineProperty(de,"__esModule",{value:!0});var re=de.default=void 0,et=Qe(q()),tt=e;re=de.default=(0,et.default)((0,tt.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");var ce={},rt=B;Object.defineProperty(ce,"__esModule",{value:!0});var se=ce.default=void 0,st=rt(q()),ot=e;se=ce.default=(0,st.default)((0,ot.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email");var ue={},at=B;Object.defineProperty(ue,"__esModule",{value:!0});var he=ue.default=void 0,nt=at(q()),it=e;he=ue.default=(0,nt.default)((0,it.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone");var xe={},lt=B;Object.defineProperty(xe,"__esModule",{value:!0});var fe=xe.default=void 0,dt=lt(q()),ct=e;fe=xe.default=(0,dt.default)((0,ct.jsx)("path",{d:"M12 6c1.11 0 2-.9 2-2 0-.38-.1-.73-.29-1.03L12 0l-1.71 2.97c-.19.3-.29.65-.29 1.03 0 1.1.9 2 2 2m4.6 9.99-1.07-1.07-1.08 1.07c-1.3 1.3-3.58 1.31-4.89 0l-1.07-1.07-1.09 1.07C6.75 16.64 5.88 17 4.96 17c-.73 0-1.4-.23-1.96-.61V21c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-4.61c-.56.38-1.23.61-1.96.61-.92 0-1.79-.36-2.44-1.01M18 9h-5V7h-2v2H6c-1.66 0-3 1.34-3 3v1.54c0 1.08.88 1.96 1.96 1.96.52 0 1.02-.2 1.38-.57l2.14-2.13 2.13 2.13c.74.74 2.03.74 2.77 0l2.14-2.13 2.13 2.13c.37.37.86.57 1.38.57 1.08 0 1.96-.88 1.96-1.96V12C21 10.34 19.66 9 18 9"}),"Cake");const ut=["Male","Female","Other","Prefer not to say"],ht=({customer:g,onSubmit:O,onCancel:t})=>{const[a,y]=c.useState({firstName:"",lastName:"",email:"",countryCode:"+27",phoneNumber:"",streetAddress:"",city:"",stateProvince:"",postalCode:"",country:null,addressCountry:null,dateOfBirth:"",gender:""}),[x,_]=c.useState({}),[r,A]=c.useState(""),[h,T]=c.useState([]),[$,f]=c.useState([]),[m,C]=c.useState([]),[z,I]=c.useState(!1),[H,b]=c.useState(!1),[p,j]=c.useState(!1);c.useEffect(()=>{(async()=>{try{const d=await(await fetch("https://restcountries.com/v3.1/all?fields=name,cca2,idd")).json();if(!Array.isArray(d))return;const v=d.map(S=>{var F,G;return{name:S.name.common,code:S.cca2,callingCode:(F=S.idd)!=null&&F.root?`${S.idd.root}${((G=S.idd.suffixes)==null?void 0:G[0])||""}`:""}});T(v.sort((S,F)=>S.name.localeCompare(F.name)))}catch(i){console.error("Failed to fetch countries",i)}})()},[]);const D=(n,i)=>{y(i?d=>({...d,country:i,countryCode:i.callingCode,addressCountry:i}):d=>({...d,country:null,countryCode:"",addressCountry:null}))},U=(n,i)=>{i&&y(d=>({...d,addressCountry:i,stateProvince:"",city:""}))};c.useEffect(()=>{if(!a.countryCode||!h.length)return;const n=a.countryCode.startsWith("+")?a.countryCode:`+${a.countryCode}`,i=h.find(d=>d.callingCode===n);i&&(!a.country||a.country.code!==i.code)&&y(d=>({...d,country:i,addressCountry:i}))},[a.countryCode,h]),c.useEffect(()=>{if(!a.addressCountry)return;(async()=>{I(!0),f([]),y(i=>({...i,stateProvince:"",city:""}));try{const d=await(await fetch(`https://wft-geo-db.p.rapidapi.com/v1/geo/countries/${a.addressCountry.code}/regions`,{headers:{"X-RapidAPI-Key":{}.VITE_GEODB_API_KEY,"X-RapidAPI-Host":"wft-geo-db.p.rapidapi.com"}})).json();f(d.data||[])}catch(i){console.error(i)}I(!1)})()},[a.addressCountry]),c.useEffect(()=>{if(!a.stateProvince||!a.addressCountry)return;const n=$.find(d=>d.name===a.stateProvince);if(!n)return;(async()=>{b(!0),C([]);try{const v=await(await fetch(`https://wft-geo-db.p.rapidapi.com/v1/geo/regions/${n.code}/cities?limit=50`,{headers:{"X-RapidAPI-Key":{}.VITE_GEODB_API_KEY,"X-RapidAPI-Host":"wft-geo-db.p.rapidapi.com"}})).json();C(v.data||[])}catch(d){console.error(d)}b(!1)})()},[a.stateProvince,$,a.addressCountry]),c.useEffect(()=>{if(!a.postalCode||!a.addressCountry)return;(async()=>{j(!0);try{const i=await fetch(`https://api.zippopotam.us/${a.addressCountry.code.toLowerCase()}/${a.postalCode}`);if(!i.ok)return;const d=await i.json();if(d.places&&d.places.length>0){const v=d.places[0];y(S=>({...S,city:v["place name"]||S.city,stateProvince:v.state||S.stateProvince}))}}catch(i){console.error(i)}j(!1)})()},[a.postalCode,a.addressCountry]),c.useEffect(()=>{if(g&&h.length){const n=h.find(d=>d.code===g.countryCode)||null,i=h.find(d=>d.code===g.addressCountryCode)||null;y({firstName:g.firstName||"",lastName:g.lastName||"",email:g.email||"",countryCode:g.phonePrefix||"+27",phoneNumber:g.phoneNumber||"",streetAddress:g.streetAddress||"",city:g.city||"",stateProvince:g.stateProvince||"",postalCode:g.postalCode||"",country:n,addressCountry:i||n,dateOfBirth:g.dateOfBirth||"",gender:g.gender||""})}},[g,h]);const M=n=>{const{name:i,value:d}=n.target;y(v=>({...v,[i]:d})),x[i]&&_(v=>({...v,[i]:""}))},R=()=>{const n={};if(a.firstName.trim()||(n.firstName="First name is required"),a.lastName.trim()||(n.lastName="Last name is required"),a.email.trim()?/\S+@\S+\.\S+/.test(a.email)||(n.email="Email is invalid"):n.email="Email is required",a.phoneNumber.trim()||(n.phoneNumber="Phone number is required"),/^\d+$/.test(a.phoneNumber.replace(/[\s-]/g,""))||(n.phoneNumber="Phone number should contain only digits"),a.streetAddress.trim()||(n.streetAddress="Street address is required"),a.city.trim()||(n.city="City is required"),a.addressCountry||(n.addressCountry="Country is required"),a.stateProvince.trim()||(n.stateProvince="State/Province is required"),!a.dateOfBirth)n.dateOfBirth="Date of birth is required";else{const i=new Date(a.dateOfBirth),v=new Date().getFullYear()-i.getFullYear();(v<16||v>120)&&(n.dateOfBirth="Please enter a valid birth date (16-120 years old)")}return a.gender||(n.gender="Gender is required"),_(n),Object.keys(n).length===0},ae=n=>{var i,d,v;if(n.preventDefault(),A(""),R()){const S={...a,countryCode:((i=a.country)==null?void 0:i.code)||"ZA",phonePrefix:a.countryCode,country:((d=a.country)==null?void 0:d.name)||"South Africa",addressCountry:((v=a.addressCountry)==null?void 0:v.name)||"South Africa"};O(S)}};return e.jsxs(l,{component:"form",onSubmit:ae,sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",p:4,borderRadius:3,boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:4},children:[e.jsx(re,{sx:{fontSize:40,color:"white",mr:2}}),e.jsx(o,{variant:"h4",sx:{color:"white",fontWeight:700,letterSpacing:1,textTransform:"uppercase"},children:g?"Edit Customer":"Add New Customer"})]}),r&&e.jsx(te,{severity:"error",sx:{mb:3,borderRadius:2},children:r}),e.jsx(oe,{sx:{p:4,borderRadius:3,boxShadow:3},children:e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",pb:2,borderBottom:"3px solid #667eea"},children:[e.jsx(re,{sx:{mr:1.5,color:"#667eea",fontSize:28}}),e.jsx(o,{variant:"h6",sx:{fontWeight:700,color:"#667eea"},children:"Personal Information"})]})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(P,{name:"firstName",label:"First Name",value:a.firstName,onChange:M,error:!!x.firstName,helperText:x.firstName,fullWidth:!0,required:!0,sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#667eea"},"&.Mui-focused fieldset":{borderColor:"#667eea"}},"& .MuiInputLabel-root.Mui-focused":{color:"#667eea"}}})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(P,{name:"lastName",label:"Last Name",value:a.lastName,onChange:M,error:!!x.lastName,helperText:x.lastName,fullWidth:!0,required:!0,sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#667eea"},"&.Mui-focused fieldset":{borderColor:"#667eea"}},"& .MuiInputLabel-root.Mui-focused":{color:"#667eea"}}})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(P,{name:"dateOfBirth",label:"Date of Birth",type:"date",value:a.dateOfBirth,onChange:M,error:!!x.dateOfBirth,helperText:x.dateOfBirth,fullWidth:!0,required:!0,InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(Y,{position:"start",children:e.jsx(fe,{sx:{color:"#667eea"}})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#667eea"},"&.Mui-focused fieldset":{borderColor:"#667eea"}},"& .MuiInputLabel-root.Mui-focused":{color:"#667eea"}}})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(P,{name:"gender",label:"Gender",select:!0,value:a.gender,onChange:M,error:!!x.gender,helperText:x.gender,fullWidth:!0,required:!0,sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#667eea"},"&.Mui-focused fieldset":{borderColor:"#667eea"}},"& .MuiInputLabel-root.Mui-focused":{color:"#667eea"}},children:ut.map(n=>e.jsx(W,{value:n,children:n},n))})}),e.jsx(u,{item:!0,xs:12,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",pb:2,mt:2,borderBottom:"3px solid #f093fb"},children:[e.jsx(se,{sx:{mr:1.5,color:"#f093fb",fontSize:28}}),e.jsx(o,{variant:"h6",sx:{fontWeight:700,color:"#f093fb"},children:"Contact Information"})]})}),e.jsx(u,{item:!0,xs:12,children:e.jsx(P,{name:"email",label:"Email Address",type:"email",value:a.email,onChange:M,error:!!x.email,helperText:x.email,fullWidth:!0,required:!0,InputProps:{startAdornment:e.jsx(Y,{position:"start",children:e.jsx(se,{sx:{color:"#f093fb"}})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#f093fb"},"&.Mui-focused fieldset":{borderColor:"#f093fb"}},"& .MuiInputLabel-root.Mui-focused":{color:"#f093fb"}}})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsx(be,{options:h,getOptionLabel:n=>`${n.name} (${n.callingCode})`,value:a.country,onChange:D,isOptionEqualToValue:(n,i)=>(n==null?void 0:n.code)===(i==null?void 0:i.code),renderInput:n=>e.jsx(P,{...n,label:"Country Code",required:!0,sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#f093fb"},"&.Mui-focused fieldset":{borderColor:"#f093fb"}},"& .MuiInputLabel-root.Mui-focused":{color:"#f093fb"}}})})}),e.jsx(u,{item:!0,xs:12,sm:8,children:e.jsx(P,{name:"phoneNumber",label:"Phone Number",value:a.phoneNumber,onChange:M,error:!!x.phoneNumber,helperText:x.phoneNumber,fullWidth:!0,required:!0,InputProps:{startAdornment:e.jsxs(Y,{position:"start",children:[e.jsx(he,{sx:{color:"#f093fb",mr:.5}}),a.countryCode]})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#f093fb"},"&.Mui-focused fieldset":{borderColor:"#f093fb"}},"& .MuiInputLabel-root.Mui-focused":{color:"#f093fb"}}})}),e.jsx(u,{item:!0,xs:12,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",pb:2,mt:2,borderBottom:"3px solid #4facfe"},children:[e.jsx(Ie,{sx:{mr:1.5,color:"#4facfe",fontSize:28}}),e.jsx(o,{variant:"h6",sx:{fontWeight:700,color:"#4facfe"},children:"Address Information"})]})}),e.jsx(u,{item:!0,xs:12,children:e.jsx(P,{name:"streetAddress",label:"Street Address",value:a.streetAddress,onChange:M,error:!!x.streetAddress,helperText:x.streetAddress,fullWidth:!0,required:!0,multiline:!0,rows:2,sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#4facfe"},"&.Mui-focused fieldset":{borderColor:"#4facfe"}},"& .MuiInputLabel-root.Mui-focused":{color:"#4facfe"}}})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(be,{options:h,getOptionLabel:n=>n.name,value:a.addressCountry,onChange:U,isOptionEqualToValue:(n,i)=>(n==null?void 0:n.code)===(i==null?void 0:i.code),renderInput:n=>e.jsx(P,{...n,label:"Country",required:!0,sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#4facfe"},"&.Mui-focused fieldset":{borderColor:"#4facfe"}},"& .MuiInputLabel-root.Mui-focused":{color:"#4facfe"}}})})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(P,{name:"stateProvince",label:"State/Province",value:a.stateProvince,onChange:M,error:!!x.stateProvince,helperText:x.stateProvince,fullWidth:!0,required:!0,sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#4facfe"},"&.Mui-focused fieldset":{borderColor:"#4facfe"}},"& .MuiInputLabel-root.Mui-focused":{color:"#4facfe"}}})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(P,{name:"city",label:"City",value:a.city,onChange:M,error:!!x.city,helperText:x.city,fullWidth:!0,required:!0,sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#4facfe"},"&.Mui-focused fieldset":{borderColor:"#4facfe"}},"& .MuiInputLabel-root.Mui-focused":{color:"#4facfe"}}})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(P,{name:"postalCode",label:"Postal Code",value:a.postalCode,onChange:M,error:!!x.postalCode,helperText:x.postalCode,fullWidth:!0,InputProps:{endAdornment:p?e.jsx(Y,{position:"end",children:e.jsx(Ce,{size:20})}):null},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#4facfe"},"&.Mui-focused fieldset":{borderColor:"#4facfe"}},"& .MuiInputLabel-root.Mui-focused":{color:"#4facfe"}}})}),e.jsx(u,{item:!0,xs:12,children:e.jsxs(l,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:3},children:[e.jsx(V,{variant:"outlined",onClick:t,sx:{minWidth:120,fontWeight:700,letterSpacing:1,borderWidth:2,borderColor:"#667eea",color:"#667eea","&:hover":{borderWidth:2,borderColor:"#764ba2",backgroundColor:"rgba(102, 126, 234, 0.1)"}},children:"Cancel"}),e.jsx(V,{type:"submit",variant:"contained",sx:{minWidth:120,fontWeight:700,letterSpacing:1,background:"linear-gradient(90deg, #667eea 0%, #764ba2 100%)",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",transition:"all 0.3s ease","&:hover":{background:"linear-gradient(90deg, #764ba2 0%, #667eea 100%)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.6)",transform:"translateY(-2px)"}},children:g?"Update Customer":"Add Customer"})]})})]})})]})};var me={},xt=B;Object.defineProperty(me,"__esModule",{value:!0});var le=me.default=void 0,ft=xt(q()),mt=e;le=me.default=(0,ft.default)((0,mt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info");var pe={},pt=B;Object.defineProperty(pe,"__esModule",{value:!0});var Me=pe.default=void 0,gt=pt(q()),jt=e;Me=pe.default=(0,gt.default)((0,jt.jsx)("path",{d:"M20 7h-5V4c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2M9 12c.83 0 1.5.67 1.5 1.5S9.83 15 9 15s-1.5-.67-1.5-1.5S8.17 12 9 12m3 6H6v-.75c0-1 2-1.5 3-1.5s3 .5 3 1.5zm1-9h-2V4h2zm5 7.5h-4V15h4zm0-3h-4V12h4z"}),"Badge");var ge={},bt=B;Object.defineProperty(ge,"__esModule",{value:!0});var $e=ge.default=void 0,yt=bt(q()),vt=e;$e=ge.default=(0,yt.default)((0,vt.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"}),"Public");const Ct=({open:g,onClose:O,customer:t})=>{const[a,y]=c.useState(0),[x,_]=c.useState(0);if(c.useEffect(()=>{if(!t)return;console.log("CustomerProfile received customer:",t);const f=(t==null?void 0:t.id)||(t==null?void 0:t.customerNumber)||(t==null?void 0:t.cust_id);console.log("Fetching stats for customerId:",f),f&&(ve.get(`/api/customers/${f}/amount-spent`).then(m=>{m.data.success&&_(m.data.amountSpent)}),ve.get(`/api/customers/${f}/order-count`).then(m=>{m.data.success&&y(m.data.orderCount)}))},[t]),!t)return null;const r=f=>{if(!f)return"N/A";try{return new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return f}},A=f=>{if(!f)return null;try{const m=new Date(f),C=new Date;let z=C.getFullYear()-m.getFullYear();const I=C.getMonth()-m.getMonth();return(I<0||I===0&&C.getDate()<m.getDate())&&z--,z}catch{return null}},h=()=>{const f=[];return(t.streetAddress||t.streetaddress)&&f.push(t.streetAddress||t.streetaddress),t.city&&f.push(t.city),(t.stateProvince||t.stateprovince)&&f.push(t.stateProvince||t.stateprovince),(t.postalCode||t.postalcode)&&f.push(t.postalCode||t.postalcode),t.country&&f.push(t.country),f.length>0?f.join(", "):"No address provided"},T=()=>{if(t.phoneDisplay)return t.phoneDisplay;if(t.phone)return t.phone;const f=t.countryCode||t.countrycode||"",m=t.phonePrefix||t.phoneprefix||"",C=t.phoneNumber||t.phonenumber||"";return f&&m&&C?`+${f} ${m} ${C}`:m&&C?`${m} ${C}`:C||"N/A"},$=A(t.dateOfBirth||t.dateofbirth);return e.jsxs(Se,{open:g,onClose:O,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:2,maxHeight:"90vh"}},children:[e.jsxs(we,{sx:{bgcolor:"primary.main",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between",pb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Ne,{sx:{width:50,height:50,bgcolor:t.profileColor||t.profilecolor||"#FF6B6B",fontSize:"20px",fontWeight:"bold"},children:t.initials||"UC"}),e.jsxs(l,{children:[e.jsx(o,{variant:"h5",sx:{fontWeight:600,mb:.5},children:t.fullName||t.customerName||t.customername||"Unknown Customer"}),e.jsxs(o,{variant:"body2",sx:{opacity:.9},children:["Customer #",t.cust_id]})]})]}),e.jsx(Pe,{onClick:O,sx:{color:"white"},children:e.jsx(Je,{})})]}),e.jsx(Ae,{sx:{p:0},children:e.jsxs(l,{sx:{p:3},children:[e.jsx(l,{sx:{mb:3,display:"flex",justifyContent:"flex-start"},children:e.jsx(ie,{label:t.status||"Active",sx:{textTransform:"capitalize",backgroundColor:t.statusBackground||t.statusbackground||"#E8F5E8",color:t.statusColor||t.statuscolor||"#4CAF50",border:`1px solid ${t.statusColor||t.statuscolor||"#4CAF50"}`,fontWeight:600,fontSize:"12px",height:28}})}),e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(Q,{sx:{height:"100%"},children:e.jsxs(ee,{children:[e.jsxs(o,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:2,color:"primary.main",fontWeight:600},children:[e.jsx(re,{})," Personal Information"]}),e.jsxs(l,{sx:{space:2},children:[e.jsxs(l,{sx:{mb:2},children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"First Name"}),e.jsx(o,{variant:"body1",children:t.firstName||t.firstname||"N/A"})]}),e.jsxs(l,{sx:{mb:2},children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Last Name"}),e.jsx(o,{variant:"body1",children:t.lastName||t.lastname||"N/A"})]}),e.jsxs(l,{sx:{mb:2},children:[e.jsxs(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,display:"flex",alignItems:"center",gap:.5},children:[e.jsx(fe,{fontSize:"small"})," Date of Birth"]}),e.jsxs(o,{variant:"body1",children:[r(t.dateOfBirth||t.dateofbirth),$&&e.jsxs(o,{component:"span",variant:"body2",color:"text.secondary",sx:{ml:1},children:["(",$," years old)"]})]})]}),e.jsxs(l,{sx:{mb:2},children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Gender"}),e.jsx(o,{variant:"body1",sx:{textTransform:"capitalize"},children:t.gender||"Not specified"})]}),e.jsxs(l,{children:[e.jsxs(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Me,{fontSize:"small"})," Customer ID"]}),e.jsx(o,{variant:"body1",sx:{fontFamily:"monospace",fontWeight:600},children:t.customerNumber||t.customernumber||t.id})]})]})]})})}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(Q,{sx:{height:"100%"},children:e.jsxs(ee,{children:[e.jsxs(o,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:2,color:"primary.main",fontWeight:600},children:[e.jsx(se,{})," Contact Information"]}),e.jsxs(l,{sx:{space:2},children:[e.jsxs(l,{sx:{mb:2},children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Email Address"}),e.jsx(o,{variant:"body1",sx:{wordBreak:"break-word"},children:t.email||"N/A"})]}),e.jsxs(l,{sx:{mb:2},children:[e.jsxs(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,display:"flex",alignItems:"center",gap:.5},children:[e.jsx(he,{fontSize:"small"})," Phone Number"]}),e.jsx(o,{variant:"body1",children:T()})]}),(t.countryCode||t.countrycode)&&e.jsxs(l,{sx:{mb:2},children:[e.jsxs(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600,display:"flex",alignItems:"center",gap:.5},children:[e.jsx($e,{fontSize:"small"})," Country Code"]}),e.jsxs(o,{variant:"body1",children:["+",t.countryCode||t.countrycode]})]})]})]})})}),e.jsx(u,{item:!0,xs:12,children:e.jsx(Q,{children:e.jsxs(ee,{children:[e.jsxs(o,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:2,color:"primary.main",fontWeight:600},children:[e.jsx(Ie,{})," Address Information"]}),e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsxs(l,{children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Street Address"}),e.jsx(o,{variant:"body1",children:t.streetAddress||t.streetaddress||"N/A"})]})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsxs(l,{children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"City"}),e.jsx(o,{variant:"body1",children:t.city||"N/A"})]})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsxs(l,{children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"State/Province"}),e.jsx(o,{variant:"body1",children:t.stateProvince||t.stateprovince||"N/A"})]})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsxs(l,{children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Postal Code"}),e.jsx(o,{variant:"body1",children:t.postalCode||t.postalcode||"N/A"})]})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsxs(l,{children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Country"}),e.jsx(o,{variant:"body1",children:t.country||"N/A"})]})}),e.jsxs(u,{item:!0,xs:12,children:[e.jsx(ke,{sx:{my:1}}),e.jsxs(l,{children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Complete Address"}),e.jsx(oe,{sx:{p:2,bgcolor:"grey.50",mt:1},children:e.jsx(o,{variant:"body1",children:h()})})]})]})]})]})})}),e.jsx(u,{item:!0,xs:12,children:e.jsx(Q,{children:e.jsxs(ee,{children:[e.jsx(o,{variant:"h6",sx:{mb:2,color:"primary.main",fontWeight:600},children:"Additional Information"}),e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,sm:3,children:e.jsxs(l,{children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Total Orders"}),e.jsx(o,{variant:"h4",color:"primary.main",sx:{fontWeight:600},children:a})]})}),e.jsx(u,{item:!0,xs:12,sm:3,children:e.jsxs(l,{children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Amount Spent"}),e.jsxs(o,{variant:"h4",color:"primary.main",sx:{fontWeight:600},children:["R",x.toLocaleString()]})]})}),e.jsx(u,{item:!0,xs:12,sm:3,children:e.jsxs(l,{children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Account Status"}),e.jsx(o,{variant:"body1",sx:{textTransform:"capitalize",fontWeight:600,mt:.5},children:t.status||"Active"})]})}),e.jsx(u,{item:!0,xs:12,sm:3,children:e.jsxs(l,{children:[e.jsx(o,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:"Location"}),e.jsx(o,{variant:"body1",sx:{mt:.5},children:t.location||"N/A"})]})})]})]})})})]})]})})]})},St=({customers:g,onEdit:O,onArchive:t})=>{const[a,y]=c.useState(null),[x,_]=c.useState(g),[r,A]=c.useState(null),[h,T]=c.useState(""),[$,f]=c.useState("name"),[m,C]=c.useState(!1),[z,I]=c.useState(!1),[H,b]=c.useState(""),[p,j]=c.useState(!1),[D,U]=c.useState({open:!1,message:"",severity:"success"});c.useEffect(()=>{_(g)},[g]);const M=(s,k)=>{y(s.currentTarget),A(k)},R=()=>{y(null)},ae=()=>{if(r){const s={id:r.customerNumber||r.id,firstName:r.firstname||r.firstName,lastName:r.lastname||r.lastName,email:r.email,phoneNumber:r.phonenumber||r.phoneNumber,countryCode:r.countrycode||r.countryCode,phonePrefix:r.phoneprefix||r.phonePrefix,streetAddress:r.streetaddress||r.streetAddress,city:r.city,stateProvince:r.stateprovince||r.stateProvince,postalCode:r.postalcode||r.postalCode,country:r.country,dateOfBirth:r.dateofbirth||r.dateOfBirth,gender:r.gender,status:r.status,...r};O(s)}R()},n=()=>{r&&j(!0),R()},i=()=>{j(!1),A(null)},d=()=>{if(r){const s=r.orders||0;if(s>0){U({open:!0,message:`Cannot archive customer with ${s} active orders. Please complete or cancel all orders first.`,severity:"warning"}),R();return}window.confirm("Are you sure you want to archive this customer? They will be hidden from the main customer list.")&&(U({open:!0,message:"Archiving customer...",severity:"info"}),t(r.customerNumber||r.id))}R()},v=()=>{I(!0),R()},S=async()=>{if(r){try{(await fetch(`${L}/api/customers/${r.customerNumber||r.id}/restore`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include"})).ok?(b("Customer restored successfully!"),_(k=>k.map(w=>w.customerNumber===r.customerNumber||w.id===r.id?{...w,status:"active"}:w))):b("Failed to restore customer")}catch{b("Network error")}I(!1),A(null)}},F=(s,k)=>{k!=="clickaway"&&U({...D,open:!1})},G=x.filter(s=>{var K,X,E,J,Z,je;const k=s.status==="archived";if(m&&!k||!m&&k)return!1;const w=h.toLowerCase();if(!w)return!0;switch($){case"name":return((K=s.fullName)==null?void 0:K.toLowerCase().includes(w))||((X=s.customerName)==null?void 0:X.toLowerCase().includes(w))||((E=s.customername)==null?void 0:E.toLowerCase().includes(w))||`${s.firstName||s.firstname||""} ${s.lastName||s.lastname||""}`.toLowerCase().includes(w);case"email":return(J=s.email)==null?void 0:J.toLowerCase().includes(w);case"location":return(Z=s.location)==null?void 0:Z.toLowerCase().includes(w);case"status":return(je=s.status)==null?void 0:je.toLowerCase().includes(w);default:return!0}});return e.jsxs(l,{children:[e.jsxs(l,{sx:{display:"flex",gap:3,mb:3,alignItems:"center",flexWrap:"wrap"},children:[e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(ie,{label:m?"Archived Customers":"Active Customers",variant:m?"filled":"outlined",onClick:()=>C(!m),sx:{cursor:"pointer",bgcolor:m?"warning.main":"primary.main",color:m?"warning.contrastText":"primary.contrastText","&:hover":{bgcolor:m?"warning.dark":"primary.dark"}}})}),H&&e.jsx(te,{severity:"success",sx:{mb:2},onClose:()=>b(""),children:H}),e.jsxs(We,{size:"small",sx:{minWidth:160},children:[e.jsx(Oe,{children:"Filter by"}),e.jsxs(_e,{value:$,onChange:s=>f(s.target.value),label:"Filter by",children:[e.jsx(W,{value:"name",children:"Name"}),e.jsx(W,{value:"email",children:"Email"}),e.jsx(W,{value:"location",children:"Location"}),e.jsx(W,{value:"status",children:"Status"})]})]}),e.jsx(P,{size:"small",placeholder:`Search by ${$}...`,value:h,onChange:s=>T(s.target.value),InputProps:{startAdornment:e.jsx(Y,{position:"start",children:e.jsx(Xe,{})})},sx:{flexGrow:1,maxWidth:300,maxWidth:"100%"}})]}),e.jsx(Te,{component:oe,sx:{boxShadow:1},children:e.jsxs(Ee,{children:[e.jsx(Le,{children:e.jsxs(ne,{sx:{bgcolor:"grey.50"},children:[e.jsx(N,{sx:{fontWeight:600},children:"Customer Number"}),e.jsx(N,{sx:{fontWeight:600},children:"Customer Name"}),e.jsx(N,{sx:{fontWeight:600},children:"Email"}),e.jsx(N,{sx:{fontWeight:600},children:"Location"}),e.jsx(N,{sx:{fontWeight:600},children:"Status"}),e.jsx(N,{sx:{fontWeight:600},children:"Orders"}),e.jsx(N,{align:"center",sx:{fontWeight:600},children:"Action"})]})}),e.jsx(ze,{children:G.length===0?e.jsx(ne,{children:e.jsx(N,{colSpan:7,align:"center",sx:{py:4},children:e.jsx(o,{variant:"body1",color:"text.secondary",children:h?"No customers found matching your search.":"No customers found."})})}):G.map(s=>{const k=s.fullName||s.customerName||s.customername||`${s.firstName||s.firstname||""} ${s.lastName||s.lastname||""}`.trim()||"Unknown Customer",w=s.customerNumberDisplay||s.customernumberdisplay||s.customerNumber?`#${s.customerNumber}`:s.customernumber?`#${s.customernumber}`:s.id?`#${s.id}`:"#0",K=s.initials||(s.firstName&&s.lastName?`${s.firstName.charAt(0)}${s.lastName.charAt(0)}`:s.firstname&&s.lastname?`${s.firstname.charAt(0)}${s.lastname.charAt(0)}`:"UC"),X=()=>{if(s.location){const E=s.location.split(", ");if(E.length>=2){const J=E[0],Z=E[E.length-1];return e.jsxs(l,{children:[e.jsx(o,{variant:"body2",sx:{lineHeight:1.2,fontSize:"13px"},children:J}),e.jsx(o,{variant:"caption",color:"text.secondary",sx:{lineHeight:1.2},children:Z})]})}}return"N/A"};return e.jsxs(ne,{hover:!0,sx:{cursor:"pointer"},children:[e.jsx(N,{children:e.jsx(o,{variant:"body2",fontWeight:"600",color:"primary.main",children:w})}),e.jsx(N,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Ne,{sx:{bgcolor:s.profileColor||s.profilecolor||"#FF6B6B",width:32,height:32,fontSize:"12px",fontWeight:600},children:K}),e.jsx(o,{variant:"body2",fontWeight:"600",children:k})]})}),e.jsx(N,{children:e.jsx(o,{variant:"body2",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s.email||"N/A"})}),e.jsx(N,{children:X()}),e.jsx(N,{children:e.jsx(ie,{label:s.status||"Active",size:"small",sx:{textTransform:"capitalize",backgroundColor:s.statusBackground||s.statusbackground||"#E8F5E8",color:s.statusColor||s.statuscolor||"#4CAF50",border:`1px solid ${s.statusColor||s.statuscolor||"#4CAF50"}`,fontWeight:500,fontSize:"11px",height:24}})}),e.jsx(N,{children:e.jsx(o,{variant:"body2",children:s.orders||0})}),e.jsx(N,{align:"center",children:e.jsx(Pe,{onClick:E=>M(E,s),size:"small",children:e.jsx(Ye,{})})})]},s.customerNumberDisplay||s.customernumberdisplay||Math.random())})})]})}),e.jsx(De,{anchorEl:a,open:!!a,onClose:R,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(r==null?void 0:r.status)==="archived"?[e.jsxs(W,{onClick:n,children:[e.jsx(le,{sx:{mr:1},fontSize:"small"}),"More Info"]},"info"),e.jsxs(W,{onClick:v,sx:{color:"success.main"},children:[e.jsx(Ue,{sx:{mr:1},fontSize:"small"}),"Restore Customer"]},"restore")]:[e.jsxs(W,{onClick:n,children:[e.jsx(le,{sx:{mr:1},fontSize:"small"}),"More Info"]},"info"),e.jsxs(W,{onClick:ae,children:[e.jsx(Ke,{sx:{mr:1},fontSize:"small"}),"Edit"]},"edit"),e.jsxs(W,{onClick:d,sx:{color:((r==null?void 0:r.orders)||0)>0?"text.disabled":"warning.main"},disabled:((r==null?void 0:r.orders)||0)>0,children:[e.jsx(Ge,{sx:{mr:1},fontSize:"small"}),"Archive",((r==null?void 0:r.orders)||0)>0&&e.jsxs(o,{variant:"caption",sx:{ml:1,color:"text.secondary"},children:["(",r==null?void 0:r.orders," orders)"]})]},"archive")]}),e.jsx(Ct,{open:p,onClose:i,customer:r}),e.jsxs(Se,{open:z,onClose:()=>I(!1),children:[e.jsx(we,{children:"Restore Customer"}),e.jsxs(Ae,{children:[e.jsxs(o,{sx:{mb:2},children:["Are you sure you want to restore ",e.jsx("b",{children:(r==null?void 0:r.customerName)||(r==null?void 0:r.fullName)}),"?"]}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"This will:"}),e.jsxs(o,{variant:"body2",component:"ul",sx:{pl:2},children:[e.jsx("li",{children:"Make the customer active again"}),e.jsx("li",{children:"Allow new orders for this customer"}),e.jsx("li",{children:"Change the status to active"})]}),e.jsxs(Re,{direction:"row",spacing:2,sx:{mt:3,justifyContent:"flex-end"},children:[e.jsx(V,{onClick:()=>I(!1),children:"Cancel"}),e.jsx(V,{onClick:S,color:"success",variant:"contained",children:"Restore Customer"})]})]})]}),e.jsx(Fe,{open:D.open,autoHideDuration:6e3,onClose:F,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(te,{onClose:F,severity:D.severity,variant:"filled",sx:{width:"100%"},children:D.message})})]})},wt=()=>{var H;const[g,O]=c.useState([]),[t,a]=c.useState(!1),[y,x]=c.useState(null),[_,r]=c.useState(!0),[A,h]=c.useState(""),T=async()=>{var b;try{r(!0),h(""),console.log(`Fetching customers from: ${L}/api/customers`);const p=await fetch(`${L}/api/customers`,{credentials:"include"});if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const j=await p.json();console.log("ðŸ“¥ Frontend received data:",j),j.success?(j.data&&j.data.length>0&&(console.log("ðŸ“¥ Sample customer received by frontend:",{id:j.data[0].id,customerNumber:j.data[0].customerNumber,firstName:j.data[0].firstName,lastName:j.data[0].lastName,fullName:j.data[0].fullName,email:j.data[0].email}),console.log("ðŸ“¥ All keys in first received customer:",Object.keys(j.data[0]))),O(j.data||[]),console.log("Customers loaded successfully:",((b=j.data)==null?void 0:b.length)||0)):h(j.message||"Failed to fetch customers")}catch(p){console.error("Error fetching customers:",p),p.message.includes("Failed to fetch")?h("Cannot connect to server. Make sure the backend is running on port 5000."):h(p.message||"Failed to connect to server")}finally{r(!1)}};c.useEffect(()=>{T()},[]);const $=()=>{x(null),a(!0),h("")},f=b=>{x(b),a(!0),h("")},m=async b=>{if(window.confirm("Are you sure you want to archive this customer?"))try{const p=await fetch(`${L}/api/customers/${b}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const j=await p.json();j.success?(O(g.filter(D=>D.id!==b)),h("")):h(j.message||"Failed to archive customer")}catch(p){console.error("Error archiving customer:",p),h("Failed to archive customer: "+p.message)}},C=async b=>{console.log("ðŸŽ¯ CustomersPage received form data:",b);try{let p;if(y?(console.log(`ðŸ“¡ Making PUT request to: ${L}/api/customers/${y.id}`),p=await fetch(`${L}/api/customers/${y.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(b)})):(console.log(`ðŸ“¡ Making POST request to: ${L}/api/customers`),p=await fetch(`${L}/api/customers`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(b)})),!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const j=await p.json();j.success?(console.log("âœ… Customer saved successfully"),await T(),a(!1),h("")):h(j.message||"Failed to save customer")}catch(p){console.error("âŒ Error saving customer:",p),h("Failed to save customer: "+p.message)}},z=()=>{a(!1),x(null),h("")},I=async()=>{try{(await fetch(`${L}/`,{credentials:"include"})).ok?(console.log("âœ… Server is reachable"),T()):h("Server is running but not responding correctly")}catch(b){console.error("âŒ Server connection test failed:",b),h("Cannot connect to server. Please start the backend server.")}};return _?e.jsx(ye,{title:"Customers",description:"Manage your customers",children:e.jsx(l,{sx:{minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:3},children:e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsx(Ce,{size:60,sx:{color:"white",mb:3}}),e.jsx(o,{variant:"h5",sx:{color:"white",fontWeight:600},children:"Loading customers..."})]})})}):e.jsxs(ye,{title:"Customers",description:"Manage your customers",children:[e.jsxs(l,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:3,p:4,boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:4},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(l,{sx:{width:60,height:60,borderRadius:"50%",background:"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:e.jsx(o,{sx:{fontSize:32},children:"ðŸ‘¥"})}),e.jsxs(l,{children:[e.jsx(o,{variant:"h3",sx:{color:"white",fontWeight:800,letterSpacing:1,textTransform:"uppercase"},children:"Customers"}),e.jsx(o,{sx:{color:"rgba(255, 255, 255, 0.9)",fontSize:16,mt:.5},children:"ðŸ“Š Manage and track your customer information"}),e.jsxs(o,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:12,mt:1},children:["Access Level: ",((H=He())==null?void 0:H.role)||"Unknown"]})]})]}),e.jsx(Ze,{permission:"customers",children:e.jsx(V,{variant:"contained",startIcon:e.jsx(Ve,{}),onClick:$,sx:{py:1.5,px:3,fontWeight:700,letterSpacing:1,fontSize:16,borderRadius:2,background:"white",color:"#667eea",boxShadow:"0 4px 20px rgba(255, 255, 255, 0.3)",transition:"all 0.3s ease",textTransform:"none","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 25px rgba(255, 255, 255, 0.4)",background:"white"}},children:"New Customer"})})]}),A&&e.jsx(te,{severity:"error",sx:{mb:3,borderRadius:2,boxShadow:2},onClose:()=>h(""),action:A.includes("server")||A.includes("connect")?e.jsx(V,{color:"inherit",size:"small",onClick:I,children:"Test Connection"}):null,children:A}),e.jsx(oe,{sx:{borderRadius:3,overflow:"hidden",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:e.jsx(St,{customers:g,onEdit:f,onArchive:m})})]}),e.jsx(Be,{open:t,onClose:z,"aria-labelledby":"customer-modal-title",sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(l,{sx:{width:{xs:"95%",sm:"90%",md:"850px"},maxHeight:"95vh",overflow:"auto",outline:"none","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{background:"#667eea",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#764ba2"}},children:e.jsx(ht,{customer:y,onSubmit:C,onCancel:z})})})]})},Lt=qe(wt,"customers");export{Lt as default};
