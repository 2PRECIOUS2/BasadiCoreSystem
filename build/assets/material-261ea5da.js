import{j as e,s as H,T as f,M as a,z as _e,A as Z,e as b,B as j,t as le,$ as Ie,I as U,f as p,a0 as W,a1 as We,K as Re,a2 as ze,a3 as Ae,N as Me,o as L,q as N,r as E,h as Pe,k as Te,l as ce,m as P,n as qe,a4 as T,v as Fe,a5 as $e,S as De,i as Ue,Z as Le}from"./mui-051d3b2b.js";import{r as n}from"./vendor-0625b040.js";import{A as R,r as Ne,d as de}from"./index-06d060e6.js";import{d as Ee,a as Oe}from"./MoreVert-f8e689fd.js";import{d as Be}from"./Search-4e890fc8.js";import{d as Ve,a as He}from"./Archive-52c9146e.js";import{d as J}from"./Close-5fff7674.js";import{d as Qe}from"./Inventory-b46826e9.js";import"./utils-f1b31201.js";const Ke=({onSuccess:C})=>{const[h,u]=n.useState({material_name:"",unit:"",category:"",quantity:0}),[S,I]=n.useState(null),[d,i]=n.useState(null),v=m=>{u({...h,[m.target.name]:m.target.value})},w=async m=>{m.preventDefault();const y=new FormData;y.append("material_name",h.material_name),y.append("unit",h.unit),y.append("category",h.category),y.append("quantity",h.quantity),S&&y.append("image",S);try{const o=await fetch(`${R}/api/material/add`,{method:"POST",credentials:"include",body:y});if(o.ok)i({type:"success",text:"Material added successfully"}),u({material_name:"",unit:"",category:"",quantity:0}),I(null),setTimeout(()=>{C&&C()},1500);else{const _=await o.json();i({type:"error",text:_.message})}}catch{i({type:"error",text:"Server error"})}};return e.jsx("form",{onSubmit:w,children:e.jsxs(H,{spacing:2,children:[e.jsx(f,{label:"Material Name",name:"material_name",fullWidth:!0,required:!0,value:h.material_name,onChange:v}),e.jsxs(f,{select:!0,label:"Unit",name:"unit",fullWidth:!0,required:!0,value:h.unit,onChange:v,children:[e.jsx(a,{value:"meters",children:"Meters"}),e.jsx(a,{value:"cm",children:"Centimeters"}),e.jsx(a,{value:"items",children:"Items"}),e.jsx(a,{value:"ml",children:"Milliliters"}),e.jsx(a,{value:"grams",children:"Grams"}),e.jsx(a,{value:"rolls",children:"Rolls"}),e.jsx(a,{value:"packs",children:"Packs"}),e.jsx(a,{value:"sheets",children:"Sheets"})]}),e.jsxs(f,{select:!0,label:"Category",name:"category",fullWidth:!0,required:!0,value:h.category,onChange:v,children:[e.jsx(a,{value:"Fabric & Textile",children:"Fabric & Textile"}),e.jsx(a,{value:"Fasteners & Accessories",children:"Fasteners & Accessories"}),e.jsx(a,{value:"Adhesives",children:"Adhesives"}),e.jsx(a,{value:"Decorative Items",children:"Decorative Items"}),e.jsx(a,{value:"Stationery Supplies",children:"Stationery Supplies"}),e.jsx(a,{value:"Packaging",children:"Packaging"})]}),e.jsx(f,{label:"Quantity",name:"quantity",type:"number",value:h.quantity,fullWidth:!0,disabled:!0,InputProps:{sx:{fontSize:18,borderRadius:2,color:"text.secondary"}}}),e.jsx(f,{type:"file",onChange:m=>I(m.target.files[0])}),e.jsx(_e,{in:!!d,children:e.jsx("div",{children:d&&e.jsx(Z,{severity:d.type,children:d.text})})}),e.jsx(b,{variant:"contained",type:"submit",sx:{py:1.5,fontWeight:600,letterSpacing:1,fontSize:18,borderRadius:2,background:"linear-gradient(90deg, #1976d2 60%, #64b5f6 100%)",boxShadow:"0 2px 8px #90caf9",transition:"transform 0.18s, box-shadow 0.18s","&:hover":{transform:"scale(1.05)",boxShadow:"0 4px 16px #90caf9",background:"linear-gradient(90deg, #1565c0 60%, #42a5f5 100%)"}},children:"Add Material"})]})})},Ge=({refreshTrigger:C})=>{const[h,u]=n.useState([]);n.useState(!1);const S=t=>t?["pcs","pieces","piece","units","unit","items","item","rolls","packs","sheets"].includes(t==null?void 0:t.toLowerCase()):!1,I=t=>S(t)?"primary":"info",d=t=>t<10,[i,v]=n.useState("name"),w=[...h].sort((t,c)=>i==="name"?t.material_name.localeCompare(c.material_name):i==="quantity"?c.quantity-t.quantity:i==="price"?c.unit_price-t.unit_price:0),[m,y]=n.useState(null),[o,_]=n.useState(null),[q,F]=n.useState(!1),[g,z]=n.useState({}),[Q,r]=n.useState(!1),[l,s]=n.useState(!1),[x,K]=n.useState("material_name"),[O,X]=n.useState(""),[A,he]=n.useState("active"),[ae,k]=n.useState(""),[re,$]=n.useState(""),se=100,B=(t=x,c=O,M=A)=>{let Y=`${R}/api/material/all`;const V=[];M&&V.push(`status=${encodeURIComponent(M)}`),c&&(t==="material_name"&&V.push(`search=${encodeURIComponent(c)}`),t==="category"&&V.push(`category=${encodeURIComponent(c)}`),t==="unit"&&V.push(`unit=${encodeURIComponent(c)}`)),V.length&&(Y+="?"+V.join("&")),fetch(Y,{credentials:"include"}).then(D=>D.json()).then(D=>{const Ce=(Array.isArray(D)?D:D.data||[]).sort((ke,we)=>new Date(we.created_at)-new Date(ke.created_at));u(Ce)}).catch(D=>{console.error("Error fetching materials:",D),k("Failed to fetch materials"),u([])})};n.useEffect(()=>{B()},[A]),n.useEffect(()=>{C&&B()},[C]);const xe=t=>{t.preventDefault(),B(x,O,A)},ne=t=>{he(t),X("")},pe=t=>{const c=t/se*100;return c>80?"success":c>60?"warning":c>20?"info":"error"},me=t=>t/se*100,ge=(t,c)=>{y(t.currentTarget),_(c)},G=(t=!0)=>{y(null),t&&_(null)},fe=()=>{o&&(z(o),F(!0)),G()},ee=t=>{z({...g,[t.target.name]:t.target.value})},je=async()=>{const t=new FormData;t.append("material_name",g.material_name),t.append("unit",g.unit),t.append("category",g.category),g.image&&t.append("image",g.image);try{(await fetch(`${R}/api/material/${g.material_id}`,{method:"PUT",credentials:"include",body:t})).ok?(F(!1),$("Material updated successfully"),B(),setTimeout(()=>$(""),3e3)):k("Failed to update material")}catch{k("Failed to update material")}},be=()=>{console.log("ðŸŽ¯ Archive button clicked!",o),r(!0),G(!1)},ve=async()=>{if(console.log("ðŸ”¥ CONFIRM ARCHIVE BUTTON CLICKED!"),console.log("ðŸ“¦ Selected material:",o),!o){console.error("âŒ No material selected"),k("No material selected"),setTimeout(()=>k(""),3e3);return}console.log("ðŸš€ Starting archive process...");try{const t=`${R}/api/material/${o.material_id}/archive`;console.log("ðŸŒ Making request to:",t);const c=await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include"});console.log("ðŸ“¡ Response status:",c.status),console.log("ðŸ“¡ Response ok:",c.ok);const M=await c.text();if(console.log("ðŸ“¡ Raw response:",M),c.ok){const Y=JSON.parse(M);console.log("âœ… Success response:",Y),r(!1),$("Material archived successfully"),B(),setTimeout(()=>$(""),3e3)}else console.error("âŒ Error response:",M),k(`Failed to archive material (${c.status})`),setTimeout(()=>k(""),3e3)}catch(t){console.error("ðŸš¨ Network error:",t),k("Network error - check if server is running"),setTimeout(()=>k(""),3e3)}};console.log("ðŸŽ­ Dialog states:",{openArchive:Q,openRestore:l,selectedMaterial:o==null?void 0:o.material_name});const ye=()=>{s(!0),G(!1)},Se=async()=>{if(o)try{const t=await fetch(`${R}/api/material/${o.material_id}/restore`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include"});if(t.ok)s(!1),$("Material restored successfully"),B(),setTimeout(()=>$(""),3e3);else{const c=await t.json();k(c.message||"Failed to restore material")}}catch{k("Failed to restore material")}},ie=()=>r(!1),oe=()=>s(!1);return e.jsxs(e.Fragment,{children:[ae&&e.jsx(Z,{severity:"error",sx:{mb:2},onClose:()=>k(""),children:ae}),re&&e.jsx(Z,{severity:"success",sx:{mb:2},onClose:()=>$(""),children:re}),e.jsxs(j,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(b,{variant:A==="active"?"contained":"outlined",onClick:()=>ne("active"),size:"small",children:"Active Materials"}),e.jsx(b,{variant:A==="inactive"?"contained":"outlined",onClick:()=>ne("inactive"),color:"warning",size:"small",children:"Archived Materials"})]}),e.jsxs(j,{sx:{display:"flex",alignItems:"center",mb:2,gap:2},children:[e.jsxs(le,{value:x,onChange:t=>K(t.target.value),size:"small",sx:{minWidth:140},children:[e.jsx(a,{value:"material_name",children:"Material Name"}),e.jsx(a,{value:"category",children:"Category"}),e.jsx(a,{value:"unit",children:"Unit"})]}),e.jsx("form",{onSubmit:xe,style:{flex:1},children:e.jsx(f,{size:"small",placeholder:`Search by ${x.replace("_"," ")}`,value:O,onChange:t=>X(t.target.value),InputProps:{endAdornment:e.jsx(Ie,{position:"end",children:e.jsx(U,{type:"submit",size:"small",children:e.jsx(Be,{})})})},fullWidth:!0})})]}),e.jsx(p,{variant:"h6",gutterBottom:!0,sx:{mt:0,textAlign:"center",fontWeight:700,letterSpacing:1,color:"black"},children:A==="active"?"Active Materials":A==="inactive"?"Archived Materials":"All Materials"}),e.jsxs(j,{sx:{display:"flex",alignItems:"center",mb:2,gap:2},children:[e.jsx(p,{variant:"body2",sx:{fontWeight:600},children:"Sort by:"}),e.jsxs(le,{value:i,onChange:t=>v(t.target.value),size:"small",sx:{minWidth:120},children:[e.jsx(a,{value:"name",children:"Name"}),e.jsx(a,{value:"quantity",children:"Quantity"}),e.jsx(a,{value:"price",children:"Price"})]})]}),e.jsx(W,{container:!0,spacing:3,sx:{mt:1},children:w.length===0?e.jsx(W,{item:!0,xs:12,children:e.jsx(p,{variant:"body1",children:A==="inactive"?"No archived materials found.":"No materials found."})}):w.map((t,c)=>e.jsx(W,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(We,{elevation:3,sx:{borderRadius:3,p:2,transition:"box-shadow 0.2s","&:hover":{boxShadow:8},height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",opacity:t.status==="inactive"?.7:1,border:t.status==="inactive"?"2px dashed #ff9800":"2px solid #ef12faff",bgcolor:c%2===0?"#f8fafc":"#fff"},children:[e.jsxs(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:2},children:[e.jsx(Re,{variant:"rounded",src:t.image_path?`/images/materials/${t.image_path}`:"/images/materials/placeholder.jpg",sx:{width:72,height:72,bgcolor:"#f5f5f5",border:"1px solid #e0e0e0",mb:1,objectFit:"cover",fontSize:32,color:"#bdbdbd"},children:!t.image_path&&e.jsx(j,{component:"span",sx:{fontSize:32},children:"ðŸ–¼ï¸"})}),e.jsx(p,{variant:"h6",sx:{fontWeight:600,textAlign:"center"},children:t.material_name}),e.jsxs(j,{sx:{mt:1,mb:.5,textAlign:"center"},children:[e.jsx(p,{variant:"body2",sx:{fontWeight:500,color:"text.secondary",mb:.2},children:t.category}),e.jsx(p,{variant:"body2",sx:{fontWeight:500,color:I(t.unit)+".main"},children:t.unit})]}),e.jsxs(p,{variant:"body2",sx:{color:"text.secondary",fontSize:13,textAlign:"center",mt:.5,letterSpacing:1},children:["SKU: ",t.sku_code]}),e.jsxs(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mt:.5},children:[e.jsxs(p,{variant:"body2",sx:{color:"text.secondary",fontSize:15,textAlign:"center",letterSpacing:1,fontWeight:500},title:`Unit Price: R${t.unit_price?Number(t.unit_price).toFixed(2):"0.00"}`,children:["R",t.unit_price?Number(t.unit_price).toFixed(2):"0.00"]}),e.jsx(p,{variant:"caption",sx:{ml:.5,color:"text.secondary",fontWeight:400},children:"per unit"})]})]}),e.jsxs(j,{sx:{width:"100%",mb:1},children:[e.jsx(ze,{variant:"determinate",value:me(t.quantity),color:pe(t.quantity),sx:{height:8,borderRadius:5}}),e.jsx(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:.5},children:e.jsxs(p,{variant:"caption",sx:{color:d(t.quantity)?"error.main":"text.secondary",fontWeight:d(t.quantity)?700:400},title:d(t.quantity)?"Low stock!":"Stock quantity",children:["Qty: ",t.quantity,d(t.quantity)&&e.jsx(Ae,{label:"Low",color:"error",size:"small",sx:{ml:1}})]})})]}),e.jsxs(j,{sx:{display:"flex",justifyContent:"flex-end",mt:"auto"},children:[e.jsx(U,{"aria-label":"settings",onClick:M=>ge(M,t),size:"small",children:e.jsx(Ee,{})}),e.jsx(Me,{anchorEl:m,open:!!m&&(o==null?void 0:o.material_id)===t.material_id,onClose:G,children:t.status==="active"?[e.jsxs(a,{onClick:fe,sx:{color:"primary.main"},children:[e.jsx(Oe,{sx:{mr:1,color:"#1976d2"},fontSize:"small"}),"Update"]},"update"),e.jsxs(a,{onClick:be,sx:{color:"error.main"},children:[e.jsx(Ve,{sx:{mr:1,color:"#d32f2f"},fontSize:"small"}),"Archive"]},"archive")]:[e.jsxs(a,{onClick:ye,sx:{color:"success.main"},children:[e.jsx(He,{sx:{mr:1,color:"#388e3c"},fontSize:"small"}),"Restore"]},"restore")]})]})]})},t.material_id))}),e.jsxs(L,{open:Q,onClose:ie,children:[e.jsx(N,{children:"Archive Material"}),e.jsxs(E,{children:[e.jsxs(p,{sx:{mb:2},children:["Are you sure you want to archive ",e.jsx("b",{children:o==null?void 0:o.material_name}),"?"]}),e.jsx(p,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"This will:"}),e.jsxs(p,{variant:"body2",component:"ul",sx:{pl:2},children:[e.jsx("li",{children:"Hide the material from searches and product creation"}),e.jsx("li",{children:"Prevent new stock from being added"}),e.jsx("li",{children:"Change the status to inactive"}),e.jsx("li",{children:"Material can be restored later if needed"})]}),e.jsxs(H,{direction:"row",spacing:2,sx:{mt:3,justifyContent:"flex-end"},children:[e.jsx(b,{onClick:ie,children:"Cancel"}),e.jsx(b,{onClick:ve,color:"error",variant:"contained",children:"Archive Material"})]})]})]}),e.jsxs(L,{open:l,onClose:oe,children:[e.jsx(N,{children:"Restore Material"}),e.jsxs(E,{children:[e.jsxs(p,{sx:{mb:2},children:["Are you sure you want to restore ",e.jsx("b",{children:o==null?void 0:o.material_name}),"?"]}),e.jsx(p,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"This will:"}),e.jsxs(p,{variant:"body2",component:"ul",sx:{pl:2},children:[e.jsx("li",{children:"Make the material available for searches and product creation"}),e.jsx("li",{children:"Allow new stock to be added"}),e.jsx("li",{children:"Change the status to active"})]}),e.jsxs(H,{direction:"row",spacing:2,sx:{mt:3,justifyContent:"flex-end"},children:[e.jsx(b,{onClick:oe,children:"Cancel"}),e.jsx(b,{onClick:Se,color:"success",variant:"contained",children:"Restore Material"})]})]})]}),e.jsxs(L,{open:q,onClose:()=>F(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsx(N,{children:"Update Material"}),e.jsx(E,{children:e.jsxs(H,{spacing:2,sx:{mt:1},children:[e.jsx(f,{name:"material_name",label:"Material Name",fullWidth:!0,value:g.material_name||"",onChange:ee}),e.jsx(f,{label:"SKU Code",value:g.sku_code,fullWidth:!0,disabled:!0}),e.jsx(f,{label:"Unit Price",value:g.unit_price,fullWidth:!0,disabled:!0}),e.jsx(f,{label:"Quantity",value:g.quantity,fullWidth:!0,disabled:!0}),e.jsxs(f,{select:!0,name:"category",label:"Category",value:g.category||"",onChange:ee,fullWidth:!0,children:[e.jsx(a,{value:"Fabric & Textile",children:"Fabric & Textile"}),e.jsx(a,{value:"Fasteners & Accessories",children:"Fasteners & Accessories"}),e.jsx(a,{value:"Adhesives",children:"Adhesives"}),e.jsx(a,{value:"Decorative Items",children:"Decorative Items"}),e.jsx(a,{value:"Stationery Supplies",children:"Stationery Supplies"}),e.jsx(a,{value:"Packaging",children:"Packaging"})]}),e.jsxs(f,{select:!0,name:"unit",label:"Unit",value:g.unit||"",onChange:ee,fullWidth:!0,children:[e.jsx(a,{value:"meters",children:"Meters"}),e.jsx(a,{value:"cm",children:"Centimeters"}),e.jsx(a,{value:"items",children:"Items"}),e.jsx(a,{value:"ml",children:"Milliliters"}),e.jsx(a,{value:"grams",children:"Grams"}),e.jsx(a,{value:"rolls",children:"Rolls"}),e.jsx(a,{value:"packs",children:"Packs"}),e.jsx(a,{value:"sheets",children:"Sheets"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>z({...g,image:t.target.files[0]})}),e.jsx(b,{onClick:je,variant:"contained",children:"Save Changes"})]})})]})]})},Ye=()=>{const[C,h]=n.useState([]),[u,S]=n.useState(null);n.useState(null),n.useState([]),n.useEffect(()=>{fetch(`${R}/api/stock/invoices`,{credentials:"include"}).then(i=>i.json()).then(i=>h(i))},[]);const I=async i=>{const w=await(await fetch(`${R}/api/stock/invoice/${i.invoice_number}/download`,{credentials:"include"})).blob(),m=window.URL.createObjectURL(w);S(m)},d=()=>{u&&window.URL.revokeObjectURL(u),S(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(Pe,{children:[e.jsx(Te,{children:e.jsxs(ce,{children:[e.jsx(P,{children:"Invoice Number"}),e.jsx(P,{children:"Date"}),e.jsx(P,{children:"Total Cost"}),e.jsx(P,{children:"Actions"})]})}),e.jsx(qe,{children:C.map(i=>e.jsxs(ce,{children:[e.jsx(P,{children:i.invoice_number}),e.jsx(P,{children:new Date(i.purchase_date).toLocaleDateString()}),e.jsxs(P,{children:["R",i.total_cost]}),e.jsxs(P,{children:[e.jsx(b,{onClick:()=>I(i),children:"View"}),e.jsx(b,{href:`${R}/api/stock/invoice/${i.invoice_number}/download`,target:"_blank",rel:"noopener",children:"Download PDF"})]})]},i.invoice_number))})]}),e.jsxs(L,{open:!!u,onClose:d,maxWidth:"md",fullWidth:!0,children:[e.jsxs(N,{children:["Invoice PDF Preview",e.jsx(U,{"aria-label":"close",onClick:d,sx:{position:"absolute",right:8,top:8,color:i=>i.palette.grey[500]},children:e.jsx(J,{})})]}),e.jsx(E,{dividers:!0,sx:{height:"80vh",p:0},children:u&&e.jsx("iframe",{src:u,title:"Invoice PDF",width:"100%",height:"100%",style:{border:"none",minHeight:"75vh"}})})]})]})},Je=({onStockAdded:C})=>{const[h,u]=n.useState({open:!1,message:"",severity:"success"}),[S,I]=n.useState([]),[d,i]=n.useState([{material_id:"",supplier_name:"",quantity:"",price_bought:"",unit_price:0}]),[v,w]=n.useState(""),[m,y]=n.useState(0);n.useEffect(()=>{o()},[]);const o=()=>{fetch(`${R}/api/material/all`,{credentials:"include"}).then(r=>r.json()).then(r=>I(r)).catch(r=>{console.error("Error fetching materials:",r),u({open:!0,message:"Error loading materials",severity:"error"})})},_=(r,l,s)=>{const x=[...d];if(l==="quantity"&&parseInt(s)>2e3){u({open:!0,message:"Maximum 2000 units allowed",severity:"warning"});return}x[r][l]=s;const{quantity:K,price_bought:O}=x[r];K&&O&&(x[r].unit_price=(parseFloat(O)/parseInt(K)).toFixed(2)),i(x),q(x)},q=r=>{const l=r.reduce((s,x)=>s+parseFloat(x.price_bought||0),0);y(l.toFixed(2))},F=()=>{i([...d,{material_id:"",supplier_name:"",quantity:"",price_bought:"",unit_price:0}])},g=r=>{const l=[...d];l.splice(r,1),i(l),q(l)},z=()=>{if(!v)return u({open:!0,message:"Please select a purchase date",severity:"error"}),!1;for(let r=0;r<d.length;r++){const l=d[r];if(!l.material_id||!l.supplier_name||!l.quantity||!l.price_bought)return u({open:!0,message:`Please fill all fields for row ${r+1}`,severity:"error"}),!1;const s=parseInt(l.quantity);if(s<=0||s>2e3)return u({open:!0,message:`Quantity for row ${r+1} must be between 1 and 2000`,severity:"error"}),!1}return!0},Q=async()=>{if(!z())return;const r={stockItems:d,purchaseDate:v,totalCost:m};try{const l=await fetch(`${R}/api/stock/add`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)}),s=await l.json();l.ok?(u({open:!0,message:"Stock added and invoice generated successfully!",severity:"success"}),i([{material_id:"",supplier_name:"",quantity:"",price_bought:"",unit_price:0}]),w(""),y(0),C&&C()):u({open:!0,message:s.message||"Error submitting stock",severity:"error"})}catch(l){console.error(l),u({open:!0,message:"Server error occurred",severity:"error"})}};return e.jsxs(H,{spacing:4,sx:{width:"100%",maxWidth:1200,minWidth:400,bgcolor:"#f5faff",p:4,borderRadius:4,boxShadow:4,mx:"auto",my:"auto",position:"relative"},children:[e.jsxs(p,{variant:"h4",sx:{fontWeight:900,color:"#1976d2",letterSpacing:1,mb:2,display:"flex",alignItems:"center"},children:[e.jsx(T,{sx:{fontSize:36,mr:1}})," Add New Stock"]}),d.map((r,l)=>e.jsxs(W,{container:!0,spacing:3,alignItems:"center",sx:{mb:2},children:[e.jsx(W,{item:!0,xs:3,children:e.jsx(Fe,{value:S.find(s=>s.material_id===r.material_id)||null,onChange:(s,x)=>{_(l,"material_id",x?x.material_id:"")},options:S,getOptionLabel:s=>`${s.material_name} ${s.unit?`(${s.unit})`:""}`,isOptionEqualToValue:(s,x)=>s.material_id===x.material_id,renderInput:s=>e.jsx(f,{...s,label:e.jsxs("span",{style:{fontWeight:700},children:[e.jsx(T,{sx:{fontSize:20,color:"#1976d2",mr:.5}}),"Select Material"]}),placeholder:"Search materials...",InputProps:{...s.InputProps,sx:{fontSize:20,fontWeight:700}},InputLabelProps:{sx:{fontSize:20,fontWeight:700}},required:!0}),renderOption:(s,x)=>n.createElement("li",{...s,key:x.material_id,style:{fontSize:20,fontWeight:700}},x.material_name," ",x.unit?`(${x.unit})`:""),sx:{"& .MuiAutocomplete-popupIndicator":{color:"#1976d2"},"& .MuiAutocomplete-clearIndicator":{color:"#1976d2"}}})}),e.jsx(W,{item:!0,xs:3,children:e.jsx(f,{label:e.jsxs("span",{style:{fontWeight:700},children:[e.jsx(T,{sx:{fontSize:20,color:"#43a047",mr:.5}}),"Supplier Name"]}),fullWidth:!0,value:r.supplier_name,onChange:s=>_(l,"supplier_name",s.target.value),InputProps:{sx:{fontSize:18,height:56,fontWeight:700}},InputLabelProps:{sx:{fontSize:18,fontWeight:700}},required:!0})}),e.jsx(W,{item:!0,xs:2,children:e.jsx(f,{label:e.jsxs("span",{style:{fontWeight:700},children:[e.jsx(T,{sx:{fontSize:20,color:"#fbc02d",mr:.5}}),"Quantity"]}),type:"number",fullWidth:!0,value:r.quantity,onChange:s=>_(l,"quantity",s.target.value),inputProps:{step:"1",min:1,max:2e3,onInput:s=>{parseInt(s.target.value)>2e3&&(s.target.value=2e3)}},InputProps:{sx:{fontSize:18,height:56,fontWeight:700}},InputLabelProps:{sx:{fontSize:18,fontWeight:700}},required:!0,error:r.quantity&&(parseInt(r.quantity)>2e3||parseInt(r.quantity)<=0)})}),e.jsx(W,{item:!0,xs:2,children:e.jsx(f,{label:e.jsxs("span",{style:{fontWeight:700},children:[e.jsx(T,{sx:{fontSize:20,color:"#d81b60",mr:.5}}),"Total Price Bought"]}),type:"number",fullWidth:!0,value:r.price_bought,onChange:s=>_(l,"price_bought",s.target.value),InputProps:{sx:{fontSize:16,height:56,fontWeight:700}},InputLabelProps:{sx:{fontSize:16,fontWeight:700}},inputProps:{step:"0.01",min:0},required:!0})}),e.jsx(W,{item:!0,xs:2,children:e.jsx(f,{label:e.jsxs("span",{style:{fontWeight:700},children:[e.jsx(T,{sx:{fontSize:20,color:"#1976d2",mr:.5}}),"Unit Price"]}),disabled:!0,value:r.unit_price,fullWidth:!0,InputProps:{sx:{fontSize:18,height:56,fontWeight:700,bgcolor:"#f5f5f5"}},InputLabelProps:{sx:{fontSize:18,fontWeight:700}}})}),e.jsx(W,{item:!0,xs:12,sm:1,children:e.jsx(U,{color:"error",onClick:()=>g(l),disabled:d.length===1,sx:{bgcolor:"#fff",border:"2px solid #d81b60",p:1},title:"Remove this row",children:e.jsx($e,{sx:{fontSize:28,color:"#d81b60"}})})})]},l)),e.jsx(b,{startIcon:e.jsx(T,{sx:{fontSize:24}}),onClick:F,sx:{fontWeight:900,fontSize:18,bgcolor:"#1976d2",color:"#fff",borderRadius:2,boxShadow:2,py:1,px:3,"&:hover":{bgcolor:"#1565c0"}},children:"Add Stock Row"}),e.jsx(f,{label:e.jsxs("span",{style:{fontWeight:700},children:[e.jsx(T,{sx:{fontSize:20,color:"#43a047",mr:.5}}),"Purchase Date"]}),type:"date",fullWidth:!0,InputLabelProps:{shrink:!0,sx:{fontSize:18,fontWeight:700}},value:v,onChange:r=>w(r.target.value),sx:{fontSize:18,fontWeight:700,height:56},required:!0,inputProps:{max:new Date().toISOString().split("T")[0]}}),e.jsxs(p,{variant:"h5",sx:{fontWeight:900,color:"#1976d2",letterSpacing:1,mt:2},children:["Total: R",m]}),e.jsx(b,{variant:"contained",color:"primary",onClick:Q,sx:{fontWeight:900,fontSize:18,py:1.5,borderRadius:2,boxShadow:2,bgcolor:"#1976d2","&:hover":{bgcolor:"#1565c0"}},disabled:!v||d.length===0,children:"SUBMIT STOCK & GENERATE INVOICE"}),e.jsx(De,{open:h.open,autoHideDuration:4e3,onClose:()=>u({...h,open:!1}),anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(Z,{onClose:()=>u({...h,open:!1}),severity:h.severity,sx:{width:"100%",fontSize:18,fontWeight:700},children:h.message})})]})};var te={},Ze=Ue;Object.defineProperty(te,"__esModule",{value:!0});var ue=te.default=void 0,Xe=Ze(Ne()),et=e;ue=te.default=(0,Xe.default)((0,et.jsx)("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"}),"Receipt");const ut=()=>{const[C,h]=n.useState(!1),[u,S]=n.useState(!1),[I,d]=n.useState(!1),[i,v]=n.useState(0),w=()=>h(!0),m=()=>h(!1),y=()=>d(!0),o=()=>d(!1),_=()=>S(!0),q=()=>S(!1),F=()=>{o(),v(z=>z+1)},g=()=>{m(),v(z=>z+1)};return e.jsxs(j,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",py:4,px:2},children:[e.jsxs(Le,{maxWidth:"lg",children:[e.jsxs(j,{sx:{background:"white",borderRadius:4,p:4,mb:4,boxShadow:"0 20px 60px rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:3},children:[e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(j,{sx:{width:80,height:80,borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 24px rgba(102, 126, 234, 0.4)"},children:e.jsx(Qe,{sx:{fontSize:40,color:"white"}})}),e.jsxs(j,{children:[e.jsx(p,{variant:"h3",sx:{fontWeight:800,letterSpacing:1,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textTransform:"uppercase"},children:"Material Management"}),e.jsx(p,{sx:{color:"text.secondary",fontSize:16,mt:.5,fontWeight:500},children:"ðŸ“¦ Track and manage your inventory efficiently"})]})]}),e.jsxs(H,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(b,{variant:"contained",startIcon:e.jsx(de,{}),onClick:y,sx:{py:1.5,px:3,fontWeight:700,letterSpacing:1,fontSize:15,borderRadius:2,background:"linear-gradient(90deg, #4caf50 0%, #81c784 100%)",boxShadow:"0 4px 15px rgba(76, 175, 80, 0.4)",transition:"all 0.3s ease",textTransform:"none","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(76, 175, 80, 0.6)",background:"linear-gradient(90deg, #388e3c 0%, #66bb6a 100%)"}},children:"New Material"}),e.jsx(b,{variant:"contained",startIcon:e.jsx(de,{}),onClick:w,sx:{py:1.5,px:3,fontWeight:700,letterSpacing:1,fontSize:15,borderRadius:2,background:"linear-gradient(90deg, #1976d2 0%, #64b5f6 100%)",boxShadow:"0 4px 15px rgba(25, 118, 210, 0.4)",transition:"all 0.3s ease",textTransform:"none","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(25, 118, 210, 0.6)",background:"linear-gradient(90deg, #1565c0 0%, #42a5f5 100%)"}},children:"New Stock"}),e.jsx(b,{variant:"outlined",startIcon:e.jsx(ue,{}),onClick:_,sx:{py:1.5,px:3,fontWeight:700,letterSpacing:1,fontSize:15,borderRadius:2,borderWidth:2,borderColor:"#667eea",color:"#667eea",textTransform:"none",transition:"all 0.3s ease","&:hover":{borderWidth:2,borderColor:"#764ba2",backgroundColor:"rgba(102, 126, 234, 0.1)",transform:"translateY(-2px)"}},children:"Invoices"})]})]}),e.jsx(j,{sx:{background:"white",borderRadius:4,p:4,boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:e.jsx(Ge,{refreshTrigger:i,maxItemsPerPage:16})})]}),e.jsxs(L,{open:I,onClose:o,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:"0 20px 60px rgba(0,0,0,0.3)"}},children:[e.jsxs(N,{sx:{m:0,p:3,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:700,fontSize:20,letterSpacing:1},children:["Add New Material",e.jsx(U,{"aria-label":"close",onClick:o,sx:{position:"absolute",right:8,top:8,color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:e.jsx(J,{})})]}),e.jsx(E,{dividers:!0,sx:{p:3},children:e.jsx(Ke,{onSuccess:F})})]}),e.jsxs(L,{open:C,onClose:m,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:"0 20px 60px rgba(0,0,0,0.3)"}},children:[e.jsxs(N,{sx:{m:0,p:3,background:"linear-gradient(135deg, #1976d2 0%, #64b5f6 100%)",color:"white",fontWeight:700,fontSize:20,letterSpacing:1},children:["Add New Stock",e.jsx(U,{"aria-label":"close",onClick:m,sx:{position:"absolute",right:8,top:8,color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:e.jsx(J,{})})]}),e.jsx(E,{dividers:!0,sx:{p:3},children:e.jsx(Je,{onStockAdded:g})})]}),e.jsxs(L,{open:u,onClose:q,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:"0 20px 60px rgba(0,0,0,0.3)"}},children:[e.jsxs(N,{sx:{m:0,p:3,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:700,fontSize:20,letterSpacing:1},children:["Invoices",e.jsx(U,{"aria-label":"close",onClick:q,sx:{position:"absolute",right:8,top:8,color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:e.jsx(J,{})})]}),e.jsx(E,{dividers:!0,sx:{p:3},children:e.jsx(Ye,{})})]})]})};export{ut as default};
